var app=function(){"use strict";function e(){}const t=e=>e;function r(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(r)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e){return null==e?"":e}const i="undefined"!=typeof window;let c=i?()=>window.performance.now():()=>Date.now(),d=i?e=>requestAnimationFrame(e):e;const u=new Set;let p,m=!1;function f(){u.forEach(e=>{e[0](c())||(u.delete(e),e[1]())}),m=u.size>0,m&&d(f)}function g(e){let t;return m||(m=!0,d(f)),{promise:new Promise(r=>{u.add(t=[e,r])}),abort(){u.delete(t)}}}function h(e,t){e.appendChild(t)}function b(e,t,r){e.insertBefore(t,r||null)}function v(e){e.parentNode.removeChild(e)}function x(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function C(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function y(){return $(" ")}function k(){return $("")}function O(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function _(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){(null!=t||e.value)&&(e.value=t)}function V(e,t,r,n){e.style.setProperty(t,r,n?"important":"")}function U(e,t){for(let r=0;r<e.options.length;r+=1){const n=e.options[r];if(n.__value===t)return void(n.selected=!0)}}let D,T=0,N={};function F(e,t,r,n,l,a,s,o=0){const i=16.666/n;let c="{\n";for(let e=0;e<=1;e+=i){const n=t+(r-t)*a(e);c+=100*e+`%{${s(n,1-n)}}\n`}const d=c+`100% {${s(r,1-r)}}\n}`,u=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(d)}_${o}`;if(!N[u]){if(!p){const e=C("style");document.head.appendChild(e),p=e.sheet}N[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length)}const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${u} ${n}ms linear ${l}ms 1 both`,T+=1,u}function L(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--T&&d(()=>{if(T)return;let e=p.cssRules.length;for(;e--;)p.deleteRule(e);N={}})}function S(e){D=e}const E=[],j=[],I=[],B=[],M=Promise.resolve();let H,P=!1;function R(e){I.push(e)}function q(){const e=new Set;do{for(;E.length;){const e=E.shift();S(e),Q(e.$$)}for(;j.length;)j.pop()();for(let t=0;t<I.length;t+=1){const r=I[t];e.has(r)||(r(),e.add(r))}I.length=0}while(E.length);for(;B.length;)B.pop()();P=!1}function Q(e){null!==e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(R))}function K(){return H||(H=Promise.resolve(),H.then(()=>{H=null})),H}function J(e,t,r){e.dispatchEvent(function(e,t){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!1,t),r}(`${t?"intro":"outro"}${r}`))}const W=new Set;let G;function z(){G={r:0,c:[],p:G}}function Y(){G.r||l(G.c),G=G.p}function X(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Z(e,t,r,n){if(e&&e.o){if(W.has(e))return;W.add(e),G.c.push(()=>{W.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}}const ee={duration:0};function te(r,n,s,o){let i=n(r,s),d=o?0:1,u=null,p=null,m=null;function f(){m&&L(r,m)}function h(e,t){const r=e.b-d;return t*=Math.abs(r),{a:d,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(n){const{delay:a=0,duration:s=300,easing:o=t,tick:b=e,css:v}=i||ee,x={start:c()+a,b:n};n||(x.group=G,G.r+=1),u?p=x:(v&&(f(),m=F(r,d,n,s,a,o,v)),n&&b(0,1),u=h(x,s),R(()=>J(r,n,"start")),g(e=>{if(p&&e>p.start&&(u=h(p,s),p=null,J(r,u.b,"start"),v&&(f(),m=F(r,d,u.b,u.duration,0,o,i.css))),u)if(e>=u.end)b(d=u.b,1-d),J(r,u.b,"end"),p||(u.b?f():--u.group.r||l(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;d=u.a+u.d*o(t/u.duration),b(d,1-d)}return!(!u&&!p)}))}return{run(e){a(i)?K().then(()=>{i=i(),b(e)}):b(e)},end(){f(),u=p=null}}}function re(e){e&&e.c()}function ne(e,t,n){const{fragment:s,on_mount:o,on_destroy:i,after_update:c}=e.$$;s&&s.m(t,n),R(()=>{const t=o.map(r).filter(a);i?i.push(...t):l(t),e.$$.on_mount=[]}),c.forEach(R)}function le(e,t){const r=e.$$;null!==r.fragment&&(l(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx={})}function ae(e,t){e.$$.dirty||(E.push(e),P||(P=!0,M.then(q)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function se(t,r,a,s,o,i){const c=D;S(t);const d=r.props||{},u=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let p=!1;u.ctx=a?a(t,d,(e,r,n=r)=>(u.ctx&&o(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),p&&ae(t,e)),r)):d,u.update(),p=!0,l(u.before_update),u.fragment=!!s&&s(u.ctx),r.target&&(r.hydrate?u.fragment&&u.fragment.l(function(e){return Array.from(e.childNodes)}(r.target)):u.fragment&&u.fragment.c(),r.intro&&X(t.$$.fragment),ne(t,r.target,r.anchor),q()),S(c)}class oe{$destroy(){le(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(){}}function ie(e){const t=e-1;return t*t*t+1}function ce(e,{delay:t=0,duration:r=400,easing:n=ie}){const l=getComputedStyle(e),a=+l.opacity,s=parseFloat(l.height),o=parseFloat(l.paddingTop),i=parseFloat(l.paddingBottom),c=parseFloat(l.marginTop),d=parseFloat(l.marginBottom),u=parseFloat(l.borderTopWidth),p=parseFloat(l.borderBottomWidth);return{delay:t,duration:r,easing:n,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*s}px;`+`padding-top: ${e*o}px;`+`padding-bottom: ${e*i}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*d}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*p}px;`}}const de=[];function ue(t,r=e){let n;const l=[];function a(e){if(s(t,e)&&(t=e,n)){const e=!de.length;for(let e=0;e<l.length;e+=1){const r=l[e];r[1](),de.push(r,t)}if(e){for(let e=0;e<de.length;e+=2)de[e][0](de[e+1]);de.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(s,o=e){const i=[s,o];return l.push(i),1===l.length&&(n=r(a)||e),s(t),()=>{const e=l.indexOf(i);-1!==e&&l.splice(e,1),0===l.length&&(n(),n=null)}}}}const pe=ue(""),me=ue({});function fe(e){let t,r,n,l;return{c(){t=C("div"),r=$(e.alertText),_(t,"class","alert alert-danger svelte-1r1bdcq"),_(t,"role","alert")},m(e,n){b(e,t,n),h(t,r),l=!0},p(e,t){l&&!e.alertText||w(r,t.alertText)},i(e){l||(R(()=>{n||(n=te(t,ce,{},!0)),n.run(1)}),l=!0)},o(e){n||(n=te(t,ce,{},!1)),n.run(0),l=!1},d(e){e&&v(t),e&&n&&n.end()}}}function ge(e){let t,r,n,a,s,o,i,c,d,u,p,m="Registera"===e.headerText&&be(e);return{c(){t=C("form"),r=C("div"),m&&m.c(),n=y(),a=C("label"),a.textContent="Email address",s=y(),o=C("input"),i=y(),c=C("button"),c.textContent="Vidare",_(a,"for","exampleInputEmail1"),_(o,"type","email"),_(o,"class","form-control"),_(o,"id","exampleInputEmail1"),_(o,"aria-describedby","emailHelp"),_(o,"placeholder","Din email"),_(r,"class","form-group"),_(c,"type","submit"),_(c,"class","btn btn-primary"),p=[O(o,"input",e.input_input_handler_2),O(t,"submit",e.login)]},m(l,d){b(l,t,d),h(t,r),m&&m.m(r,null),h(r,n),h(r,a),h(r,s),h(r,o),A(o,e.email),h(t,i),h(t,c),u=!0},p(e,t){"Registera"===t.headerText?m?m.p(e,t):(m=be(t),m.c(),m.m(r,n)):m&&(m.d(1),m=null),e.email&&o.value!==t.email&&A(o,t.email)},i(e){u||(R(()=>{d||(d=te(t,ce,{},!0)),d.run(1)}),u=!0)},o(e){d||(d=te(t,ce,{},!1)),d.run(0),u=!1},d(e){e&&v(t),m&&m.d(),e&&d&&d.end(),l(p)}}}function he(e){let t,r,n,a,s,o,i,c,d,u,p,m,f;return{c(){t=C("form"),r=C("div"),n=C("label"),n.textContent="Verifikation kod",a=y(),s=C("input"),o=y(),i=C("small"),c=$(e.feedbackInformation),d=y(),u=C("button"),u.textContent="Vidare",_(n,"for","verficationCode"),_(s,"autocomplete","off"),_(s,"type","text"),_(s,"class","form-control"),_(s,"id","verficationCode"),_(s,"aria-describedby","emailHelp"),_(s,"placeholder","Skriv in verifikations kod"),_(i,"id","emailHelp"),_(i,"class","form-text text-muted"),_(r,"class","form-group"),_(u,"type","submit"),_(u,"class","btn btn-primary"),f=[O(s,"input",e.input_input_handler),O(t,"submit",e.verifyWithCode)]},m(l,p){b(l,t,p),h(t,r),h(r,n),h(r,a),h(r,s),A(s,e.verificationCode),h(r,o),h(r,i),h(i,c),h(t,d),h(t,u),m=!0},p(e,t){e.verificationCode&&s.value!==t.verificationCode&&A(s,t.verificationCode),m&&!e.feedbackInformation||w(c,t.feedbackInformation)},i(e){m||(R(()=>{p||(p=te(t,ce,{},!0)),p.run(1)}),m=!0)},o(e){p||(p=te(t,ce,{},!1)),p.run(0),m=!1},d(e){e&&v(t),e&&p&&p.end(),l(f)}}}function be(e){let t,r,n,l,a;return{c(){t=C("div"),r=C("label"),r.textContent="Name",n=y(),l=C("input"),_(r,"for","exampleInputPassword1"),_(l,"type","text"),_(l,"class","form-control"),_(l,"id","nameInput"),_(l,"placeholder","Ditt name"),_(t,"class","form-group"),a=O(l,"input",e.input_input_handler_1)},m(a,s){b(a,t,s),h(t,r),h(t,n),h(t,l),A(l,e.name)},p(e,t){e.name&&l.value!==t.name&&A(l,t.name)},d(e){e&&v(t),a()}}}function ve(e){let t;return{c(){t=C("div"),t.innerHTML='<span class="sr-only">Loading...</span>',_(t,"class","spinner-border text-primary svelte-1r1bdcq"),_(t,"role","status")},m(e,r){b(e,t,r)},d(e){e&&v(t)}}}function xe(e){let t,r,n,l,a,s,i,c,d,u,p,m,f,g,x,k,O,A,V=e.error&&fe(e);const U=[he,ge],D=[];function T(e,t){return t.verify?0:1}c=T(0,e),d=D[c]=U[c](e);let N=e.loading&&ve();return{c(){t=C("main"),V&&V.c(),r=y(),n=C("div"),l=C("header"),a=C("h1"),s=$(e.headerText),i=y(),d.c(),u=y(),p=C("div"),N&&N.c(),m=y(),f=C("div"),g=C("div"),x=$(e.progress),_(g,"class","progress-bar"),_(g,"role","progressbar"),_(g,"style",k="width:"+e.progress),_(g,"aria-valuenow","25"),_(g,"aria-valuemin","0"),_(g,"aria-valuemax","100"),_(f,"class","progress svelte-1r1bdcq"),_(p,"id","progressContainer"),_(p,"class","svelte-1r1bdcq"),_(n,"id","login"),_(n,"class","svelte-1r1bdcq"),_(t,"class",O=o("100%"===e.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq")},m(e,o){b(e,t,o),V&&V.m(t,null),h(t,r),h(t,n),h(n,l),h(l,a),h(a,s),h(n,i),D[c].m(n,null),h(n,u),h(n,p),N&&N.m(p,null),h(p,m),h(p,f),h(f,g),h(g,x),A=!0},p(e,l){l.error?V?(V.p(e,l),X(V,1)):(V=fe(l),V.c(),X(V,1),V.m(t,r)):V&&(z(),Z(V,1,1,()=>{V=null}),Y()),A&&!e.headerText||w(s,l.headerText);let a=c;c=T(0,l),c===a?D[c].p(e,l):(z(),Z(D[a],1,1,()=>{D[a]=null}),Y(),d=D[c],d||(d=D[c]=U[c](l),d.c()),X(d,1),d.m(n,u)),l.loading?N||(N=ve(),N.c(),N.m(p,m)):N&&(N.d(1),N=null),A&&!e.progress||w(x,l.progress),(!A||e.progress&&k!==(k="width:"+l.progress))&&_(g,"style",k),(!A||e.progress&&O!==(O=o("100%"===l.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq"))&&_(t,"class",O)},i(e){A||(X(V),X(d),A=!0)},o(e){Z(V),Z(d),A=!1},d(e){e&&v(t),V&&V.d(),D[c].d(),N&&N.d()}}}function Ce(e,t,r){let n,l,a,s,{apiCall:o}=t,i=!1,c="Logga in/Registera",d=!1,u="0%",p="",m=!1,f="";return e.$set=e=>{"apiCall"in e&&r("apiCall",o=e.apiCall)},{apiCall:o,email:n,name:l,headerText:c,verify:d,verificationCode:a,loading:s,progress:u,alertText:p,error:m,feedbackInformation:f,login:async function(e){if(e.preventDefault(),console.log(i),i)!async function(e){e.preventDefault();try{r("loading",s=!0);const e=await o("/registerUser",JSON.stringify({name:l,email:n}));if(r("loading",s=!1),e.error){if("AccountExists"==e.message)r("error",m=!0),r("alertText",p="Konto med den epost adressen finns redan")}else r("progress",u="66%"),r("verify",d=!0),r("headerText",c="Verifiera konto"),r("feedbackInformation",f="Ett mail har skickats med verifikations koden till "+n)}catch(e){console.log(e)}}(e);else try{r("loading",s=!0);const e=await o("/login",JSON.stringify({email:n}));e.error?"NoAccount"===e.message&&(r("progress",u="33%"),i=!0,r("loading",s=!1),r("headerText",c="Registera")):(r("loading",s=!1),console.log("Login no error"),r("headerText",c="Verifiera inloggning"),r("progress",u="50%"),r("feedbackInformation",f="Ett mail har skickats med verifikations koden till "+n),r("verify",d=!0))}catch(e){console.log(e)}},verifyWithCode:async function(e){try{console.log("code"),e.preventDefault();const t=await o("/verifyWithCode",JSON.stringify({verificationCode:a}));console.log("CALL: ",t),t.error?"WrongCode"===t.message?(r("error",m=!0),r("alertText",p="Fel verifikations kod, försök igen")):"NoToken"==t.message?(alert("Verifikations sessionen har gått ut, sidan kommer laddas om"),location.reload()):"TooManyWrongs"==t.message&&(alert("Du har skrivit in fel kod för många gånger, sidan kommer laddas om och du får logga in på nytt"),location.reload()):(console.log(t),me.set({user:t.user}),t.user.admin?pe.set("orders"):pe.set("makeOrder"))}catch(e){console.log(e)}},input_input_handler:function(){a=this.value,r("verificationCode",a)},input_input_handler_1:function(){l=this.value,r("name",l)},input_input_handler_2:function(){n=this.value,r("email",n)}}}class $e extends oe{constructor(e){super(),se(this,e,Ce,xe,s,{apiCall:0})}}function ye(e){let t,r=e.files[e.index].name+"";return{c(){t=$(r)},m(e,r){b(e,t,r)},p(e,n){(e.files||e.index)&&r!==(r=n.files[n.index].name+"")&&w(t,r)},d(e){e&&v(t)}}}function ke(t){let r;return{c(){r=$("Välj fil")},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r)}}}function Oe(e){let t,r,n,a,s,o,i,c,d,u,p,m,f,g,x;function $(e,t){return void 0===t.files[t.index]?ke:ye}let k=$(0,e),w=k(e);return{c(){t=C("div"),r=C("div"),n=C("div"),a=C("input"),o=y(),i=C("label"),w.c(),c=y(),d=C("div"),u=C("input"),p=y(),m=C("button"),m.innerHTML='<span aria-hidden="true">×</span>',_(a,"type","file"),_(a,"class","custom-file-input"),_(a,"id",e.index),_(a,"aria-describedby","inputGroupFileAddon01"),a.multiple=s=!1,_(i,"class","custom-file-label text-truncate"),_(i,"data-browse","Ladda upp"),_(i,"for",e.index),_(n,"class","col-4"),_(u,"type","text"),_(u,"class","form-control"),_(u,"placeholder","Fil information"),_(d,"class","col-7"),_(m,"type","button"),_(m,"class","close"),_(m,"data-dismiss","modal"),_(m,"aria-label","Close"),_(r,"class","form-row"),_(t,"class","form-group"),x=[O(a,"change",e.change_handler),O(u,"input",e.input1_input_handler),O(m,"click",e.deleteFile)]},m(l,s){b(l,t,s),h(t,r),h(r,n),h(n,a),h(n,o),h(n,i),w.m(i,null),h(r,c),h(r,d),h(d,u),A(u,e.descriptions[e.index]),h(r,p),h(r,m),g=!0},p(e,t){g&&!e.index||_(a,"id",t.index),k===(k=$(0,t))&&w?w.p(e,t):(w.d(1),w=k(t),w&&(w.c(),w.m(i,null))),g&&!e.index||_(i,"for",t.index),(e.descriptions||e.index)&&u.value!==t.descriptions[t.index]&&A(u,t.descriptions[t.index])},i(e){g||(R(()=>{f||(f=te(t,ce,{},!0)),f.run(1)}),g=!0)},o(e){f||(f=te(t,ce,{},!1)),f.run(0),g=!1},d(e){e&&v(t),w.d(),e&&f&&f.end(),l(x)}}}function _e(e,t,r){let{files:n}=t,{descriptions:l}=t,{index:a}=t,{deleteFileInput:s}=t;console.log(n);return e.$set=e=>{"files"in e&&r("files",n=e.files),"descriptions"in e&&r("descriptions",l=e.descriptions),"index"in e&&r("index",a=e.index),"deleteFileInput"in e&&r("deleteFileInput",s=e.deleteFileInput)},{files:n,descriptions:l,index:a,deleteFileInput:s,deleteFile:function(){s(a)},change_handler:e=>r("files",n[a]=e.currentTarget.files[0],n),input1_input_handler:function(){l[a]=this.value,r("descriptions",l),r("index",a)}}}class we extends oe{constructor(e){super(),se(this,e,_e,Oe,s,{files:0,descriptions:0,index:0,deleteFileInput:0})}}function Ae(t){let r,n,a,s,o,i,c,d,u,p,m,f,g,x,k;return{c(){r=C("nav"),n=C("span"),n.textContent="Användare",a=y(),s=C("div"),o=C("div"),i=C("a"),c=$("Gör en beställning"),u=y(),p=C("a"),m=$("Mina beställningar"),g=y(),x=C("a"),x.textContent="Logga ut",_(n,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        "),_(x,"class","nav-item nav-link"),_(x,"href","#"),_(o,"class","navbar-nav"),_(s,"class"," navbar"),_(s,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),k=[O(i,"click",t.click_handler),O(p,"click",t.click_handler_1),O(x,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,n),h(r,a),h(r,s),h(s,o),h(o,i),h(i,c),h(o,u),h(o,p),h(p,m),h(o,g),h(o,x)},p(e,t){e.urlValue&&d!==(d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":""))&&_(i,"class",d),e.urlValue&&f!==(f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&v(r),l(k)}}}function Ve(e,t){e&&e.preventDefault(),pe.set(t)}function Ue(e,t,r){let n,{apiCall:l}=t;pe.subscribe(e=>r("urlValue",n=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall)},{apiCall:l,urlValue:n,logOut:async function(e){try{e&&e.preventDefault(),(await l("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>Ve(e,"makeOrder"),click_handler_1:e=>Ve(e,"myOrders")}}class De extends oe{constructor(e){super(),se(this,e,Ue,Ae,s,{apiCall:0})}}function Te(e,t,r){const n=Object.create(e);return n.desc=t[r],n.i=r,n}function Ne(r){let n,l,s,o;return{c(){n=C("div"),l=$(r.alertText),_(n,"class",s="alert "+(r.error?"alert-danger":"alert-success")+"\r\n        "),_(n,"role","alert")},m(e,t){b(e,n,t),h(n,l)},p(e,t){e.alertText&&w(l,t.alertText),e.error&&s!==(s="alert "+(t.error?"alert-danger":"alert-success")+"\r\n        ")&&_(n,"class",s)},i(r){o||R(()=>{o=function(r,n,l){let s,o,i=n(r,l),d=!1,u=0;function p(){s&&L(r,s)}function m(){const{delay:n=0,duration:l=300,easing:a=t,tick:m=e,css:f}=i||ee;f&&(s=F(r,0,1,l,n,a,f,u++)),m(0,1);const h=c()+n,b=h+l;o&&o.abort(),d=!0,R(()=>J(r,!0,"start")),o=g(e=>{if(d){if(e>=b)return m(1,0),J(r,!0,"end"),p(),d=!1;if(e>=h){const t=a((e-h)/l);m(t,1-t)}}return d})}let f=!1;return{start(){f||(L(r),a(i)?(i=i(),K().then(m)):m())},invalidate(){f=!1},end(){d&&(p(),d=!1)}}}(n,ce,{}),o.start()})},o:e,d(e){e&&v(n)}}}function Fe(e){let t;const r=new we({props:{deleteFileInput:e.deleteFileInput,index:e.i,files:e.files,descriptions:e.fileDescriptions}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.files&&(n.files=t.files),e.fileDescriptions&&(n.descriptions=t.fileDescriptions),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function Le(e){let t,r,n,a,s,o,i,c,d,u,p,m,f,g,$,k,w,V,U,D,T,N,F,L,S,E,j,I,B,M,H;const P=new De({props:{apiCall:e.apiCall}});let R=(e.error||e.success)&&Ne(e),q=e.fileDescriptions,Q=[];for(let t=0;t<q.length;t+=1)Q[t]=Fe(Te(e,q,t));const K=e=>Z(Q[e],1,1,()=>{Q[e]=null});return{c(){t=C("header"),re(P.$$.fragment),r=y(),n=C("div"),a=C("main"),R&&R.c(),s=y(),o=C("form"),i=C("div"),c=C("div"),d=C("div"),d.innerHTML='<label for="productName">Projektnamn</label> \n            <input type="text" class="form-control" id="productName" name="productName" aria-describedby="emailHelp" placeholder="Projektnamn">',u=y(),p=C("div"),m=C("label"),m.textContent="Beställare",f=y(),g=C("input"),$=y(),k=C("div"),k.innerHTML='<h3>Typ av uppdrag</h3> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkning" name="production"> \n            <label class="form-check-label" for="tillverkning">\n              Tillverkning\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkningsunderlag" name="productionDocumentation"> \n            <label class="form-check-label" for="tillverkningsunderlag">\n              Tillverkningsunderlag\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="beräkning" name="calculation"> \n            <label class="form-check-label" for="beräkning">Beräkning</label></div>',w=y(),V=C("div"),V.innerHTML='<h3>Beskrivning av produkt</h3> \n          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="productDescription"></textarea>',U=y(),D=C("div"),D.innerHTML='<h3>Önskemål</h3> \n          <textarea class="form-control" id="productDescripion" name="wishes" rows="3"></textarea>',T=y(),N=C("h3"),N.textContent="Filer",F=y();for(let e=0;e<Q.length;e+=1)Q[e].c();L=y(),S=C("button"),S.textContent="Lägg till fil",E=y(),j=C("hr"),I=y(),B=C("button"),B.textContent="Gör beställning",_(d,"class","col"),_(m,"for","customer"),_(g,"name","customer"),_(g,"type","text"),_(g,"id","customer"),_(g,"class","form-control"),_(g,"placeholder","Beställare"),_(p,"class","col"),_(c,"class","form-row"),_(k,"class","form-group mt-3"),_(V,"class","form-group"),_(D,"class","form-group"),_(S,"class","btn btn-primary"),_(j,"class","my-4"),_(B,"type","submit"),_(B,"class","btn btn-success btn-lg"),_(i,"class","form-group"),_(o,"class","svelte-1lxf9ux"),_(a,"class","svelte-1lxf9ux"),_(n,"class","container-fluid"),H=[O(g,"input",e.input1_input_handler),O(S,"click",e.addFile),O(o,"submit",e.submitForm)]},m(l,v){b(l,t,v),ne(P,t,null),b(l,r,v),b(l,n,v),h(n,a),R&&R.m(a,null),h(a,s),h(a,o),h(o,i),h(i,c),h(c,d),h(c,u),h(c,p),h(p,m),h(p,f),h(p,g),A(g,e.user.name),h(i,$),h(i,k),h(i,w),h(i,V),h(i,U),h(i,D),h(i,T),h(i,N),h(i,F);for(let e=0;e<Q.length;e+=1)Q[e].m(i,null);h(i,L),h(i,S),h(i,E),h(i,j),h(i,I),h(i,B),M=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),P.$set(r),t.error||t.success?R?(R.p(e,t),X(R,1)):(R=Ne(t),R.c(),X(R,1),R.m(a,s)):R&&(R.d(1),R=null),e.user&&g.value!==t.user.name&&A(g,t.user.name),e.deleteFileInput||e.files||e.fileDescriptions){let r;for(q=t.fileDescriptions,r=0;r<q.length;r+=1){const n=Te(t,q,r);Q[r]?(Q[r].p(e,n),X(Q[r],1)):(Q[r]=Fe(n),Q[r].c(),X(Q[r],1),Q[r].m(i,L))}for(z(),r=q.length;r<Q.length;r+=1)K(r);Y()}},i(e){if(!M){X(P.$$.fragment,e),X(R);for(let e=0;e<q.length;e+=1)X(Q[e]);M=!0}},o(e){Z(P.$$.fragment,e),Q=Q.filter(Boolean);for(let e=0;e<Q.length;e+=1)Z(Q[e]);M=!1},d(e){e&&v(t),le(P),e&&v(r),e&&v(n),R&&R.d(),x(Q,e),l(H)}}}function Se(e,t,r){let{apiCall:n}=t,{user:l}=t,a=[],s=[],o=!1,i=!1,c="";return async function(){l||r("user",l=await n("/checkAccount"))}(),e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall),"user"in e&&r("user",l=e.user)},{apiCall:n,user:l,files:a,fileDescriptions:s,success:o,error:i,alertText:c,addFile:function(e){e.preventDefault(),console.log("add file"),r("fileDescriptions",s=[...s,""]),console.log(s),console.log(a)},submitForm:async function(e){e.preventDefault();const t=e.currentTarget;console.log("form",t);const d=new FormData(t);a.map(e=>d.append("files",e)),d.append("fileDescriptions",s);for(let[e,t]of d.entries())console.log(e,t);(await n("/makeOrder",d,"multipart/form-data")).error?(r("error",i=!0),r("alertText",c="Kunde inte skapa beställning, försök igen senare")):(r("success",o=!0),r("alertText",c="Beställning skapad"),t.reset(),r("user",l),r("files",a=[]),r("fileDescriptions",s=[]))},deleteFileInput:function(e){console.log("fileDesc1",s),r("files",a=a.filter((t,r)=>r!==e)),r("fileDescriptions",s=s.filter((t,r)=>r!==e)),console.log("fileDesc",s)},input1_input_handler:function(){l.name=this.value,r("user",l)}}}class Ee extends oe{constructor(e){super(),se(this,e,Se,Le,s,{apiCall:0,user:0})}}function je(e,t,r){const n=Object.create(e);return n.file=t[r],n}function Ie(e){let t,r,n,l,a,s,o,i=e.file.originalName+"",c=e.file.description+"";return{c(){t=C("li"),r=C("a"),n=$(i),a=y(),s=C("li"),o=$(c),_(r,"href",l=e.file.url),_(t,"class","list-group-item"),V(t,"border","none"),_(s,"class","list-group-item")},m(e,l){b(e,t,l),h(t,r),h(r,n),b(e,a,l),b(e,s,l),h(s,o)},p(e,t){e.order&&i!==(i=t.file.originalName+"")&&w(n,i),e.order&&l!==(l=t.file.url)&&_(r,"href",l),e.order&&c!==(c=t.file.description+"")&&w(o,c)},d(e){e&&v(t),e&&v(a),e&&v(s)}}}function Be(e){let t,r,n,a,s,o,i,c,d,u,p,m,f,g,k,V,D,T,N,F,L,S,E,j,I,B,M,H,P,q,Q,K,J,W,G,z,Y,X,Z,ee,re,ne,le,ae,se,oe,ie,de,ue,pe,me,fe,ge,he,be,ve,xe,Ce,$e,ye,ke,Oe,_e,we,Ae,Ve,Ue,De,Te,Ne,Fe,Le,Se,Ee,Be,Me,He,Pe,Re,qe,Qe,Ke,Je,We,Ge,ze,Ye,Xe,Ze,et,tt,rt,nt,lt,at,st,ot,it,ct,dt,ut,pt,mt,ft,gt,ht,bt=e.order.productNumber+"",vt=e.order.productName+"",xt=new Date(e.order.date).toDateString()+"",Ct=e.order.customer.name+"",$t=e.order.customer.email+"",yt=e.order.productDescription+"",kt=e.order.wishes+"",Ot=e.order.files,_t=[];for(let t=0;t<Ot.length;t+=1)_t[t]=Ie(je(e,Ot,t));return{c(){t=C("div"),r=C("div"),n=C("div"),a=C("div"),s=C("div"),s.textContent="Orderdetaljer",o=y(),i=C("ul"),c=C("li"),d=$("Ordernummer: "),u=$(bt),p=y(),m=C("li"),f=$("Namn: "),g=$(vt),k=y(),V=C("li"),D=$("Datum: "),T=$(xt),N=y(),F=C("li"),L=C("div"),S=C("input"),j=y(),I=C("label"),I.textContent="Tillverkning",B=y(),M=C("li"),H=C("div"),P=C("input"),Q=y(),K=C("label"),K.textContent="Tillverkningsunderlag",J=y(),W=C("li"),G=C("div"),z=C("input"),X=y(),Z=C("label"),Z.textContent="Beräkning",ee=y(),re=C("div"),ne=C("div"),le=C("div"),le.textContent="Beställare",ae=y(),se=C("ul"),oe=C("li"),ie=$("Namn: "),de=$(Ct),ue=y(),pe=C("li"),me=$("Email:\r\n            "),fe=C("a"),ge=$($t),be=y(),ve=C("div"),xe=C("div"),Ce=C("div"),Ce.textContent="Ansvarig",$e=y(),ye=C("ul"),ke=C("li"),Oe=$("Namn:\r\n            "),_e=C("input"),we=y(),Ae=C("li"),Ve=$("Email:\r\n            "),Ue=C("input"),De=y(),Te=C("li"),Ne=$("Status:\r\n            "),Fe=C("select"),Le=C("option"),Le.textContent="Ej påbörjad",Se=C("option"),Se.textContent="Påbörjad",Ee=C("option"),Ee.textContent="Avslutad",Be=y(),Me=C("div"),He=C("div"),Pe=C("div"),Pe.textContent="Produkt beskrivning",Re=y(),qe=C("div"),Qe=$(yt),Ke=y(),Je=C("div"),We=C("div"),Ge=C("div"),Ge.textContent="Önskemål",ze=y(),Ye=C("div"),Xe=$(kt),Ze=y(),et=C("div"),tt=C("div"),rt=C("div"),rt.textContent="Filer",nt=y(),lt=C("ul");for(let e=0;e<_t.length;e+=1)_t[e].c();at=y(),st=C("div"),ot=C("div"),it=C("button"),it.textContent="Radera beställningar",ct=y(),dt=C("div"),ut=y(),pt=C("div"),mt=C("button"),mt.textContent="Spara ändringar",_(s,"class","card-header"),_(c,"class","list-group-item"),_(m,"class","list-group-item"),_(V,"class","list-group-item"),_(S,"type","checkbox"),_(S,"class","custom-control-input"),S.checked=E=e.order.missionType.production,S.disabled=!0,_(I,"class","custom-control-label"),_(L,"class","custom-control custom-checkbox"),_(F,"class","list-group-item"),_(P,"type","checkbox"),_(P,"class","custom-control-input"),P.checked=q=e.order.missionType.productionDocumentation,P.disabled=!0,_(K,"class","custom-control-label"),_(H,"class","custom-control custom-checkbox"),_(M,"class","list-group-item"),_(z,"type","checkbox"),_(z,"class","custom-control-input"),z.checked=Y=e.order.missionType.calculation,z.disabled=!0,_(Z,"class","custom-control-label"),_(G,"class","custom-control custom-checkbox"),_(W,"class","list-group-item"),_(i,"class","list-group list-group-flush"),_(a,"class","card h-100"),_(n,"class","col mb-4"),_(le,"class","card-header"),_(oe,"class","list-group-item"),_(fe,"href",he="mailto:"+e.order.customer.email),_(pe,"class","list-group-item"),_(se,"class","list-group list-group-flush"),_(ne,"class","card h-100"),_(re,"class","col mb-4 "),_(Ce,"class","card-header"),_(_e,"type","text"),_(_e,"class","form-control "),_(ke,"class","list-group-item"),_(Ue,"type","email"),_(Ue,"class","form-control"),_(Ue,"aria-describedby","emailHelp"),_(Ae,"class","list-group-item"),Le.__value="Ej Påbörjad",Le.value=Le.__value,Se.__value="Påbörjad",Se.value=Se.__value,Ee.__value="Avslutad",Ee.value=Ee.__value,_(Fe,"class","form-control"),_(Fe,"id","exampleFormControlSelect2"),void 0===e.order.status&&R(()=>e.select_change_handler.call(Fe)),_(Te,"class","list-group-item"),_(ye,"class","list-group list-group-flush"),_(xe,"class","card h-100"),_(ve,"class","col mb-4"),_(Pe,"class","card-header"),_(qe,"class","card-body"),_(He,"class","card h-100"),_(Me,"class","col mb-4"),_(Ge,"class","card-header"),_(Ye,"class","card-body"),_(We,"class","card h-100"),_(Je,"class","col mb-4"),_(rt,"class","card-header"),_(lt,"class","list-group list-group-flush"),_(tt,"class","card h-100"),_(et,"class","col mb-4"),_(r,"class","row row-cols-1 row-cols-md-2 row-cols-lg-3"),_(it,"class","btn btn-lg btn-danger"),_(ot,"class","col "),_(dt,"class","col"),_(mt,"class","btn btn-lg btn-success"),_(pt,"class","col "),_(st,"class","row"),_(t,"class","container-fluid text-left"),ht=[O(_e,"input",e.input3_input_handler),O(Ue,"input",e.input4_input_handler),O(Fe,"change",e.select_change_handler),O(it,"click",e.click_handler),O(mt,"click",e.saveChanges)]},m(l,v){b(l,t,v),h(t,r),h(r,n),h(n,a),h(a,s),h(a,o),h(a,i),h(i,c),h(c,d),h(c,u),h(i,p),h(i,m),h(m,f),h(m,g),h(i,k),h(i,V),h(V,D),h(V,T),h(i,N),h(i,F),h(F,L),h(L,S),h(L,j),h(L,I),h(i,B),h(i,M),h(M,H),h(H,P),h(H,Q),h(H,K),h(i,J),h(i,W),h(W,G),h(G,z),h(G,X),h(G,Z),h(r,ee),h(r,re),h(re,ne),h(ne,le),h(ne,ae),h(ne,se),h(se,oe),h(oe,ie),h(oe,de),h(se,ue),h(se,pe),h(pe,me),h(pe,fe),h(fe,ge),h(r,be),h(r,ve),h(ve,xe),h(xe,Ce),h(xe,$e),h(xe,ye),h(ye,ke),h(ke,Oe),h(ke,_e),A(_e,e.order.responsible.name),h(ye,we),h(ye,Ae),h(Ae,Ve),h(Ae,Ue),A(Ue,e.order.responsible.email),h(ye,De),h(ye,Te),h(Te,Ne),h(Te,Fe),h(Fe,Le),h(Fe,Se),h(Fe,Ee),U(Fe,e.order.status),h(r,Be),h(r,Me),h(Me,He),h(He,Pe),h(He,Re),h(He,qe),h(qe,Qe),h(r,Ke),h(r,Je),h(Je,We),h(We,Ge),h(We,ze),h(We,Ye),h(Ye,Xe),h(r,Ze),h(r,et),h(et,tt),h(tt,rt),h(tt,nt),h(tt,lt);for(let e=0;e<_t.length;e+=1)_t[e].m(lt,null);h(t,at),h(t,st),h(st,ot),h(ot,it),h(st,ct),h(st,dt),h(st,ut),h(st,pt),h(pt,mt),gt=!0},p(e,t){if(gt&&!e.order||bt===(bt=t.order.productNumber+"")||w(u,bt),gt&&!e.order||vt===(vt=t.order.productName+"")||w(g,vt),gt&&!e.order||xt===(xt=new Date(t.order.date).toDateString()+"")||w(T,xt),(!gt||e.order&&E!==(E=t.order.missionType.production))&&(S.checked=E),(!gt||e.order&&q!==(q=t.order.missionType.productionDocumentation))&&(P.checked=q),(!gt||e.order&&Y!==(Y=t.order.missionType.calculation))&&(z.checked=Y),gt&&!e.order||Ct===(Ct=t.order.customer.name+"")||w(de,Ct),gt&&!e.order||$t===($t=t.order.customer.email+"")||w(ge,$t),(!gt||e.order&&he!==(he="mailto:"+t.order.customer.email))&&_(fe,"href",he),e.order&&_e.value!==t.order.responsible.name&&A(_e,t.order.responsible.name),e.order&&Ue.value!==t.order.responsible.email&&A(Ue,t.order.responsible.email),e.order&&U(Fe,t.order.status),gt&&!e.order||yt===(yt=t.order.productDescription+"")||w(Qe,yt),gt&&!e.order||kt===(kt=t.order.wishes+"")||w(Xe,kt),e.order){let r;for(Ot=t.order.files,r=0;r<Ot.length;r+=1){const n=je(t,Ot,r);_t[r]?_t[r].p(e,n):(_t[r]=Ie(n),_t[r].c(),_t[r].m(lt,null))}for(;r<_t.length;r+=1)_t[r].d(1);_t.length=Ot.length}},i(e){gt||(R(()=>{ft||(ft=te(t,ce,{},!0)),ft.run(1)}),gt=!0)},o(e){ft||(ft=te(t,ce,{},!1)),ft.run(0),gt=!1},d(e){e&&v(t),x(_t,e),e&&ft&&ft.end(),l(ht)}}}function Me(e,t,r){let{order:n}=t,{toggleExpand:l}=t,{deleteOrder:a}=t,{apiCall:s}=t;return e.$set=e=>{"order"in e&&r("order",n=e.order),"toggleExpand"in e&&r("toggleExpand",l=e.toggleExpand),"deleteOrder"in e&&r("deleteOrder",a=e.deleteOrder),"apiCall"in e&&r("apiCall",s=e.apiCall)},{order:n,toggleExpand:l,deleteOrder:a,apiCall:s,saveChanges:async function(){try{(await s("/updateOrder",JSON.stringify({id:n._id,email:n.responsible.email,name:n.responsible.name}))).error?alert("Ett fel uppstod, försök igen"):pe.set("orders")}catch(e){console.log(e)}},input3_input_handler:function(){n.responsible.name=this.value,r("order",n)},input4_input_handler:function(){n.responsible.email=this.value,r("order",n)},select_change_handler:function(){n.status=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),r("order",n)},click_handler:()=>a(n._id)}}class He extends oe{constructor(e){super(),se(this,e,Me,Be,s,{order:0,toggleExpand:0,deleteOrder:0,apiCall:0})}}function Pe(t){let r,n,a,s,o,i,c,d,u,p,m,f,g,x,k,A,V,U,D,T,N,F,L,S,E,j=t.order.productNumber+"",I=t.order.productName+"",B=t.order.customer.name+"",M=t.order.responsible.name+"",H=t.order.status+"",P=new Date(t.order.date).toDateString()+"";return{c(){r=C("tr"),n=C("th"),a=$(j),s=y(),o=C("td"),i=$(I),c=y(),d=C("td"),u=$(B),p=y(),m=C("td"),f=$(M),g=y(),x=C("td"),k=$(H),A=y(),V=C("td"),U=$(P),D=y(),T=C("td"),N=C("button"),N.textContent="Visa mer",F=y(),L=C("td"),S=C("button"),S.textContent="Radera order",_(n,"class","align-middle"),_(n,"scope","row"),_(o,"class","align-middle"),_(d,"class","align-middle d-none d-sm-table-cell"),_(m,"class","align-middle d-none d-md-table-cell"),_(x,"class","align-middle"),_(V,"class","align-middle d-none d-md-table-cell"),_(N,"class","btn btn-secondary "),_(T,"class","align-middle d-none d-md-table-cell"),_(S,"class","btn btn-danger float-right"),_(L,"class","align-middle d-none d-md-table-cell"),_(r,"class","svelte-1n1kl2d"),E=[O(n,"click",t.expandOrder),O(o,"click",t.expandOrder),O(d,"click",t.expandOrder),O(m,"click",t.expandOrder),O(x,"click",t.expandOrder),O(V,"click",t.expandOrder),O(N,"click",t.expandOrder),O(S,"click",t.click_handler)]},m(e,l){b(e,r,l),h(r,n),h(n,a),h(r,s),h(r,o),h(o,i),h(r,c),h(r,d),h(d,u),h(r,p),h(r,m),h(m,f),h(r,g),h(r,x),h(x,k),h(r,A),h(r,V),h(V,U),h(r,D),h(r,T),h(T,N),h(r,F),h(r,L),h(L,S),t.tr_1_binding(r)},p(e,t){e.order&&j!==(j=t.order.productNumber+"")&&w(a,j),e.order&&I!==(I=t.order.productName+"")&&w(i,I),e.order&&B!==(B=t.order.customer.name+"")&&w(u,B),e.order&&M!==(M=t.order.responsible.name+"")&&w(f,M),e.order&&H!==(H=t.order.status+"")&&w(k,H),e.order&&P!==(P=new Date(t.order.date).toDateString()+"")&&w(U,P)},i:e,o:e,d(e){e&&v(r),t.tr_1_binding(null),l(E)}}}function Re(e){let t,r,n;const l=new He({props:{deleteOrder:e.deleteOrder,order:e.order,expandOrder:e.expandOrder,deleteOrder:e.deleteOrder}});return{c(){t=C("tr"),r=C("td"),re(l.$$.fragment),_(r,"id","expandedContent"),_(r,"colspan","7"),V(t,"cursor","initial"),_(t,"class","svelte-1n1kl2d")},m(e,a){b(e,t,a),h(t,r),ne(l,r,null),n=!0},p(e,t){const r={};e.deleteOrder&&(r.deleteOrder=t.deleteOrder),e.order&&(r.order=t.order),e.deleteOrder&&(r.deleteOrder=t.deleteOrder),l.$set(r)},i(e){n||(X(l.$$.fragment,e),n=!0)},o(e){Z(l.$$.fragment,e),n=!1},d(e){e&&v(t),le(l)}}}function qe(e){let t,r,n,l;const a=[Re,Pe],s=[];return t=1,r=s[1]=a[1](e),{c(){r.c(),n=k()},m(e,t){s[1].m(e,t),b(e,n,t),l=!0},p(e,t){r.p(e,t)},i(e){l||(X(r),l=!0)},o(e){Z(r),l=!1},d(e){s[1].d(e),e&&v(n)}}}function Qe(e,t,r){let n,{deleteOrder:l}=t,{order:a}=t,{apiCall:s}=t,{getAllOrders:o}=t;return e.$set=e=>{"deleteOrder"in e&&r("deleteOrder",l=e.deleteOrder),"order"in e&&r("order",a=e.order),"apiCall"in e&&r("apiCall",s=e.apiCall),"getAllOrders"in e&&r("getAllOrders",o=e.getAllOrders)},{tr:n,deleteOrder:l,order:a,apiCall:s,getAllOrders:o,expandOrder:function(){me.set({order:a}),pe.set("expandedOrder")},click_handler:()=>l(a._id),tr_1_binding:function(e){j[e?"unshift":"push"](()=>{r("tr",n=e)})}}}class Ke extends oe{constructor(e){super(),se(this,e,Qe,qe,s,{deleteOrder:0,order:0,apiCall:0,getAllOrders:0})}}function Je(t){let r,n,a,s,o,i,c,d,u,p,m,f,g,x,k,A,V,U=t.user.name+"";return{c(){r=C("nav"),n=C("span"),a=$("Inloggad som "),s=$(U),o=y(),i=C("div"),c=C("div"),d=C("a"),u=$("Beställningar"),m=y(),f=C("a"),g=$("Hantera användare"),k=y(),A=C("a"),A.textContent="Logga ut",_(n,"class","navbar-brand mb-0 h1"),_(d,"href","#"),_(d,"class",p="nav-item nav-link "+("orders"===t.urlValue?"active":"")),_(f,"href","#"),_(f,"class",x="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        "),_(A,"class","nav-item nav-link"),_(A,"href","#"),_(c,"class","navbar-nav"),_(i,"class"," navbar"),_(i,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),V=[O(d,"click",t.click_handler),O(f,"click",t.click_handler_1),O(A,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,n),h(n,a),h(n,s),h(r,o),h(r,i),h(i,c),h(c,d),h(d,u),h(c,m),h(c,f),h(f,g),h(c,k),h(c,A)},p(e,t){e.user&&U!==(U=t.user.name+"")&&w(s,U),e.urlValue&&p!==(p="nav-item nav-link "+("orders"===t.urlValue?"active":""))&&_(d,"class",p),e.urlValue&&x!==(x="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        ")&&_(f,"class",x)},i:e,o:e,d(e){e&&v(r),l(V)}}}function We(e,t){e&&e.preventDefault(),pe.set(t)}function Ge(e,t,r){let n,{apiCall:l}=t,{user:a}=t;pe.subscribe(e=>r("urlValue",n=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall),"user"in e&&r("user",a=e.user)},{apiCall:l,user:a,urlValue:n,logOut:async function(e){try{e&&e.preventDefault(),(await l("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>We(e,"orders"),click_handler_1:e=>We(e,"manageUsers")}}class ze extends oe{constructor(e){super(),se(this,e,Ge,Je,s,{apiCall:0,user:0})}}function Ye(e,t,r){const n=Object.create(e);return n.order=t[r],n}function Xe(e){let t;const r=new Ke({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,order:e.order,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.apiCall&&(n.apiCall=t.apiCall),e.getAllOrders&&(n.getAllOrders=t.getAllOrders),e.showOrders&&(n.order=t.order),e.deleteOrder&&(n.deleteOrder=t.deleteOrder),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function Ze(e){let t,r,n,a,s,o,i,c,d,u,p,m,f,g,k,w,V,U,D,T,N,F,L,S,E,j,I,B,M,H,P,R,q,Q=e.showOrders,K=[];for(let t=0;t<Q.length;t+=1)K[t]=Xe(Ye(e,Q,t));const J=e=>Z(K[e],1,1,()=>{K[e]=null});return{c(){t=C("div"),r=C("div"),n=C("h2"),a=$("Alla beställningar\r\n      "),s=C("img"),i=y(),c=C("table"),d=C("caption"),d.textContent="Klicka på en beställning för mer information",u=y(),p=C("thead"),m=C("tr"),f=C("th"),f.textContent="#",g=y(),k=C("th"),k.textContent="Namn",w=y(),V=C("th"),V.textContent="Beställare",U=y(),D=C("th"),D.textContent="Ansvarig",T=y(),N=C("th"),N.textContent="Status",F=y(),L=C("th"),L.textContent="Datum",S=y(),E=C("th"),j=C("form"),I=C("input"),B=y(),M=C("button"),M.textContent="Sök",H=y(),P=C("tbody");for(let e=0;e<K.length;e+=1)K[e].c();s.src!==(o="refresh.png")&&_(s,"src","refresh.png"),_(s,"id","refresh"),_(s,"alt","refresh"),_(s,"class","svelte-1ivz25g"),_(r,"class","card-header"),_(f,"scope","col"),_(k,"scope","col"),_(V,"scope","col "),_(V,"class","d-none d-sm-table-cell"),_(D,"scope","col "),_(D,"class","d-none d-md-table-cell"),_(N,"scope","col"),_(L,"scope","col "),_(L,"class","d-none d-md-table-cell"),_(I,"class","form-control mr-sm-2 "),_(I,"type","search"),_(I,"placeholder","Sök"),_(I,"aria-label","Sök"),_(M,"class","btn btn-success bg my-2 my-sm-0"),_(M,"type","submit"),_(j,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(E,"scope","col"),_(E,"colspan","2"),_(p,"class","thead-dark"),_(c,"class","table table-striped table-hover table-bordered "),_(t,"class","card m-sm-4 m-2 text-center"),q=[O(s,"click",e.getAllOrders),O(I,"input",e.input_input_handler),O(j,"submit",e.filter)]},m(l,o){b(l,t,o),h(t,r),h(r,n),h(n,a),h(n,s),h(t,i),h(t,c),h(c,d),h(c,u),h(c,p),h(p,m),h(m,f),h(m,g),h(m,k),h(m,w),h(m,V),h(m,U),h(m,D),h(m,T),h(m,N),h(m,F),h(m,L),h(m,S),h(m,E),h(E,j),h(j,I),A(I,e.searchQuery),h(j,B),h(j,M),h(c,H),h(c,P);for(let e=0;e<K.length;e+=1)K[e].m(P,null);R=!0},p(e,t){if(e.searchQuery&&A(I,t.searchQuery),e.apiCall||e.getAllOrders||e.showOrders||e.deleteOrder){let r;for(Q=t.showOrders,r=0;r<Q.length;r+=1){const n=Ye(t,Q,r);K[r]?(K[r].p(e,n),X(K[r],1)):(K[r]=Xe(n),K[r].c(),X(K[r],1),K[r].m(P,null))}for(z(),r=Q.length;r<K.length;r+=1)J(r);Y()}},i(e){if(!R){for(let e=0;e<Q.length;e+=1)X(K[e]);R=!0}},o(e){K=K.filter(Boolean);for(let e=0;e<K.length;e+=1)Z(K[e]);R=!1},d(e){e&&v(t),x(K,e),l(q)}}}function et(e,t,r){let n,{apiCall:l}=t,{getAllOrders:a}=t,{deleteOrder:s}=t,o="",{allOrders:i=[]}=t;function c(e){return e.toLowerCase().search(o.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall),"getAllOrders"in e&&r("getAllOrders",a=e.getAllOrders),"deleteOrder"in e&&r("deleteOrder",s=e.deleteOrder),"allOrders"in e&&r("allOrders",i=e.allOrders)},e.$$.update=(e={allOrders:1})=>{e.allOrders&&r("showOrders",n=i)},{apiCall:l,getAllOrders:a,deleteOrder:s,searchQuery:o,allOrders:i,filter:function(e){e&&e.preventDefault(),r("showOrders",n=i.filter(e=>e.productNumber==o||c(e.productName)||c(e.responsible.name)||c(e.responsible.email)||c(e.customer.name)||c(e.customer.email)||c(e.status)))},showOrders:n,input_input_handler:function(){o=this.value,r("searchQuery",o)}}}class tt extends oe{constructor(e){super(),se(this,e,et,Ze,s,{apiCall:0,getAllOrders:0,deleteOrder:0,allOrders:0})}}function rt(t){let r,n;return{c(){r=C("button"),r.textContent="Gör admin",_(r,"type","button"),_(r,"class","btn btn-warning"),n=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),n()}}}function nt(t){let r,n;return{c(){r=C("button"),r.textContent="Ta bort admin",_(r,"type","button"),_(r,"class","btn btn-warning"),n=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),n()}}}function lt(t){let r,n,l,a,s,o,i,c,d,u,p,m,f=t.user.name+"",g=t.user.email+"";function x(e,t){return t.user.admin?nt:rt}let k=x(0,t),A=k(t);return{c(){r=C("tr"),n=C("td"),l=$(f),a=y(),s=C("td"),o=$(g),i=y(),c=C("td"),A.c(),d=y(),u=C("td"),p=C("button"),p.textContent="Radera användare",_(p,"type","button"),_(p,"class","btn btn-danger"),m=O(p,"click",t.deleteUser)},m(e,t){b(e,r,t),h(r,n),h(n,l),h(r,a),h(r,s),h(s,o),h(r,i),h(r,c),A.m(c,null),h(r,d),h(r,u),h(u,p)},p(e,t){e.user&&f!==(f=t.user.name+"")&&w(l,f),e.user&&g!==(g=t.user.email+"")&&w(o,g),k===(k=x(0,t))&&A?A.p(e,t):(A.d(1),A=k(t),A&&(A.c(),A.m(c,null)))},i:e,o:e,d(e){e&&v(r),A.d(),m()}}}function at(e,t,r){let{user:n}=t,{getAllUsers:l}=t,{apiCall:a}=t;return e.$set=e=>{"user"in e&&r("user",n=e.user),"getAllUsers"in e&&r("getAllUsers",l=e.getAllUsers),"apiCall"in e&&r("apiCall",a=e.apiCall)},{user:n,getAllUsers:l,apiCall:a,deleteUser:async function(){const e=n._id;try{if(!confirm("Är du säker att du vill radera användaren?"))return;const t=await a("/deleteUser",JSON.stringify({id:e}));if(t.error){if("NoDeleteYou"===t.message)return void alert("Du kan inte radera dig själv");alert("Kunde inte radera användare")}else l()}catch(e){console.log(e)}},toggleUserAdmin:async function(){let e="";if(e=n.admin?"Är du säker att du vill ta bort admin från denna användare?":"Är du säker att du vill göra användaren admin?",!confirm(e))return;const t=n._id;try{const e=await a("/toggleUserAdmin",JSON.stringify({id:t}));if(e.error){if("NoAdminYou"===e.message)return void alert("Du kan inte ta bort admin från dig själv");alert("Ett fel uppstod försök igen senare")}else l()}catch(e){console.log(e)}}}}class st extends oe{constructor(e){super(),se(this,e,at,lt,s,{user:0,getAllUsers:0,apiCall:0})}}function ot(e,t,r){const n=Object.create(e);return n.user=t[r],n}function it(e){let t;const r=new st({props:{getAllUsers:e.getAllUsers,apiCall:e.apiCall,user:e.user}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.getAllUsers&&(n.getAllUsers=t.getAllUsers),e.apiCall&&(n.apiCall=t.apiCall),e.showUsers&&(n.user=t.user),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function ct(e){let t,r,n,a,s,o,i,c,d,u,p,m,f,g,$,k,w,V,U,D,T=e.showUsers,N=[];for(let t=0;t<T.length;t+=1)N[t]=it(ot(e,T,t));const F=e=>Z(N[e],1,1,()=>{N[e]=null});return{c(){t=C("div"),r=C("div"),n=C("div"),n.innerHTML="<h2>Alla användare</h2>",a=y(),s=C("div"),o=C("table"),i=C("thead"),c=C("th"),c.textContent="Namn",d=y(),u=C("th"),u.textContent="Email",p=y(),m=C("th"),f=C("form"),g=C("input"),$=y(),k=C("button"),k.textContent="Sök",w=y(),V=C("tbody");for(let e=0;e<N.length;e+=1)N[e].c();_(n,"class","card-header"),_(c,"scope","col"),_(u,"scope","col "),_(g,"class","form-control mr-sm-2 "),_(g,"type","search"),_(g,"placeholder","Sök"),_(g,"aria-label","Sök"),_(k,"class","btn btn-success bg my-2 my-sm-0"),_(k,"type","submit"),_(f,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(m,"scope","col"),_(m,"colspan","2"),_(i,"class","thead-dark"),_(o,"class","table table-striped table-bordered table-hover"),_(s,"class","table-responsive text-left"),_(r,"class","card text-center"),_(t,"class","container-fluid "),D=[O(g,"input",e.input_input_handler),O(f,"submit",e.search)]},m(l,v){b(l,t,v),h(t,r),h(r,n),h(r,a),h(r,s),h(s,o),h(o,i),h(i,c),h(i,d),h(i,u),h(i,p),h(i,m),h(m,f),h(f,g),A(g,e.searchQuery),h(f,$),h(f,k),h(o,w),h(o,V);for(let e=0;e<N.length;e+=1)N[e].m(V,null);U=!0},p(e,t){if(e.searchQuery&&A(g,t.searchQuery),e.getAllUsers||e.apiCall||e.showUsers){let r;for(T=t.showUsers,r=0;r<T.length;r+=1){const n=ot(t,T,r);N[r]?(N[r].p(e,n),X(N[r],1)):(N[r]=it(n),N[r].c(),X(N[r],1),N[r].m(V,null))}for(z(),r=T.length;r<N.length;r+=1)F(r);Y()}},i(e){if(!U){for(let e=0;e<T.length;e+=1)X(N[e]);U=!0}},o(e){N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)Z(N[e]);U=!1},d(e){e&&v(t),x(N,e),l(D)}}}function dt(e,t,r){let n,{apiCall:l}=t,a="",{allUsers:s=[]}=t,{getAllUsers:o}=t;function i(e){return console.log(e,a),console.log(e.toLowerCase().search(a.toLocaleLowerCase())>-1),e.toLowerCase().search(a.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall),"allUsers"in e&&r("allUsers",s=e.allUsers),"getAllUsers"in e&&r("getAllUsers",o=e.getAllUsers)},e.$$.update=(e={allUsers:1})=>{e.allUsers&&r("showUsers",n=s)},{apiCall:l,searchQuery:a,allUsers:s,getAllUsers:o,search:function(e){e&&e.preventDefault(),console.log(s),r("showUsers",n=s.filter(e=>i(e.name)||i(e.email)||"admin"===a&&e.admin))},showUsers:n,input_input_handler:function(){a=this.value,r("searchQuery",a)}}}class ut extends oe{constructor(e){super(),se(this,e,dt,ct,s,{apiCall:0,allUsers:0,getAllUsers:0})}}function pt(e){let t;const r=new ut({props:{apiCall:e.apiCall,getAllUsers:e.getAllUsers,allUsers:e.allUsers}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.apiCall&&(n.apiCall=t.apiCall),e.allUsers&&(n.allUsers=t.allUsers),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function mt(e){let t;const r=new He({props:{order:e.paramsValue.order,apiCall:e.apiCall,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.paramsValue&&(n.order=t.paramsValue.order),e.apiCall&&(n.apiCall=t.apiCall),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function ft(e){let t;const r=new tt({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,allOrders:e.allOrders,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.apiCall&&(n.apiCall=t.apiCall),e.allOrders&&(n.allOrders=t.allOrders),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function gt(e){let t,r,n,l,a,s;const o=new ze({props:{user:e.user,apiCall:e.apiCall}}),i=[ft,mt,pt],c=[];function d(e,t){return"orders"===t.urlValue?0:"expandedOrder"===t.urlValue?1:2}return n=d(0,e),l=c[n]=i[n](e),{c(){t=C("header"),re(o.$$.fragment),r=y(),l.c(),a=k()},m(e,l){b(e,t,l),ne(o,t,null),b(e,r,l),c[n].m(e,l),b(e,a,l),s=!0},p(e,t){const r={};e.user&&(r.user=t.user),e.apiCall&&(r.apiCall=t.apiCall),o.$set(r);let s=n;n=d(0,t),n===s?c[n].p(e,t):(z(),Z(c[s],1,1,()=>{c[s]=null}),Y(),l=c[n],l||(l=c[n]=i[n](t),l.c()),X(l,1),l.m(a.parentNode,a))},i(e){s||(X(o.$$.fragment,e),X(l),s=!0)},o(e){Z(o.$$.fragment,e),Z(l),s=!1},d(e){e&&v(t),le(o),e&&v(r),c[n].d(e),e&&v(a)}}}function ht(e,t,r){let n,l,{apiCall:a}=t,{user:s}=t;me.subscribe(e=>r("paramsValue",l=e)),pe.subscribe(e=>r("urlValue",n=e));let o=[],i=[];async function c(){try{const e=await a("/getAllorders");e.error&&console.log("error",e.message),console.log("call",e),r("allOrders",o=e.data),console.log("allOrders",o)}catch(e){console.log(e)}}async function d(){try{const e=await a("/getAllUsers");console.log("call",e),e.error?alert("Kunde inte hämta anvädare från servern"):r("allUsers",i=e.users)}catch(e){console.log(e)}}return d(),c(),e.$set=e=>{"apiCall"in e&&r("apiCall",a=e.apiCall),"user"in e&&r("user",s=e.user)},{apiCall:a,user:s,urlValue:n,paramsValue:l,allOrders:o,allUsers:i,getAllOrders:c,getAllUsers:d,deleteOrder:async function(e){try{if(!confirm("Är du säker att du vill radera beställning"))return;const t=await a("/deleteOrder",JSON.stringify({id:e}));console.log(t),t.error||(console.log("success"),pe.set("orders"),c())}catch(e){console.log(e)}}}}class bt extends oe{constructor(e){super(),se(this,e,ht,gt,s,{apiCall:0,user:0})}}function vt(t){let r,n,l,a,s,o,i,c,d,u,p,m,f,g,x,k,O,A,V=t.order.productNumber+"",U=t.order.productName+"",D=t.order.customer.name+"",T=t.order.responsible.name+"",N=t.order.status+"",F=new Date(t.order.date).toDateString()+"";return{c(){r=C("tr"),n=C("th"),l=$(V),a=y(),s=C("td"),o=$(U),i=y(),c=C("td"),d=$(D),u=y(),p=C("td"),m=$(T),f=y(),g=C("td"),x=$(N),k=y(),O=C("td"),A=$(F),_(n,"scope","col")},m(e,t){b(e,r,t),h(r,n),h(n,l),h(r,a),h(r,s),h(s,o),h(r,i),h(r,c),h(c,d),h(r,u),h(r,p),h(p,m),h(r,f),h(r,g),h(g,x),h(r,k),h(r,O),h(O,A)},p(e,t){e.order&&V!==(V=t.order.productNumber+"")&&w(l,V),e.order&&U!==(U=t.order.productName+"")&&w(o,U),e.order&&D!==(D=t.order.customer.name+"")&&w(d,D),e.order&&T!==(T=t.order.responsible.name+"")&&w(m,T),e.order&&N!==(N=t.order.status+"")&&w(x,N),e.order&&F!==(F=new Date(t.order.date).toDateString()+"")&&w(A,F)},i:e,o:e,d(e){e&&v(r)}}}function xt(e,t,r){let{order:n}=t;return e.$set=e=>{"order"in e&&r("order",n=e.order)},{order:n}}class Ct extends oe{constructor(e){super(),se(this,e,xt,vt,s,{order:0})}}function $t(e,t,r){const n=Object.create(e);return n.order=t[r],n}function yt(e){let t;const r=new Ct({props:{order:e.order}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.orders&&(n.order=t.order),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function kt(e){let t,r,n,l,a,s,o,i;const c=new De({props:{apiCall:e.apiCall}});let d=e.orders,u=[];for(let t=0;t<d.length;t+=1)u[t]=yt($t(e,d,t));const p=e=>Z(u[e],1,1,()=>{u[e]=null});return{c(){t=C("header"),re(c.$$.fragment),r=y(),n=C("div"),l=C("table"),a=C("thead"),a.innerHTML='<tr><th scope="col">#</th> \n        <th scope="col">Namn</th> \n        <th scope="col " class="d-none d-sm-table-cell">Beställare</th> \n        <th scope="col " class="d-none d-md-table-cell">Ansvarig</th> \n        <th scope="col">Status</th> \n        <th scope="col " class="d-none d-md-table-cell">Datum</th></tr>',s=y(),o=C("tbody");for(let e=0;e<u.length;e+=1)u[e].c();_(a,"class","thead-dark"),_(l,"class","table table-striped table-hover table-bordered "),_(n,"class","card m-sm-4 m-2 text-center")},m(e,d){b(e,t,d),ne(c,t,null),b(e,r,d),b(e,n,d),h(n,l),h(l,a),h(l,s),h(l,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);i=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),c.$set(r),e.orders){let r;for(d=t.orders,r=0;r<d.length;r+=1){const n=$t(t,d,r);u[r]?(u[r].p(e,n),X(u[r],1)):(u[r]=yt(n),u[r].c(),X(u[r],1),u[r].m(o,null))}for(z(),r=d.length;r<u.length;r+=1)p(r);Y()}},i(e){if(!i){X(c.$$.fragment,e);for(let e=0;e<d.length;e+=1)X(u[e]);i=!0}},o(e){Z(c.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)Z(u[e]);i=!1},d(e){e&&v(t),le(c),e&&v(r),e&&v(n),x(u,e)}}}function Ot(e,t,r){let{apiCall:n}=t,l=[];return async function(){try{const e=await n("/getMyOrders","");console.log("call",e),e.error?alert("Kunde inte hämta din beställningar"):r("orders",l=e.orders)}catch(e){console.log(e)}}(),e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall)},{apiCall:n,orders:l}}class _t extends oe{constructor(e){super(),se(this,e,Ot,kt,s,{apiCall:0})}}function wt(t){let r;return{c(){r=C("main"),r.innerHTML='<header><h1>Laddar...</h1></header> \n  <div class="spinner-grow  svelte-1cplefx" style="width: 20rem; height: 20rem;" role="status" id="load"><span class="sr-only">Loading...</span></div>',_(r,"class","bg-primary svelte-1cplefx")},m(e,t){b(e,r,t)},p:e,i:e,o:e,d(e){e&&v(r)}}}class At extends oe{constructor(e){super(),se(this,e,null,wt,s,{})}}let Vt=ue({});function Ut(t){let r;const n=new At({});return{c(){re(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:e,i(e){r||(X(n.$$.fragment,e),r=!0)},o(e){Z(n.$$.fragment,e),r=!1},d(e){le(n,e)}}}function Dt(t){let r;const n=new _t({props:{apiCall:Et}});return{c(){re(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:e,i(e){r||(X(n.$$.fragment,e),r=!0)},o(e){Z(n.$$.fragment,e),r=!1},d(e){le(n,e)}}}function Tt(e){let t;const r=new He({props:{order:e.selectedOrderValue}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.selectedOrderValue&&(n.order=t.selectedOrderValue),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function Nt(e){let t;const r=new Ee({props:{user:e.userValue||e.paramsValue.user,apiCall:Et}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};(e.userValue||e.paramsValue)&&(n.user=t.userValue||t.paramsValue.user),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function Ft(e){let t;const r=new bt({props:{user:e.userValue,apiCall:Et}});return{c(){re(r.$$.fragment)},m(e,n){ne(r,e,n),t=!0},p(e,t){const n={};e.userValue&&(n.user=t.userValue),r.$set(n)},i(e){t||(X(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){le(r,e)}}}function Lt(t){let r;const n=new $e({props:{apiCall:Et}});return{c(){re(n.$$.fragment)},m(e,t){ne(n,e,t),r=!0},p:e,i(e){r||(X(n.$$.fragment,e),r=!0)},o(e){Z(n.$$.fragment,e),r=!1},d(e){le(n,e)}}}function St(e){let t,r,n,l;const a=[Lt,Ft,Nt,Tt,Dt,Ut],s=[];function o(e,t){return"authenticate"===t.urlValue?0:"orders"===t.urlValue||"manageUsers"===t.urlValue||"expandedOrder"===t.urlValue?1:"makeOrder"===t.urlValue?2:"expandedOrder"===t.urlValue?3:"myOrders"===t.urlValue?4:5}return t=o(0,e),r=s[t]=a[t](e),{c(){r.c(),n=k()},m(e,r){s[t].m(e,r),b(e,n,r),l=!0},p(e,l){let i=t;t=o(0,l),t===i?s[t].p(e,l):(z(),Z(s[i],1,1,()=>{s[i]=null}),Y(),r=s[t],r||(r=s[t]=a[t](l),r.c()),X(r,1),r.m(n.parentNode,n))},i(e){l||(X(r),l=!0)},o(e){Z(r),l=!1},d(e){s[t].d(e),e&&v(n)}}}function Et(e,t,r,n){const l=!("multipart/form-data"===r);return console.log(t),new Promise((r,a)=>{const s={method:"POST",mode:"cors",credentials:"include",body:t};l&&(s.headers={"Content-Type":"application/json"}),fetch(e,s).then(e=>e.json()).then(e=>{console.log("answer"),e.error?n||"NoAuth"!==e.message?r(e):(console.log("Logged out"),alert("Du har blivit utloggad"),pe.set("authenticate")):(r(e),console.log(e))}).catch(e=>a(e))})}function jt(e,t,r){let n,l,a,s;return Vt.subscribe(e=>r("selectedOrderValue",a=e)),pe.subscribe(e=>r("urlValue",n=e)),me.subscribe(e=>r("paramsValue",s=e)),async function(){try{console.log("route user");const e=await Et("/checkAccount",void 0,void 0,!0);console.log("user",e);const t=function(e){try{return e.authenticated?(r("userValue",l=e),e.admin?"orders":"makeOrder"):"authenticate"}catch(e){console.log(e)}}(e);console.log(t),pe.set(t)}catch(e){console.log("err"),console.log(e)}}(),e.$$.update=(e={urlValue:1})=>{e.urlValue&&console.log(n)},{urlValue:n,userValue:l,selectedOrderValue:a,paramsValue:s}}return new class extends oe{constructor(e){super(),se(this,e,jt,St,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
