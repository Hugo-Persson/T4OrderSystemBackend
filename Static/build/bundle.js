var app=function(){"use strict";function e(){}const t=e=>e;function r(e){return e()}function l(){return Object.create(null)}function n(e){e.forEach(r)}function a(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e){return null==e?"":e}const i="undefined"!=typeof window;let c=i?()=>window.performance.now():()=>Date.now(),d=i?e=>requestAnimationFrame(e):e;const u=new Set;let p,m=!1;function f(){u.forEach(e=>{e[0](c())||(u.delete(e),e[1]())}),(m=u.size>0)&&d(f)}function g(e){let t;return m||(m=!0,d(f)),{promise:new Promise(r=>{u.add(t=[e,r])}),abort(){u.delete(t)}}}function h(e,t){e.appendChild(t)}function b(e,t,r){e.insertBefore(t,r||null)}function v(e){e.parentNode.removeChild(e)}function C(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function x(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function y(){return $(" ")}function k(){return $("")}function O(e,t,r,l){return e.addEventListener(t,r,l),()=>e.removeEventListener(t,r,l)}function _(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){(null!=t||e.value)&&(e.value=t)}function U(e,t,r,l){e.style.setProperty(t,r,l?"important":"")}function V(e,t){for(let r=0;r<e.options.length;r+=1){const l=e.options[r];if(l.__value===t)return void(l.selected=!0)}}let D,T=0,N={};function F(e,t,r,l,n,a,o,s=0){const i=16.666/l;let c="{\n";for(let e=0;e<=1;e+=i){const l=t+(r-t)*a(e);c+=100*e+`%{${o(l,1-l)}}\n`}const d=c+`100% {${o(r,1-r)}}\n}`,u=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(d)}_${s}`;if(!N[u]){if(!p){const e=x("style");document.head.appendChild(e),p=e.sheet}N[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length)}const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${u} ${l}ms linear ${n}ms 1 both`,T+=1,u}function S(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--T&&d(()=>{if(T)return;let e=p.cssRules.length;for(;e--;)p.deleteRule(e);N={}})}function E(e){D=e}const L=[],j=[],I=[],B=[],M=Promise.resolve();let H,P=!1;function R(e){I.push(e)}function q(){const e=new Set;do{for(;L.length;){const e=L.shift();E(e),Q(e.$$)}for(;j.length;)j.pop()();for(let t=0;t<I.length;t+=1){const r=I[t];e.has(r)||(r(),e.add(r))}I.length=0}while(L.length);for(;B.length;)B.pop()();P=!1}function Q(e){null!==e.fragment&&(e.update(e.dirty),n(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(R))}function J(){return H||(H=Promise.resolve()).then(()=>{H=null}),H}function K(e,t,r){e.dispatchEvent(function(e,t){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!1,t),r}(`${t?"intro":"outro"}${r}`))}const W=new Set;let G;function z(){G={r:0,c:[],p:G}}function X(){G.r||n(G.c),G=G.p}function Y(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Z(e,t,r,l){if(e&&e.o){if(W.has(e))return;W.add(e),G.c.push(()=>{W.delete(e),l&&(r&&e.d(1),l())}),e.o(t)}}const ee={duration:0};function te(r,l,o,s){let i=l(r,o),d=s?0:1,u=null,p=null,m=null;function f(){m&&S(r,m)}function h(e,t){const r=e.b-d;return t*=Math.abs(r),{a:d,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(l){const{delay:a=0,duration:o=300,easing:s=t,tick:b=e,css:v}=i||ee,C={start:c()+a,b:l};l||(C.group=G,G.r+=1),u?p=C:(v&&(f(),m=F(r,d,l,o,a,s,v)),l&&b(0,1),u=h(C,o),R(()=>K(r,l,"start")),g(e=>{if(p&&e>p.start&&(u=h(p,o),p=null,K(r,u.b,"start"),v&&(f(),m=F(r,d,u.b,u.duration,0,s,i.css))),u)if(e>=u.end)b(d=u.b,1-d),K(r,u.b,"end"),p||(u.b?f():--u.group.r||n(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;d=u.a+u.d*s(t/u.duration),b(d,1-d)}return!(!u&&!p)}))}return{run(e){a(i)?J().then(()=>{i=i(),b(e)}):b(e)},end(){f(),u=p=null}}}function re(e){e&&e.c()}function le(e,t,l){const{fragment:o,on_mount:s,on_destroy:i,after_update:c}=e.$$;o&&o.m(t,l),R(()=>{const t=s.map(r).filter(a);i?i.push(...t):n(t),e.$$.on_mount=[]}),c.forEach(R)}function ne(e,t){const r=e.$$;null!==r.fragment&&(n(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx={})}function ae(e,t){e.$$.dirty||(L.push(e),P||(P=!0,M.then(q)),e.$$.dirty=l()),e.$$.dirty[t]=!0}function oe(t,r,a,o,s,i){const c=D;E(t);const d=r.props||{},u=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:s,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:l(),dirty:null};let p=!1;u.ctx=a?a(t,d,(e,r,l=r)=>(u.ctx&&s(u.ctx[e],u.ctx[e]=l)&&(u.bound[e]&&u.bound[e](l),p&&ae(t,e)),r)):d,u.update(),p=!0,n(u.before_update),u.fragment=!!o&&o(u.ctx),r.target&&(r.hydrate?u.fragment&&u.fragment.l(function(e){return Array.from(e.childNodes)}(r.target)):u.fragment&&u.fragment.c(),r.intro&&Y(t.$$.fragment),le(t,r.target,r.anchor),q()),E(c)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(){}}function ie(e){const t=e-1;return t*t*t+1}function ce(e,{delay:t=0,duration:r=400,easing:l=ie}){const n=getComputedStyle(e),a=+n.opacity,o=parseFloat(n.height),s=parseFloat(n.paddingTop),i=parseFloat(n.paddingBottom),c=parseFloat(n.marginTop),d=parseFloat(n.marginBottom),u=parseFloat(n.borderTopWidth),p=parseFloat(n.borderBottomWidth);return{delay:t,duration:r,easing:l,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*o}px;`+`padding-top: ${e*s}px;`+`padding-bottom: ${e*i}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*d}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*p}px;`}}const de=[];function ue(t,r=e){let l;const n=[];function a(e){if(o(t,e)&&(t=e,l)){const e=!de.length;for(let e=0;e<n.length;e+=1){const r=n[e];r[1](),de.push(r,t)}if(e){for(let e=0;e<de.length;e+=2)de[e][0](de[e+1]);de.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,s=e){const i=[o,s];return n.push(i),1===n.length&&(l=r(a)||e),o(t),()=>{const e=n.indexOf(i);-1!==e&&n.splice(e,1),0===n.length&&(l(),l=null)}}}}const pe=ue(""),me=ue({});function fe(e){let t,r,l,n;return{c(){t=x("div"),r=$(e.alertText),_(t,"class","alert alert-danger svelte-1r1bdcq"),_(t,"role","alert")},m(e,l){b(e,t,l),h(t,r),n=!0},p(e,t){n&&!e.alertText||w(r,t.alertText)},i(e){n||(R(()=>{l||(l=te(t,ce,{},!0)),l.run(1)}),n=!0)},o(e){l||(l=te(t,ce,{},!1)),l.run(0),n=!1},d(e){e&&v(t),e&&l&&l.end()}}}function ge(e){let t,r,l,a,o,s,i,c,d,u,p,m="Registera"===e.headerText&&be(e);return{c(){t=x("form"),r=x("div"),m&&m.c(),l=y(),(a=x("label")).textContent="Email address",o=y(),s=x("input"),i=y(),(c=x("button")).textContent="Vidare",_(a,"for","exampleInputEmail1"),_(s,"type","email"),_(s,"class","form-control"),_(s,"id","exampleInputEmail1"),_(s,"aria-describedby","emailHelp"),_(s,"placeholder","Din email"),_(r,"class","form-group"),_(c,"type","submit"),_(c,"class","btn btn-primary"),p=[O(s,"input",e.input_input_handler_2),O(t,"submit",e.login)]},m(n,d){b(n,t,d),h(t,r),m&&m.m(r,null),h(r,l),h(r,a),h(r,o),h(r,s),A(s,e.email),h(t,i),h(t,c),u=!0},p(e,t){"Registera"===t.headerText?m?m.p(e,t):((m=be(t)).c(),m.m(r,l)):m&&(m.d(1),m=null),e.email&&s.value!==t.email&&A(s,t.email)},i(e){u||(R(()=>{d||(d=te(t,ce,{},!0)),d.run(1)}),u=!0)},o(e){d||(d=te(t,ce,{},!1)),d.run(0),u=!1},d(e){e&&v(t),m&&m.d(),e&&d&&d.end(),n(p)}}}function he(e){let t,r,l,a,o,s,i,c,d,u,p,m,f;return{c(){t=x("form"),r=x("div"),(l=x("label")).textContent="Verifikation kod",a=y(),o=x("input"),s=y(),i=x("small"),c=$(e.feedbackInformation),d=y(),(u=x("button")).textContent="Vidare",_(l,"for","verficationCode"),_(o,"autocomplete","off"),_(o,"type","text"),_(o,"class","form-control"),_(o,"id","verficationCode"),_(o,"aria-describedby","emailHelp"),_(o,"placeholder","Skriv in verifikations kod"),_(i,"id","emailHelp"),_(i,"class","form-text text-muted"),_(r,"class","form-group"),_(u,"type","submit"),_(u,"class","btn btn-primary"),f=[O(o,"input",e.input_input_handler),O(t,"submit",e.verifyWithCode)]},m(n,p){b(n,t,p),h(t,r),h(r,l),h(r,a),h(r,o),A(o,e.verificationCode),h(r,s),h(r,i),h(i,c),h(t,d),h(t,u),m=!0},p(e,t){e.verificationCode&&o.value!==t.verificationCode&&A(o,t.verificationCode),m&&!e.feedbackInformation||w(c,t.feedbackInformation)},i(e){m||(R(()=>{p||(p=te(t,ce,{},!0)),p.run(1)}),m=!0)},o(e){p||(p=te(t,ce,{},!1)),p.run(0),m=!1},d(e){e&&v(t),e&&p&&p.end(),n(f)}}}function be(e){let t,r,l,n,a;return{c(){t=x("div"),(r=x("label")).textContent="Name",l=y(),n=x("input"),_(r,"for","exampleInputPassword1"),_(n,"type","text"),_(n,"class","form-control"),_(n,"id","nameInput"),_(n,"placeholder","Ditt name"),_(t,"class","form-group"),a=O(n,"input",e.input_input_handler_1)},m(a,o){b(a,t,o),h(t,r),h(t,l),h(t,n),A(n,e.name)},p(e,t){e.name&&n.value!==t.name&&A(n,t.name)},d(e){e&&v(t),a()}}}function ve(e){let t;return{c(){(t=x("div")).innerHTML='<span class="sr-only">Loading...</span>',_(t,"class","spinner-border text-primary svelte-1r1bdcq"),_(t,"role","status")},m(e,r){b(e,t,r)},d(e){e&&v(t)}}}function Ce(e){let t,r,l,n,a,o,i,c,d,u,p,m,f,g,C,k,O,A,U=e.error&&fe(e);const V=[he,ge],D=[];function T(e,t){return t.verify?0:1}c=T(0,e),d=D[c]=V[c](e);let N=e.loading&&ve();return{c(){t=x("main"),U&&U.c(),r=y(),l=x("div"),n=x("header"),a=x("h1"),o=$(e.headerText),i=y(),d.c(),u=y(),p=x("div"),N&&N.c(),m=y(),f=x("div"),g=x("div"),C=$(e.progress),_(g,"class","progress-bar"),_(g,"role","progressbar"),_(g,"style",k="width:"+e.progress),_(g,"aria-valuenow","25"),_(g,"aria-valuemin","0"),_(g,"aria-valuemax","100"),_(f,"class","progress svelte-1r1bdcq"),_(p,"id","progressContainer"),_(p,"class","svelte-1r1bdcq"),_(l,"id","login"),_(l,"class","svelte-1r1bdcq"),_(t,"class",O=s("100%"===e.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq")},m(e,s){b(e,t,s),U&&U.m(t,null),h(t,r),h(t,l),h(l,n),h(n,a),h(a,o),h(l,i),D[c].m(l,null),h(l,u),h(l,p),N&&N.m(p,null),h(p,m),h(p,f),h(f,g),h(g,C),A=!0},p(e,n){n.error?U?(U.p(e,n),Y(U,1)):((U=fe(n)).c(),Y(U,1),U.m(t,r)):U&&(z(),Z(U,1,1,()=>{U=null}),X()),A&&!e.headerText||w(o,n.headerText);let a=c;(c=T(0,n))===a?D[c].p(e,n):(z(),Z(D[a],1,1,()=>{D[a]=null}),X(),(d=D[c])||(d=D[c]=V[c](n)).c(),Y(d,1),d.m(l,u)),n.loading?N||((N=ve()).c(),N.m(p,m)):N&&(N.d(1),N=null),A&&!e.progress||w(C,n.progress),(!A||e.progress&&k!==(k="width:"+n.progress))&&_(g,"style",k),(!A||e.progress&&O!==(O=s("100%"===n.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq"))&&_(t,"class",O)},i(e){A||(Y(U),Y(d),A=!0)},o(e){Z(U),Z(d),A=!1},d(e){e&&v(t),U&&U.d(),D[c].d(),N&&N.d()}}}function xe(e,t,r){let l,n,a,o,s,{apiCall:i}=t,c=!1,d="Logga in/Registera",u=!1,p="0%",m="",f=!1,g="";return e.$set=e=>{"apiCall"in e&&r("apiCall",i=e.apiCall)},{apiCall:i,email:l,name:n,headerText:d,verify:u,verificationCode:a,loading:o,progress:p,alertText:m,error:f,feedbackInformation:g,login:async function(e){if(e.preventDefault(),console.log(c),c)!async function(e){e.preventDefault();try{r("loading",o=!0);const e=await i("/registerUser",JSON.stringify({name:n,email:l}));r("loading",o=!1),e.error||(r("progress",p="66%"),r("verify",u=!0),s=e.data.token,console.log(s),r("headerText",d="Verifiera konto"),r("feedbackInformation",g="Ett mail har skickats med verifikations koden till "+l))}catch(e){console.log(e)}}(e);else try{r("loading",o=!0);const e=await i("/login",JSON.stringify({email:l}));"NoAccount"===e.message?(r("progress",p="33%"),c=!0,r("loading",o=!1),r("headerText",d="Registera")):e.error?console.log("huh"):(r("loading",o=!1),console.log("Login no error"),r("headerText",d="Verifiera inloggning"),s=e.data.token,r("progress",p="50%"),r("feedbackInformation",g="Ett mail har skickats med verifikations koden till "+l),r("verify",u=!0)),console.log(e)}catch(e){console.log(e)}},verifyWithCode:async function(e){try{console.log("code"),e.preventDefault(),console.log(s);const t=await i("/verifyWithCode",JSON.stringify({verificationCode:a,token:s}));console.log(t),t.error?(r("error",f=!0),"WrongCode"===t.message&&r("alertText",m="Fel verifikations kod, försök igen")):(console.log(t),t.admin?pe.set("orders"):pe.set("makeOrder"))}catch(e){console.log(e)}},input_input_handler:function(){a=this.value,r("verificationCode",a)},input_input_handler_1:function(){n=this.value,r("name",n)},input_input_handler_2:function(){l=this.value,r("email",l)}}}class $e extends se{constructor(e){super(),oe(this,e,xe,Ce,o,{apiCall:0})}}function ye(e){let t,r=e.files[e.index].name+"";return{c(){t=$(r)},m(e,r){b(e,t,r)},p(e,l){(e.files||e.index)&&r!==(r=l.files[l.index].name+"")&&w(t,r)},d(e){e&&v(t)}}}function ke(t){let r;return{c(){r=$("Välj fil")},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r)}}}function Oe(e){let t,r,l,a,o,s,i,c,d,u,p,m,f,g,C;function $(e,t){return void 0===t.files[t.index]?ke:ye}let k=$(0,e),w=k(e);return{c(){t=x("div"),r=x("div"),l=x("div"),a=x("input"),s=y(),i=x("label"),w.c(),c=y(),d=x("div"),u=x("input"),p=y(),(m=x("button")).innerHTML='<span aria-hidden="true">×</span>',_(a,"type","file"),_(a,"class","custom-file-input"),_(a,"id",e.index),_(a,"aria-describedby","inputGroupFileAddon01"),a.multiple=o=!1,_(i,"class","custom-file-label text-truncate"),_(i,"data-browse","Ladda upp"),_(i,"for",e.index),_(l,"class","col-4"),_(u,"type","text"),_(u,"class","form-control"),_(u,"placeholder","Fil information"),_(d,"class","col-7"),_(m,"type","button"),_(m,"class","close"),_(m,"data-dismiss","modal"),_(m,"aria-label","Close"),_(r,"class","form-row"),_(t,"class","form-group"),C=[O(a,"change",e.change_handler),O(u,"input",e.input1_input_handler),O(m,"click",e.deleteFile)]},m(n,o){b(n,t,o),h(t,r),h(r,l),h(l,a),h(l,s),h(l,i),w.m(i,null),h(r,c),h(r,d),h(d,u),A(u,e.descriptions[e.index]),h(r,p),h(r,m),g=!0},p(e,t){g&&!e.index||_(a,"id",t.index),k===(k=$(0,t))&&w?w.p(e,t):(w.d(1),(w=k(t))&&(w.c(),w.m(i,null))),g&&!e.index||_(i,"for",t.index),(e.descriptions||e.index)&&u.value!==t.descriptions[t.index]&&A(u,t.descriptions[t.index])},i(e){g||(R(()=>{f||(f=te(t,ce,{},!0)),f.run(1)}),g=!0)},o(e){f||(f=te(t,ce,{},!1)),f.run(0),g=!1},d(e){e&&v(t),w.d(),e&&f&&f.end(),n(C)}}}function _e(e,t,r){let{files:l}=t,{descriptions:n}=t,{index:a}=t,{deleteFileInput:o}=t;console.log(l);return e.$set=e=>{"files"in e&&r("files",l=e.files),"descriptions"in e&&r("descriptions",n=e.descriptions),"index"in e&&r("index",a=e.index),"deleteFileInput"in e&&r("deleteFileInput",o=e.deleteFileInput)},{files:l,descriptions:n,index:a,deleteFileInput:o,deleteFile:function(){o(a)},change_handler:e=>r("files",l[a]=e.currentTarget.files[0],l),input1_input_handler:function(){n[a]=this.value,r("descriptions",n),r("index",a)}}}class we extends se{constructor(e){super(),oe(this,e,_e,Oe,o,{files:0,descriptions:0,index:0,deleteFileInput:0})}}function Ae(t){let r,l,a,o,s,i,c,d,u,p,m,f,g,C,k;return{c(){r=x("nav"),(l=x("span")).textContent="Användare",a=y(),o=x("div"),s=x("div"),i=x("a"),c=$("Gör en beställning"),u=y(),p=x("a"),m=$("Mina beställningar"),g=y(),(C=x("a")).textContent="Logga ut",_(l,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        "),_(C,"class","nav-item nav-link"),_(C,"href","#"),_(s,"class","navbar-nav"),_(o,"class"," navbar"),_(o,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),k=[O(i,"click",t.click_handler),O(p,"click",t.click_handler_1),O(C,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,l),h(r,a),h(r,o),h(o,s),h(s,i),h(i,c),h(s,u),h(s,p),h(p,m),h(s,g),h(s,C)},p(e,t){e.urlValue&&d!==(d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":""))&&_(i,"class",d),e.urlValue&&f!==(f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&v(r),n(k)}}}function Ue(e,t){e&&e.preventDefault(),pe.set(t)}function Ve(e,t,r){let l,{apiCall:n}=t;pe.subscribe(e=>r("urlValue",l=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall)},{apiCall:n,urlValue:l,logOut:async function(e){try{e&&e.preventDefault(),(await n("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>Ue(e,"makeOrder"),click_handler_1:e=>Ue(e,"myOrders")}}class De extends se{constructor(e){super(),oe(this,e,Ve,Ae,o,{apiCall:0})}}function Te(e,t,r){const l=Object.create(e);return l.desc=t[r],l.i=r,l}function Ne(r){let l,n,o,s;return{c(){l=x("div"),n=$(r.alertText),_(l,"class",o="alert "+(r.error?"alert-danger":"alert-success")+"\r\n        "),_(l,"role","alert")},m(e,t){b(e,l,t),h(l,n)},p(e,t){e.alertText&&w(n,t.alertText),e.error&&o!==(o="alert "+(t.error?"alert-danger":"alert-success")+"\r\n        ")&&_(l,"class",o)},i(r){s||R(()=>{(s=function(r,l,n){let o,s,i=l(r,n),d=!1,u=0;function p(){o&&S(r,o)}function m(){const{delay:l=0,duration:n=300,easing:a=t,tick:m=e,css:f}=i||ee;f&&(o=F(r,0,1,n,l,a,f,u++)),m(0,1);const h=c()+l,b=h+n;s&&s.abort(),d=!0,R(()=>K(r,!0,"start")),s=g(e=>{if(d){if(e>=b)return m(1,0),K(r,!0,"end"),p(),d=!1;if(e>=h){const t=a((e-h)/n);m(t,1-t)}}return d})}let f=!1;return{start(){f||(S(r),a(i)?(i=i(),J().then(m)):m())},invalidate(){f=!1},end(){d&&(p(),d=!1)}}}(l,ce,{})).start()})},o:e,d(e){e&&v(l)}}}function Fe(e){let t;const r=new we({props:{deleteFileInput:e.deleteFileInput,index:e.i,files:e.files,descriptions:e.fileDescriptions}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.files&&(l.files=t.files),e.fileDescriptions&&(l.descriptions=t.fileDescriptions),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Se(e){let t,r,l,a,o,s,i,c,d,u,p,m,f,g,$,k,w,A,U,V,D,T,N,F,S,E,L,j,I,B,M,H;const P=new De({props:{apiCall:e.apiCall}});let R=(e.error||e.success)&&Ne(e),q=e.fileDescriptions,Q=[];for(let t=0;t<q.length;t+=1)Q[t]=Fe(Te(e,q,t));const J=e=>Z(Q[e],1,1,()=>{Q[e]=null});return{c(){t=x("header"),re(P.$$.fragment),r=y(),l=x("div"),a=x("main"),R&&R.c(),o=y(),s=x("form"),i=x("div"),c=x("div"),(d=x("div")).innerHTML='<label for="productName">Projektnamn</label> \n            <input type="text" class="form-control" id="productName" name="productName" aria-describedby="emailHelp" placeholder="Projektnamn">',u=y(),p=x("div"),(m=x("label")).textContent="Beställare",f=y(),g=x("input"),k=y(),(w=x("div")).innerHTML='<h3>Typ av uppdrag</h3> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkning" name="production"> \n            <label class="form-check-label" for="tillverkning">\n              Tillverkning\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkningsunderlag" name="productionDocumentation"> \n            <label class="form-check-label" for="tillverkningsunderlag">\n              Tillverkningsunderlag\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="beräkning" name="calculation"> \n            <label class="form-check-label" for="beräkning">Beräkning</label></div>',A=y(),(U=x("div")).innerHTML='<h3>Beskrivning av produkt</h3> \n          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="productDescription"></textarea>',V=y(),(D=x("div")).innerHTML='<h3>Önskemål</h3> \n          <textarea class="form-control" id="productDescripion" name="wishes" rows="3"></textarea>',T=y(),(N=x("h3")).textContent="Filer",F=y();for(let e=0;e<Q.length;e+=1)Q[e].c();S=y(),(E=x("button")).textContent="Lägg till fil",L=y(),j=x("hr"),I=y(),(B=x("button")).textContent="Gör beställning",_(d,"class","col"),_(m,"for","customer"),_(g,"name","customer"),_(g,"type","text"),_(g,"id","customer"),_(g,"class","form-control"),g.value=$=e.user.name,_(g,"placeholder","Beställare"),_(p,"class","col"),_(c,"class","form-row"),_(w,"class","form-group mt-3"),_(U,"class","form-group"),_(D,"class","form-group"),_(E,"class","btn btn-primary"),_(j,"class","my-4"),_(B,"type","submit"),_(B,"class","btn btn-success btn-lg"),_(i,"class","form-group"),_(s,"class","svelte-1lxf9ux"),_(a,"class","svelte-1lxf9ux"),_(l,"class","container-fluid"),H=[O(E,"click",e.addFile),O(s,"submit",e.submitForm)]},m(e,n){b(e,t,n),le(P,t,null),b(e,r,n),b(e,l,n),h(l,a),R&&R.m(a,null),h(a,o),h(a,s),h(s,i),h(i,c),h(c,d),h(c,u),h(c,p),h(p,m),h(p,f),h(p,g),h(i,k),h(i,w),h(i,A),h(i,U),h(i,V),h(i,D),h(i,T),h(i,N),h(i,F);for(let e=0;e<Q.length;e+=1)Q[e].m(i,null);h(i,S),h(i,E),h(i,L),h(i,j),h(i,I),h(i,B),M=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),P.$set(r),t.error||t.success?R?(R.p(e,t),Y(R,1)):((R=Ne(t)).c(),Y(R,1),R.m(a,o)):R&&(R.d(1),R=null),(!M||e.user&&$!==($=t.user.name))&&(g.value=$),e.deleteFileInput||e.files||e.fileDescriptions){let r;for(q=t.fileDescriptions,r=0;r<q.length;r+=1){const l=Te(t,q,r);Q[r]?(Q[r].p(e,l),Y(Q[r],1)):(Q[r]=Fe(l),Q[r].c(),Y(Q[r],1),Q[r].m(i,S))}for(z(),r=q.length;r<Q.length;r+=1)J(r);X()}},i(e){if(!M){Y(P.$$.fragment,e),Y(R);for(let e=0;e<q.length;e+=1)Y(Q[e]);M=!0}},o(e){Z(P.$$.fragment,e),Q=Q.filter(Boolean);for(let e=0;e<Q.length;e+=1)Z(Q[e]);M=!1},d(e){e&&v(t),ne(P),e&&v(r),e&&v(l),R&&R.d(),C(Q,e),n(H)}}}function Ee(e,t,r){let{apiCall:l}=t,{user:n}=t,a=[],o=[],s=!1,i=!1,c="";return async function(){n||r("user",n=await l("/checkAccount"))}(),e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall),"user"in e&&r("user",n=e.user)},{apiCall:l,user:n,files:a,fileDescriptions:o,success:s,error:i,alertText:c,addFile:function(e){e.preventDefault(),console.log("add file"),r("fileDescriptions",o=[...o,""]),console.log(o),console.log(a)},submitForm:async function(e){e.preventDefault();const t=e.currentTarget;console.log("form",t);const n=new FormData(t);a.map(e=>n.append("files",e)),n.append("fileDescriptions",o);for(let[e,t]of n.entries())console.log(e,t);(await l("/makeOrder",n,"multipart/form-data")).error?(r("error",i=!0),r("alertText",c="Kunde inte skapa beställning, försök igen senare")):(r("success",s=!0),r("alertText",c="Beställning skapad"),t.reset(),r("files",a=[]),r("fileDescriptions",o=[]))},deleteFileInput:function(e){console.log("fileDesc1",o),r("files",a=a.filter((t,r)=>r!==e)),r("fileDescriptions",o=o.filter((t,r)=>r!==e)),console.log("fileDesc",o)}}}class Le extends se{constructor(e){super(),oe(this,e,Ee,Se,o,{apiCall:0,user:0})}}function je(e,t,r){const l=Object.create(e);return l.file=t[r],l}function Ie(e){let t,r,l,n,a,o,s,i=e.file.originalName+"",c=e.file.description+"";return{c(){t=x("li"),r=x("a"),l=$(i),a=y(),o=x("li"),s=$(c),_(r,"href",n=e.file.url),_(t,"class","list-group-item"),U(t,"border","none"),_(o,"class","list-group-item")},m(e,n){b(e,t,n),h(t,r),h(r,l),b(e,a,n),b(e,o,n),h(o,s)},p(e,t){e.order&&i!==(i=t.file.originalName+"")&&w(l,i),e.order&&n!==(n=t.file.url)&&_(r,"href",n),e.order&&c!==(c=t.file.description+"")&&w(s,c)},d(e){e&&v(t),e&&v(a),e&&v(o)}}}function Be(e){let t,r,l,a,o,s,i,c,d,u,p,m,f,g,k,U,D,T,N,F,S,E,L,j,I,B,M,H,P,q,Q,J,K,W,G,z,X,Y,Z,ee,re,le,ne,ae,oe,se,ie,de,ue,pe,me,fe,ge,he,be,ve,Ce,xe,$e,ye,ke,Oe,_e,we,Ae,Ue,Ve,De,Te,Ne,Fe,Se,Ee,Le,Be,Me,He,Pe,Re,qe,Qe,Je,Ke,We,Ge,ze,Xe,Ye,Ze,et,tt,rt,lt,nt,at,ot,st,it,ct,dt,ut,pt,mt,ft,gt,ht,bt=e.order.productNumber+"",vt=e.order.productName+"",Ct=new Date(e.order.date).toDateString()+"",xt=e.order.customer.name+"",$t=e.order.customer.email+"",yt=e.order.productDescription+"",kt=e.order.wishes+"",Ot=e.order.files,_t=[];for(let t=0;t<Ot.length;t+=1)_t[t]=Ie(je(e,Ot,t));return{c(){t=x("div"),r=x("div"),l=x("div"),a=x("div"),(o=x("div")).textContent="Orderdetaljer",s=y(),i=x("ul"),c=x("li"),d=$("Ordernummer: "),u=$(bt),p=y(),m=x("li"),f=$("Namn: "),g=$(vt),k=y(),U=x("li"),D=$("Datum: "),T=$(Ct),N=y(),F=x("li"),S=x("div"),E=x("input"),j=y(),(I=x("label")).textContent="Tillverkning",B=y(),M=x("li"),H=x("div"),P=x("input"),Q=y(),(J=x("label")).textContent="Tillverkningsunderlag",K=y(),W=x("li"),G=x("div"),z=x("input"),Y=y(),(Z=x("label")).textContent="Beräkning",ee=y(),re=x("div"),le=x("div"),(ne=x("div")).textContent="Beställare",ae=y(),oe=x("ul"),se=x("li"),ie=$("Namn: "),de=$(xt),ue=y(),pe=x("li"),me=$("Email:\r\n            "),fe=x("a"),ge=$($t),be=y(),ve=x("div"),Ce=x("div"),(xe=x("div")).textContent="Ansvarig",$e=y(),ye=x("ul"),ke=x("li"),Oe=$("Namn:\r\n            "),_e=x("input"),we=y(),Ae=x("li"),Ue=$("Email:\r\n            "),Ve=x("input"),De=y(),Te=x("li"),Ne=$("Status:\r\n            "),Fe=x("select"),(Se=x("option")).textContent="Ej påbörjad",(Ee=x("option")).textContent="Påbörjad",(Le=x("option")).textContent="Avslutad",Be=y(),Me=x("div"),He=x("div"),(Pe=x("div")).textContent="Produkt beskrivning",Re=y(),qe=x("div"),Qe=$(yt),Je=y(),Ke=x("div"),We=x("div"),(Ge=x("div")).textContent="Önskemål",ze=y(),Xe=x("div"),Ye=$(kt),Ze=y(),et=x("div"),tt=x("div"),(rt=x("div")).textContent="Filer",lt=y(),nt=x("ul");for(let e=0;e<_t.length;e+=1)_t[e].c();at=y(),ot=x("div"),st=x("div"),(it=x("button")).textContent="Radera beställningar",ct=y(),dt=x("div"),ut=y(),pt=x("div"),(mt=x("button")).textContent="Spara ändringar",_(o,"class","card-header"),_(c,"class","list-group-item"),_(m,"class","list-group-item"),_(U,"class","list-group-item"),_(E,"type","checkbox"),_(E,"class","custom-control-input"),E.checked=L=e.order.missionType.production,E.disabled=!0,_(I,"class","custom-control-label"),_(S,"class","custom-control custom-checkbox"),_(F,"class","list-group-item"),_(P,"type","checkbox"),_(P,"class","custom-control-input"),P.checked=q=e.order.missionType.productionDocumentation,P.disabled=!0,_(J,"class","custom-control-label"),_(H,"class","custom-control custom-checkbox"),_(M,"class","list-group-item"),_(z,"type","checkbox"),_(z,"class","custom-control-input"),z.checked=X=e.order.missionType.calculation,z.disabled=!0,_(Z,"class","custom-control-label"),_(G,"class","custom-control custom-checkbox"),_(W,"class","list-group-item"),_(i,"class","list-group list-group-flush"),_(a,"class","card h-100"),_(l,"class","col mb-4"),_(ne,"class","card-header"),_(se,"class","list-group-item"),_(fe,"href",he="mailto:"+e.order.customer.email),_(pe,"class","list-group-item"),_(oe,"class","list-group list-group-flush"),_(le,"class","card h-100"),_(re,"class","col mb-4 "),_(xe,"class","card-header"),_(_e,"type","text"),_(_e,"class","form-control "),_(ke,"class","list-group-item"),_(Ve,"type","email"),_(Ve,"class","form-control"),_(Ve,"aria-describedby","emailHelp"),_(Ae,"class","list-group-item"),Se.__value="Ej Påbörjad",Se.value=Se.__value,Ee.__value="Påbörjad",Ee.value=Ee.__value,Le.__value="Avslutad",Le.value=Le.__value,_(Fe,"class","form-control"),_(Fe,"id","exampleFormControlSelect2"),void 0===e.order.status&&R(()=>e.select_change_handler.call(Fe)),_(Te,"class","list-group-item"),_(ye,"class","list-group list-group-flush"),_(Ce,"class","card h-100"),_(ve,"class","col mb-4"),_(Pe,"class","card-header"),_(qe,"class","card-body"),_(He,"class","card h-100"),_(Me,"class","col mb-4"),_(Ge,"class","card-header"),_(Xe,"class","card-body"),_(We,"class","card h-100"),_(Ke,"class","col mb-4"),_(rt,"class","card-header"),_(nt,"class","list-group list-group-flush"),_(tt,"class","card h-100"),_(et,"class","col mb-4"),_(r,"class","row row-cols-1 row-cols-md-2 row-cols-lg-3"),_(it,"class","btn btn-lg btn-danger"),_(st,"class","col "),_(dt,"class","col"),_(mt,"class","btn btn-lg btn-success"),_(pt,"class","col "),_(ot,"class","row"),_(t,"class","container-fluid text-left"),ht=[O(_e,"input",e.input3_input_handler),O(Ve,"input",e.input4_input_handler),O(Fe,"change",e.select_change_handler),O(it,"click",e.click_handler),O(mt,"click",e.saveChanges)]},m(n,v){b(n,t,v),h(t,r),h(r,l),h(l,a),h(a,o),h(a,s),h(a,i),h(i,c),h(c,d),h(c,u),h(i,p),h(i,m),h(m,f),h(m,g),h(i,k),h(i,U),h(U,D),h(U,T),h(i,N),h(i,F),h(F,S),h(S,E),h(S,j),h(S,I),h(i,B),h(i,M),h(M,H),h(H,P),h(H,Q),h(H,J),h(i,K),h(i,W),h(W,G),h(G,z),h(G,Y),h(G,Z),h(r,ee),h(r,re),h(re,le),h(le,ne),h(le,ae),h(le,oe),h(oe,se),h(se,ie),h(se,de),h(oe,ue),h(oe,pe),h(pe,me),h(pe,fe),h(fe,ge),h(r,be),h(r,ve),h(ve,Ce),h(Ce,xe),h(Ce,$e),h(Ce,ye),h(ye,ke),h(ke,Oe),h(ke,_e),A(_e,e.order.responsible.name),h(ye,we),h(ye,Ae),h(Ae,Ue),h(Ae,Ve),A(Ve,e.order.responsible.email),h(ye,De),h(ye,Te),h(Te,Ne),h(Te,Fe),h(Fe,Se),h(Fe,Ee),h(Fe,Le),V(Fe,e.order.status),h(r,Be),h(r,Me),h(Me,He),h(He,Pe),h(He,Re),h(He,qe),h(qe,Qe),h(r,Je),h(r,Ke),h(Ke,We),h(We,Ge),h(We,ze),h(We,Xe),h(Xe,Ye),h(r,Ze),h(r,et),h(et,tt),h(tt,rt),h(tt,lt),h(tt,nt);for(let e=0;e<_t.length;e+=1)_t[e].m(nt,null);h(t,at),h(t,ot),h(ot,st),h(st,it),h(ot,ct),h(ot,dt),h(ot,ut),h(ot,pt),h(pt,mt),gt=!0},p(e,t){if(gt&&!e.order||bt===(bt=t.order.productNumber+"")||w(u,bt),gt&&!e.order||vt===(vt=t.order.productName+"")||w(g,vt),gt&&!e.order||Ct===(Ct=new Date(t.order.date).toDateString()+"")||w(T,Ct),(!gt||e.order&&L!==(L=t.order.missionType.production))&&(E.checked=L),(!gt||e.order&&q!==(q=t.order.missionType.productionDocumentation))&&(P.checked=q),(!gt||e.order&&X!==(X=t.order.missionType.calculation))&&(z.checked=X),gt&&!e.order||xt===(xt=t.order.customer.name+"")||w(de,xt),gt&&!e.order||$t===($t=t.order.customer.email+"")||w(ge,$t),(!gt||e.order&&he!==(he="mailto:"+t.order.customer.email))&&_(fe,"href",he),e.order&&_e.value!==t.order.responsible.name&&A(_e,t.order.responsible.name),e.order&&Ve.value!==t.order.responsible.email&&A(Ve,t.order.responsible.email),e.order&&V(Fe,t.order.status),gt&&!e.order||yt===(yt=t.order.productDescription+"")||w(Qe,yt),gt&&!e.order||kt===(kt=t.order.wishes+"")||w(Ye,kt),e.order){let r;for(Ot=t.order.files,r=0;r<Ot.length;r+=1){const l=je(t,Ot,r);_t[r]?_t[r].p(e,l):(_t[r]=Ie(l),_t[r].c(),_t[r].m(nt,null))}for(;r<_t.length;r+=1)_t[r].d(1);_t.length=Ot.length}},i(e){gt||(R(()=>{ft||(ft=te(t,ce,{},!0)),ft.run(1)}),gt=!0)},o(e){ft||(ft=te(t,ce,{},!1)),ft.run(0),gt=!1},d(e){e&&v(t),C(_t,e),e&&ft&&ft.end(),n(ht)}}}function Me(e,t,r){let{order:l}=t,{toggleExpand:n}=t,{deleteOrder:a}=t,{apiCall:o}=t;return e.$set=e=>{"order"in e&&r("order",l=e.order),"toggleExpand"in e&&r("toggleExpand",n=e.toggleExpand),"deleteOrder"in e&&r("deleteOrder",a=e.deleteOrder),"apiCall"in e&&r("apiCall",o=e.apiCall)},{order:l,toggleExpand:n,deleteOrder:a,apiCall:o,saveChanges:async function(){try{(await o("/updateOrder",JSON.stringify({id:l._id,email:l.responsible.email,name:l.responsible.name}))).error?alert("Ett fel uppstod, försök igen"):pe.set("orders")}catch(e){console.log(e)}},input3_input_handler:function(){l.responsible.name=this.value,r("order",l)},input4_input_handler:function(){l.responsible.email=this.value,r("order",l)},select_change_handler:function(){l.status=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),r("order",l)},click_handler:()=>a(l._id)}}class He extends se{constructor(e){super(),oe(this,e,Me,Be,o,{order:0,toggleExpand:0,deleteOrder:0,apiCall:0})}}function Pe(t){let r,l,a,o,s,i,c,d,u,p,m,f,g,C,k,A,U,V,D,T,N,F,S,E,L,j=t.order.productNumber+"",I=t.order.productName+"",B=t.order.customer.name+"",M=t.order.responsible.name+"",H=t.order.status+"",P=new Date(t.order.date).toDateString()+"";return{c(){r=x("tr"),l=x("th"),a=$(j),o=y(),s=x("td"),i=$(I),c=y(),d=x("td"),u=$(B),p=y(),m=x("td"),f=$(M),g=y(),C=x("td"),k=$(H),A=y(),U=x("td"),V=$(P),D=y(),T=x("td"),(N=x("button")).textContent="Visa mer",F=y(),S=x("td"),(E=x("button")).textContent="Radera order",_(l,"class","align-middle"),_(l,"scope","row"),_(s,"class","align-middle"),_(d,"class","align-middle d-none d-sm-table-cell"),_(m,"class","align-middle d-none d-md-table-cell"),_(C,"class","align-middle"),_(U,"class","align-middle d-none d-md-table-cell"),_(N,"class","btn btn-secondary "),_(T,"class","align-middle d-none d-md-table-cell"),_(E,"class","btn btn-danger float-right"),_(S,"class","align-middle d-none d-md-table-cell"),_(r,"class","svelte-1n1kl2d"),L=[O(l,"click",t.expandOrder),O(s,"click",t.expandOrder),O(d,"click",t.expandOrder),O(m,"click",t.expandOrder),O(C,"click",t.expandOrder),O(U,"click",t.expandOrder),O(N,"click",t.expandOrder),O(E,"click",t.click_handler)]},m(e,n){b(e,r,n),h(r,l),h(l,a),h(r,o),h(r,s),h(s,i),h(r,c),h(r,d),h(d,u),h(r,p),h(r,m),h(m,f),h(r,g),h(r,C),h(C,k),h(r,A),h(r,U),h(U,V),h(r,D),h(r,T),h(T,N),h(r,F),h(r,S),h(S,E),t.tr_1_binding(r)},p(e,t){e.order&&j!==(j=t.order.productNumber+"")&&w(a,j),e.order&&I!==(I=t.order.productName+"")&&w(i,I),e.order&&B!==(B=t.order.customer.name+"")&&w(u,B),e.order&&M!==(M=t.order.responsible.name+"")&&w(f,M),e.order&&H!==(H=t.order.status+"")&&w(k,H),e.order&&P!==(P=new Date(t.order.date).toDateString()+"")&&w(V,P)},i:e,o:e,d(e){e&&v(r),t.tr_1_binding(null),n(L)}}}function Re(e){let t,r,l;const n=new He({props:{deleteOrder:e.deleteOrder,order:e.order,expandOrder:e.expandOrder,deleteOrder:e.deleteOrder}});return{c(){t=x("tr"),r=x("td"),re(n.$$.fragment),_(r,"id","expandedContent"),_(r,"colspan","7"),U(t,"cursor","initial"),_(t,"class","svelte-1n1kl2d")},m(e,a){b(e,t,a),h(t,r),le(n,r,null),l=!0},p(e,t){const r={};e.deleteOrder&&(r.deleteOrder=t.deleteOrder),e.order&&(r.order=t.order),e.deleteOrder&&(r.deleteOrder=t.deleteOrder),n.$set(r)},i(e){l||(Y(n.$$.fragment,e),l=!0)},o(e){Z(n.$$.fragment,e),l=!1},d(e){e&&v(t),ne(n)}}}function qe(e){let t,r,l,n;const a=[Re,Pe],o=[];return t=1,r=o[1]=a[1](e),{c(){r.c(),l=k()},m(e,t){o[1].m(e,t),b(e,l,t),n=!0},p(e,t){r.p(e,t)},i(e){n||(Y(r),n=!0)},o(e){Z(r),n=!1},d(e){o[1].d(e),e&&v(l)}}}function Qe(e,t,r){let l,{deleteOrder:n}=t,{order:a}=t,{apiCall:o}=t,{getAllOrders:s}=t;return e.$set=e=>{"deleteOrder"in e&&r("deleteOrder",n=e.deleteOrder),"order"in e&&r("order",a=e.order),"apiCall"in e&&r("apiCall",o=e.apiCall),"getAllOrders"in e&&r("getAllOrders",s=e.getAllOrders)},{tr:l,deleteOrder:n,order:a,apiCall:o,getAllOrders:s,expandOrder:function(){me.set({order:a}),pe.set("expandedOrder")},click_handler:()=>n(a._id),tr_1_binding:function(e){j[e?"unshift":"push"](()=>{r("tr",l=e)})}}}class Je extends se{constructor(e){super(),oe(this,e,Qe,qe,o,{deleteOrder:0,order:0,apiCall:0,getAllOrders:0})}}function Ke(t){let r,l,a,o,s,i,c,d,u,p,m,f,g,C,k;return{c(){r=x("nav"),(l=x("span")).textContent="Admin panel",a=y(),o=x("div"),s=x("div"),i=x("a"),c=$("Beställningar"),u=y(),p=x("a"),m=$("Hantera användare"),g=y(),(C=x("a")).textContent="Logga ut",_(l,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",d="nav-item nav-link "+("orders"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        "),_(C,"class","nav-item nav-link"),_(C,"href","#"),_(s,"class","navbar-nav"),_(o,"class"," navbar"),_(o,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),k=[O(i,"click",t.click_handler),O(p,"click",t.click_handler_1),O(C,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,l),h(r,a),h(r,o),h(o,s),h(s,i),h(i,c),h(s,u),h(s,p),h(p,m),h(s,g),h(s,C)},p(e,t){e.urlValue&&d!==(d="nav-item nav-link "+("orders"===t.urlValue?"active":""))&&_(i,"class",d),e.urlValue&&f!==(f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&v(r),n(k)}}}function We(e,t){e&&e.preventDefault(),pe.set(t)}function Ge(e,t,r){let l,{apiCall:n}=t;pe.subscribe(e=>r("urlValue",l=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall)},{apiCall:n,urlValue:l,logOut:async function(e){try{e&&e.preventDefault(),(await n("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>We(e,"orders"),click_handler_1:e=>We(e,"manageUsers")}}class ze extends se{constructor(e){super(),oe(this,e,Ge,Ke,o,{apiCall:0})}}function Xe(e,t,r){const l=Object.create(e);return l.order=t[r],l}function Ye(e){let t;const r=new Je({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,order:e.order,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.getAllOrders&&(l.getAllOrders=t.getAllOrders),e.showOrders&&(l.order=t.order),e.deleteOrder&&(l.deleteOrder=t.deleteOrder),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Ze(e){let t,r,l,a,o,s,i,c,d,u,p,m,f,g,$,k,w,U,V,D,T,N,F,S,E,L,j,I,B,M=e.showOrders,H=[];for(let t=0;t<M.length;t+=1)H[t]=Ye(Xe(e,M,t));const P=e=>Z(H[e],1,1,()=>{H[e]=null});return{c(){t=x("div"),(r=x("div")).innerHTML="<h2>Alla beställningar</h2>",l=y(),a=x("table"),(o=x("caption")).textContent="Klicka på en beställning för mer information",s=y(),i=x("thead"),c=x("tr"),(d=x("th")).textContent="#",u=y(),(p=x("th")).textContent="Namn",m=y(),(f=x("th")).textContent="Beställare",g=y(),($=x("th")).textContent="Ansvarig",k=y(),(w=x("th")).textContent="Status",U=y(),(V=x("th")).textContent="Datum",D=y(),T=x("th"),N=x("form"),F=x("input"),S=y(),(E=x("button")).textContent="Sök",L=y(),j=x("tbody");for(let e=0;e<H.length;e+=1)H[e].c();_(r,"class","card-header"),_(d,"scope","col"),_(p,"scope","col"),_(f,"scope","col "),_(f,"class","d-none d-sm-table-cell"),_($,"scope","col "),_($,"class","d-none d-md-table-cell"),_(w,"scope","col"),_(V,"scope","col "),_(V,"class","d-none d-md-table-cell"),_(F,"class","form-control mr-sm-2 "),_(F,"type","search"),_(F,"placeholder","Sök"),_(F,"aria-label","Sök"),_(E,"class","btn btn-success bg my-2 my-sm-0"),_(E,"type","submit"),_(N,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(T,"scope","col"),_(T,"colspan","2"),_(i,"class","thead-dark"),_(a,"class","table table-striped table-hover table-bordered "),_(t,"class","card m-sm-4 m-2 text-center"),B=[O(F,"input",e.input_input_handler),O(N,"submit",e.filter)]},m(n,v){b(n,t,v),h(t,r),h(t,l),h(t,a),h(a,o),h(a,s),h(a,i),h(i,c),h(c,d),h(c,u),h(c,p),h(c,m),h(c,f),h(c,g),h(c,$),h(c,k),h(c,w),h(c,U),h(c,V),h(c,D),h(c,T),h(T,N),h(N,F),A(F,e.searchQuery),h(N,S),h(N,E),h(a,L),h(a,j);for(let e=0;e<H.length;e+=1)H[e].m(j,null);I=!0},p(e,t){if(e.searchQuery&&A(F,t.searchQuery),e.apiCall||e.getAllOrders||e.showOrders||e.deleteOrder){let r;for(M=t.showOrders,r=0;r<M.length;r+=1){const l=Xe(t,M,r);H[r]?(H[r].p(e,l),Y(H[r],1)):(H[r]=Ye(l),H[r].c(),Y(H[r],1),H[r].m(j,null))}for(z(),r=M.length;r<H.length;r+=1)P(r);X()}},i(e){if(!I){for(let e=0;e<M.length;e+=1)Y(H[e]);I=!0}},o(e){H=H.filter(Boolean);for(let e=0;e<H.length;e+=1)Z(H[e]);I=!1},d(e){e&&v(t),C(H,e),n(B)}}}function et(e,t,r){let l,{apiCall:n}=t,{getAllOrders:a}=t,{deleteOrder:o}=t,s="",{allOrders:i=[]}=t;function c(e){return e.toLowerCase().search(s.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall),"getAllOrders"in e&&r("getAllOrders",a=e.getAllOrders),"deleteOrder"in e&&r("deleteOrder",o=e.deleteOrder),"allOrders"in e&&r("allOrders",i=e.allOrders)},e.$$.update=(e={allOrders:1})=>{e.allOrders&&r("showOrders",l=i)},{apiCall:n,getAllOrders:a,deleteOrder:o,searchQuery:s,allOrders:i,filter:function(e){e&&e.preventDefault(),r("showOrders",l=i.filter(e=>e.productNumber==s||c(e.productName)||c(e.responsible.name)||c(e.responsible.email)||c(e.customer.name)||c(e.customer.email)||c(e.status)))},showOrders:l,input_input_handler:function(){s=this.value,r("searchQuery",s)}}}class tt extends se{constructor(e){super(),oe(this,e,et,Ze,o,{apiCall:0,getAllOrders:0,deleteOrder:0,allOrders:0})}}function rt(t){let r,l;return{c(){(r=x("button")).textContent="Gör admin",_(r,"type","button"),_(r,"class","btn btn-warning"),l=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),l()}}}function lt(t){let r,l;return{c(){(r=x("button")).textContent="Ta bort admin",_(r,"type","button"),_(r,"class","btn btn-warning"),l=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),l()}}}function nt(t){let r,l,n,a,o,s,i,c,d,u,p,m,f=t.user.name+"",g=t.user.email+"";function C(e,t){return t.user.admin?lt:rt}let k=C(0,t),A=k(t);return{c(){r=x("tr"),l=x("td"),n=$(f),a=y(),o=x("td"),s=$(g),i=y(),c=x("td"),A.c(),d=y(),u=x("td"),(p=x("button")).textContent="Radera användare",_(p,"type","button"),_(p,"class","btn btn-danger"),m=O(p,"click",t.deleteUser)},m(e,t){b(e,r,t),h(r,l),h(l,n),h(r,a),h(r,o),h(o,s),h(r,i),h(r,c),A.m(c,null),h(r,d),h(r,u),h(u,p)},p(e,t){e.user&&f!==(f=t.user.name+"")&&w(n,f),e.user&&g!==(g=t.user.email+"")&&w(s,g),k===(k=C(0,t))&&A?A.p(e,t):(A.d(1),(A=k(t))&&(A.c(),A.m(c,null)))},i:e,o:e,d(e){e&&v(r),A.d(),m()}}}function at(e,t,r){let{user:l}=t,{getAllUsers:n}=t,{apiCall:a}=t;return e.$set=e=>{"user"in e&&r("user",l=e.user),"getAllUsers"in e&&r("getAllUsers",n=e.getAllUsers),"apiCall"in e&&r("apiCall",a=e.apiCall)},{user:l,getAllUsers:n,apiCall:a,deleteUser:async function(){const e=l._id;try{(await a("deleteUser",JSON.stringify({id:e}))).error?alert("Kunde inte radera användare"):(alert("användare raderad"),n())}catch(e){console.log(e)}},toggleUserAdmin:async function(){const e=l._id;try{(await a("/toggleUserAdmin",JSON.stringify({id:e}))).error?alert("Ett fel uppstod försök igen senare"):n()}catch(e){console.log(e)}}}}class ot extends se{constructor(e){super(),oe(this,e,at,nt,o,{user:0,getAllUsers:0,apiCall:0})}}function st(e,t,r){const l=Object.create(e);return l.user=t[r],l}function it(e){let t;const r=new ot({props:{getAllUsers:e.getAllUsers,apiCall:e.apiCall,user:e.user}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.getAllUsers&&(l.getAllUsers=t.getAllUsers),e.apiCall&&(l.apiCall=t.apiCall),e.showUsers&&(l.user=t.user),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function ct(e){let t,r,l,a,o,s,i,c,d,u,p,m,f,g,$,k,w,U,V,D,T=e.showUsers,N=[];for(let t=0;t<T.length;t+=1)N[t]=it(st(e,T,t));const F=e=>Z(N[e],1,1,()=>{N[e]=null});return{c(){t=x("div"),r=x("div"),(l=x("div")).innerHTML="<h2>Alla användare</h2>",a=y(),o=x("div"),s=x("table"),i=x("thead"),(c=x("th")).textContent="Namn",d=y(),(u=x("th")).textContent="Email",p=y(),m=x("th"),f=x("form"),g=x("input"),$=y(),(k=x("button")).textContent="Sök",w=y(),U=x("tbody");for(let e=0;e<N.length;e+=1)N[e].c();_(l,"class","card-header"),_(c,"scope","col"),_(u,"scope","col "),_(g,"class","form-control mr-sm-2 "),_(g,"type","search"),_(g,"placeholder","Sök"),_(g,"aria-label","Sök"),_(k,"class","btn btn-success bg my-2 my-sm-0"),_(k,"type","submit"),_(f,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(m,"scope","col"),_(m,"colspan","2"),_(i,"class","thead-dark"),_(s,"class","table table-striped table-bordered table-hover"),_(o,"class","table-responsive text-left"),_(r,"class","card text-center"),_(t,"class","container-fluid "),D=[O(g,"input",e.input_input_handler),O(f,"submit",e.search)]},m(n,v){b(n,t,v),h(t,r),h(r,l),h(r,a),h(r,o),h(o,s),h(s,i),h(i,c),h(i,d),h(i,u),h(i,p),h(i,m),h(m,f),h(f,g),A(g,e.searchQuery),h(f,$),h(f,k),h(s,w),h(s,U);for(let e=0;e<N.length;e+=1)N[e].m(U,null);V=!0},p(e,t){if(e.searchQuery&&A(g,t.searchQuery),e.getAllUsers||e.apiCall||e.showUsers){let r;for(T=t.showUsers,r=0;r<T.length;r+=1){const l=st(t,T,r);N[r]?(N[r].p(e,l),Y(N[r],1)):(N[r]=it(l),N[r].c(),Y(N[r],1),N[r].m(U,null))}for(z(),r=T.length;r<N.length;r+=1)F(r);X()}},i(e){if(!V){for(let e=0;e<T.length;e+=1)Y(N[e]);V=!0}},o(e){N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)Z(N[e]);V=!1},d(e){e&&v(t),C(N,e),n(D)}}}function dt(e,t,r){let l,{apiCall:n}=t,a="",{allUsers:o=[]}=t,{getAllUsers:s}=t;function i(e){return console.log(e,a),console.log(e.toLowerCase().search(a.toLocaleLowerCase())>-1),e.toLowerCase().search(a.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall),"allUsers"in e&&r("allUsers",o=e.allUsers),"getAllUsers"in e&&r("getAllUsers",s=e.getAllUsers)},e.$$.update=(e={allUsers:1})=>{e.allUsers&&r("showUsers",l=o)},{apiCall:n,searchQuery:a,allUsers:o,getAllUsers:s,search:function(e){e&&e.preventDefault(),console.log(o),r("showUsers",l=o.filter(e=>i(e.name)||i(e.email)||"admin"===a&&e.admin))},showUsers:l,input_input_handler:function(){a=this.value,r("searchQuery",a)}}}class ut extends se{constructor(e){super(),oe(this,e,dt,ct,o,{apiCall:0,allUsers:0,getAllUsers:0})}}function pt(e){let t;const r=new ut({props:{apiCall:e.apiCall,getAllUsers:e.getAllUsers,allUsers:e.allUsers}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.allUsers&&(l.allUsers=t.allUsers),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function mt(e){let t;const r=new He({props:{order:e.paramsValue.order,apiCall:e.apiCall,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.paramsValue&&(l.order=t.paramsValue.order),e.apiCall&&(l.apiCall=t.apiCall),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function ft(e){let t;const r=new tt({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,allOrders:e.allOrders,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.allOrders&&(l.allOrders=t.allOrders),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function gt(e){let t,r,l,n,a,o;const s=new ze({props:{apiCall:e.apiCall}}),i=[ft,mt,pt],c=[];function d(e,t){return"orders"===t.urlValue?0:"expandedOrder"===t.urlValue?1:2}return l=d(0,e),n=c[l]=i[l](e),{c(){t=x("header"),re(s.$$.fragment),r=y(),n.c(),a=k()},m(e,n){b(e,t,n),le(s,t,null),b(e,r,n),c[l].m(e,n),b(e,a,n),o=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),s.$set(r);let o=l;(l=d(0,t))===o?c[l].p(e,t):(z(),Z(c[o],1,1,()=>{c[o]=null}),X(),(n=c[l])||(n=c[l]=i[l](t)).c(),Y(n,1),n.m(a.parentNode,a))},i(e){o||(Y(s.$$.fragment,e),Y(n),o=!0)},o(e){Z(s.$$.fragment,e),Z(n),o=!1},d(e){e&&v(t),ne(s),e&&v(r),c[l].d(e),e&&v(a)}}}function ht(e,t,r){let l,n,{apiCall:a}=t;me.subscribe(e=>r("paramsValue",n=e)),pe.subscribe(e=>r("urlValue",l=e));let o=[],s=[];async function i(){try{const e=await a("/getAllorders");e.error&&console.log("error",e.message),console.log("call",e),r("allOrders",o=e.data),console.log("allOrders",o)}catch(e){console.log(e)}}async function c(){try{const e=await a("/getAllUsers");console.log("call",e),e.error?alert("Kunde inte hämta anvädare från servern"):r("allUsers",s=e.users)}catch(e){console.log(e)}}return c(),i(),e.$set=e=>{"apiCall"in e&&r("apiCall",a=e.apiCall)},{apiCall:a,urlValue:l,paramsValue:n,allOrders:o,allUsers:s,getAllOrders:i,getAllUsers:c,deleteOrder:async function(e){try{const t=await a("/deleteOrder",JSON.stringify({id:e}));console.log(t),t.error||(console.log("success"),pe.set("orders"),i())}catch(e){console.log(e)}}}}class bt extends se{constructor(e){super(),oe(this,e,ht,gt,o,{apiCall:0})}}function vt(t){let r,l,n,a,o,s,i,c,d,u,p,m,f,g,C,k,O,A,U=t.order.productNumber+"",V=t.order.productName+"",D=t.order.customer.name+"",T=t.order.responsible.name+"",N=t.order.status+"",F=new Date(t.order.date).toDateString()+"";return{c(){r=x("tr"),l=x("th"),n=$(U),a=y(),o=x("td"),s=$(V),i=y(),c=x("td"),d=$(D),u=y(),p=x("td"),m=$(T),f=y(),g=x("td"),C=$(N),k=y(),O=x("td"),A=$(F),_(l,"scope","col")},m(e,t){b(e,r,t),h(r,l),h(l,n),h(r,a),h(r,o),h(o,s),h(r,i),h(r,c),h(c,d),h(r,u),h(r,p),h(p,m),h(r,f),h(r,g),h(g,C),h(r,k),h(r,O),h(O,A)},p(e,t){e.order&&U!==(U=t.order.productNumber+"")&&w(n,U),e.order&&V!==(V=t.order.productName+"")&&w(s,V),e.order&&D!==(D=t.order.customer.name+"")&&w(d,D),e.order&&T!==(T=t.order.responsible.name+"")&&w(m,T),e.order&&N!==(N=t.order.status+"")&&w(C,N),e.order&&F!==(F=new Date(t.order.date).toDateString()+"")&&w(A,F)},i:e,o:e,d(e){e&&v(r)}}}function Ct(e,t,r){let{order:l}=t;return e.$set=e=>{"order"in e&&r("order",l=e.order)},{order:l}}class xt extends se{constructor(e){super(),oe(this,e,Ct,vt,o,{order:0})}}function $t(e,t,r){const l=Object.create(e);return l.order=t[r],l}function yt(e){let t;const r=new xt({props:{order:e.order}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.orders&&(l.order=t.order),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function kt(e){let t,r,l,n,a,o,s,i;const c=new De({props:{apiCall:e.apiCall}});let d=e.orders,u=[];for(let t=0;t<d.length;t+=1)u[t]=yt($t(e,d,t));const p=e=>Z(u[e],1,1,()=>{u[e]=null});return{c(){t=x("header"),re(c.$$.fragment),r=y(),l=x("div"),n=x("table"),(a=x("thead")).innerHTML='<tr><th scope="col">#</th> \n        <th scope="col">Namn</th> \n        <th scope="col " class="d-none d-sm-table-cell">Beställare</th> \n        <th scope="col " class="d-none d-md-table-cell">Ansvarig</th> \n        <th scope="col">Status</th> \n        <th scope="col " class="d-none d-md-table-cell">Datum</th></tr>',o=y(),s=x("tbody");for(let e=0;e<u.length;e+=1)u[e].c();_(a,"class","thead-dark"),_(n,"class","table table-striped table-hover table-bordered "),_(l,"class","card m-sm-4 m-2 text-center")},m(e,d){b(e,t,d),le(c,t,null),b(e,r,d),b(e,l,d),h(l,n),h(n,a),h(n,o),h(n,s);for(let e=0;e<u.length;e+=1)u[e].m(s,null);i=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),c.$set(r),e.orders){let r;for(d=t.orders,r=0;r<d.length;r+=1){const l=$t(t,d,r);u[r]?(u[r].p(e,l),Y(u[r],1)):(u[r]=yt(l),u[r].c(),Y(u[r],1),u[r].m(s,null))}for(z(),r=d.length;r<u.length;r+=1)p(r);X()}},i(e){if(!i){Y(c.$$.fragment,e);for(let e=0;e<d.length;e+=1)Y(u[e]);i=!0}},o(e){Z(c.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)Z(u[e]);i=!1},d(e){e&&v(t),ne(c),e&&v(r),e&&v(l),C(u,e)}}}function Ot(e,t,r){let{apiCall:l}=t,n=[];return async function(){try{const e=await l("/getMyOrders","");console.log("call",e),e.error?alert("Kunde inte hämta din beställningar"):r("orders",n=e.orders)}catch(e){console.log(e)}}(),e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall)},{apiCall:l,orders:n}}class _t extends se{constructor(e){super(),oe(this,e,Ot,kt,o,{apiCall:0})}}let wt=ue({});function At(t){let r;return{c(){r=$("Checking route")},m(e,t){b(e,r,t)},p:e,i:e,o:e,d(e){e&&v(r)}}}function Ut(t){let r;const l=new _t({props:{apiCall:St}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Vt(e){let t;const r=new He({props:{order:e.selectedOrderValue}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.selectedOrderValue&&(l.order=t.selectedOrderValue),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Dt(e){let t;const r=new Le({props:{user:e.userValue,apiCall:St}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.userValue&&(l.user=t.userValue),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Tt(t){let r;const l=new bt({props:{apiCall:St}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Nt(t){let r;const l=new $e({props:{apiCall:St}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Ft(e){let t,r,l,n,a;const o=[Nt,Tt,Dt,Vt,Ut,At],s=[];function i(e,r){return"authenticate"===r.urlValue?0:"orders"===r.urlValue||"manageUsers"===r.urlValue||"expandedOrder"===r.urlValue?1:"makeOrder"===r.urlValue?2:((null==t||e.urlValue)&&(t=!("expandedOrder"!==r.urlValue.substring(0,14))),t?3:"myOrders"===r.urlValue?4:5)}return r=i(null,e),l=s[r]=o[r](e),{c(){l.c(),n=k()},m(e,t){s[r].m(e,t),b(e,n,t),a=!0},p(e,t){let a=r;(r=i(e,t))===a?s[r].p(e,t):(z(),Z(s[a],1,1,()=>{s[a]=null}),X(),(l=s[r])||(l=s[r]=o[r](t)).c(),Y(l,1),l.m(n.parentNode,n))},i(e){a||(Y(l),a=!0)},o(e){Z(l),a=!1},d(e){s[r].d(e),e&&v(n)}}}function St(e,t,r,l){const n=!("multipart/form-data"===r);return console.log(t),new Promise((r,a)=>{const o={method:"POST",mode:"cors",credentials:"include",body:t};n&&(o.headers={"Content-Type":"application/json"}),console.log(o),fetch(e,o).then(e=>e.json()).then(e=>{console.log("answer"),e.error?l||"NoAuth"!==e.message?r(e):(console.log("Logged out"),alert("Du har blivit utloggad"),pe.set("authenticate")):(r(e),console.log(e))}).catch(e=>a(e))})}function Et(e,t,r){let l,n,a;return wt.subscribe(e=>r("selectedOrderValue",a=e)),pe.subscribe(e=>r("urlValue",l=e)),async function(){try{console.log("route user");const e=await St("/checkAccount",void 0,void 0,!0);console.log("user",e),r("userValue",n=e);const t=function(e){try{return e.authenticated?e.admin?"orders":"makeOrder":"authenticate"}catch(e){console.log(e)}}(e);console.log(t),pe.set(t)}catch(e){console.log("err"),console.log(e)}}(),e.$$.update=(e={urlValue:1})=>{e.urlValue&&console.log(l)},{urlValue:l,userValue:n,selectedOrderValue:a}}return new class extends se{constructor(e){super(),oe(this,e,Et,Ft,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
