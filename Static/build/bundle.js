var app=function(){"use strict";function e(){}const t=e=>e;function r(e){return e()}function l(){return Object.create(null)}function n(e){e.forEach(r)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e){return null==e?"":e}const i="undefined"!=typeof window;let c=i?()=>window.performance.now():()=>Date.now(),d=i?e=>requestAnimationFrame(e):e;const u=new Set;let p,m=!1;function f(){u.forEach(e=>{e[0](c())||(u.delete(e),e[1]())}),m=u.size>0,m&&d(f)}function g(e){let t;return m||(m=!0,d(f)),{promise:new Promise(r=>{u.add(t=[e,r])}),abort(){u.delete(t)}}}function h(e,t){e.appendChild(t)}function b(e,t,r){e.insertBefore(t,r||null)}function v(e){e.parentNode.removeChild(e)}function x(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function C(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function y(){return $(" ")}function k(){return $("")}function O(e,t,r,l){return e.addEventListener(t,r,l),()=>e.removeEventListener(t,r,l)}function _(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){(null!=t||e.value)&&(e.value=t)}function V(e,t,r,l){e.style.setProperty(t,r,l?"important":"")}function U(e,t){for(let r=0;r<e.options.length;r+=1){const l=e.options[r];if(l.__value===t)return void(l.selected=!0)}}let T,D=0,N={};function F(e,t,r,l,n,a,s,o=0){const i=16.666/l;let c="{\n";for(let e=0;e<=1;e+=i){const l=t+(r-t)*a(e);c+=100*e+`%{${s(l,1-l)}}\n`}const d=c+`100% {${s(r,1-r)}}\n}`,u=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(d)}_${o}`;if(!N[u]){if(!p){const e=C("style");document.head.appendChild(e),p=e.sheet}N[u]=!0,p.insertRule(`@keyframes ${u} ${d}`,p.cssRules.length)}const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${u} ${l}ms linear ${n}ms 1 both`,D+=1,u}function L(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--D&&d(()=>{if(D)return;let e=p.cssRules.length;for(;e--;)p.deleteRule(e);N={}})}function S(e){T=e}const E=[],j=[],I=[],B=[],M=Promise.resolve();let H,P=!1;function R(e){I.push(e)}function q(){const e=new Set;do{for(;E.length;){const e=E.shift();S(e),Q(e.$$)}for(;j.length;)j.pop()();for(let t=0;t<I.length;t+=1){const r=I[t];e.has(r)||(r(),e.add(r))}I.length=0}while(E.length);for(;B.length;)B.pop()();P=!1}function Q(e){null!==e.fragment&&(e.update(e.dirty),n(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(R))}function K(){return H||(H=Promise.resolve(),H.then(()=>{H=null})),H}function J(e,t,r){e.dispatchEvent(function(e,t){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!1,t),r}(`${t?"intro":"outro"}${r}`))}const W=new Set;let G;function z(){G={r:0,c:[],p:G}}function X(){G.r||n(G.c),G=G.p}function Y(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Z(e,t,r,l){if(e&&e.o){if(W.has(e))return;W.add(e),G.c.push(()=>{W.delete(e),l&&(r&&e.d(1),l())}),e.o(t)}}const ee={duration:0};function te(r,l,s,o){let i=l(r,s),d=o?0:1,u=null,p=null,m=null;function f(){m&&L(r,m)}function h(e,t){const r=e.b-d;return t*=Math.abs(r),{a:d,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(l){const{delay:a=0,duration:s=300,easing:o=t,tick:b=e,css:v}=i||ee,x={start:c()+a,b:l};l||(x.group=G,G.r+=1),u?p=x:(v&&(f(),m=F(r,d,l,s,a,o,v)),l&&b(0,1),u=h(x,s),R(()=>J(r,l,"start")),g(e=>{if(p&&e>p.start&&(u=h(p,s),p=null,J(r,u.b,"start"),v&&(f(),m=F(r,d,u.b,u.duration,0,o,i.css))),u)if(e>=u.end)b(d=u.b,1-d),J(r,u.b,"end"),p||(u.b?f():--u.group.r||n(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;d=u.a+u.d*o(t/u.duration),b(d,1-d)}return!(!u&&!p)}))}return{run(e){a(i)?K().then(()=>{i=i(),b(e)}):b(e)},end(){f(),u=p=null}}}function re(e){e&&e.c()}function le(e,t,l){const{fragment:s,on_mount:o,on_destroy:i,after_update:c}=e.$$;s&&s.m(t,l),R(()=>{const t=o.map(r).filter(a);i?i.push(...t):n(t),e.$$.on_mount=[]}),c.forEach(R)}function ne(e,t){const r=e.$$;null!==r.fragment&&(n(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx={})}function ae(e,t){e.$$.dirty||(E.push(e),P||(P=!0,M.then(q)),e.$$.dirty=l()),e.$$.dirty[t]=!0}function se(t,r,a,s,o,i){const c=T;S(t);const d=r.props||{},u=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:o,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:l(),dirty:null};let p=!1;u.ctx=a?a(t,d,(e,r,l=r)=>(u.ctx&&o(u.ctx[e],u.ctx[e]=l)&&(u.bound[e]&&u.bound[e](l),p&&ae(t,e)),r)):d,u.update(),p=!0,n(u.before_update),u.fragment=!!s&&s(u.ctx),r.target&&(r.hydrate?u.fragment&&u.fragment.l(function(e){return Array.from(e.childNodes)}(r.target)):u.fragment&&u.fragment.c(),r.intro&&Y(t.$$.fragment),le(t,r.target,r.anchor),q()),S(c)}class oe{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(){}}function ie(e){const t=e-1;return t*t*t+1}function ce(e,{delay:t=0,duration:r=400,easing:l=ie}){const n=getComputedStyle(e),a=+n.opacity,s=parseFloat(n.height),o=parseFloat(n.paddingTop),i=parseFloat(n.paddingBottom),c=parseFloat(n.marginTop),d=parseFloat(n.marginBottom),u=parseFloat(n.borderTopWidth),p=parseFloat(n.borderBottomWidth);return{delay:t,duration:r,easing:l,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*s}px;`+`padding-top: ${e*o}px;`+`padding-bottom: ${e*i}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*d}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*p}px;`}}const de=[];function ue(t,r=e){let l;const n=[];function a(e){if(s(t,e)&&(t=e,l)){const e=!de.length;for(let e=0;e<n.length;e+=1){const r=n[e];r[1](),de.push(r,t)}if(e){for(let e=0;e<de.length;e+=2)de[e][0](de[e+1]);de.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(s,o=e){const i=[s,o];return n.push(i),1===n.length&&(l=r(a)||e),s(t),()=>{const e=n.indexOf(i);-1!==e&&n.splice(e,1),0===n.length&&(l(),l=null)}}}}const pe=ue(""),me=ue({});function fe(e){let t,r,l,n;return{c(){t=C("div"),r=$(e.alertText),_(t,"class","alert alert-danger svelte-1r1bdcq"),_(t,"role","alert")},m(e,l){b(e,t,l),h(t,r),n=!0},p(e,t){n&&!e.alertText||w(r,t.alertText)},i(e){n||(R(()=>{l||(l=te(t,ce,{},!0)),l.run(1)}),n=!0)},o(e){l||(l=te(t,ce,{},!1)),l.run(0),n=!1},d(e){e&&v(t),e&&l&&l.end()}}}function ge(e){let t,r,l,a,s,o,i,c,d,u,p,m="Registera"===e.headerText&&be(e);return{c(){t=C("form"),r=C("div"),m&&m.c(),l=y(),a=C("label"),a.textContent="Email address",s=y(),o=C("input"),i=y(),c=C("button"),c.textContent="Vidare",_(a,"for","exampleInputEmail1"),_(o,"type","email"),_(o,"class","form-control"),_(o,"id","exampleInputEmail1"),_(o,"aria-describedby","emailHelp"),_(o,"placeholder","Din email"),_(r,"class","form-group"),_(c,"type","submit"),_(c,"class","btn btn-primary"),p=[O(o,"input",e.input_input_handler_2),O(t,"submit",e.login)]},m(n,d){b(n,t,d),h(t,r),m&&m.m(r,null),h(r,l),h(r,a),h(r,s),h(r,o),A(o,e.email),h(t,i),h(t,c),u=!0},p(e,t){"Registera"===t.headerText?m?m.p(e,t):(m=be(t),m.c(),m.m(r,l)):m&&(m.d(1),m=null),e.email&&o.value!==t.email&&A(o,t.email)},i(e){u||(R(()=>{d||(d=te(t,ce,{},!0)),d.run(1)}),u=!0)},o(e){d||(d=te(t,ce,{},!1)),d.run(0),u=!1},d(e){e&&v(t),m&&m.d(),e&&d&&d.end(),n(p)}}}function he(e){let t,r,l,a,s,o,i,c,d,u,p,m,f;return{c(){t=C("form"),r=C("div"),l=C("label"),l.textContent="Verifikation kod",a=y(),s=C("input"),o=y(),i=C("small"),c=$(e.feedbackInformation),d=y(),u=C("button"),u.textContent="Vidare",_(l,"for","verficationCode"),_(s,"autocomplete","off"),_(s,"type","text"),_(s,"class","form-control"),_(s,"id","verficationCode"),_(s,"aria-describedby","emailHelp"),_(s,"placeholder","Skriv in verifikations kod"),_(i,"id","emailHelp"),_(i,"class","form-text text-muted"),_(r,"class","form-group"),_(u,"type","submit"),_(u,"class","btn btn-primary"),f=[O(s,"input",e.input_input_handler),O(t,"submit",e.verifyWithCode)]},m(n,p){b(n,t,p),h(t,r),h(r,l),h(r,a),h(r,s),A(s,e.verificationCode),h(r,o),h(r,i),h(i,c),h(t,d),h(t,u),m=!0},p(e,t){e.verificationCode&&s.value!==t.verificationCode&&A(s,t.verificationCode),m&&!e.feedbackInformation||w(c,t.feedbackInformation)},i(e){m||(R(()=>{p||(p=te(t,ce,{},!0)),p.run(1)}),m=!0)},o(e){p||(p=te(t,ce,{},!1)),p.run(0),m=!1},d(e){e&&v(t),e&&p&&p.end(),n(f)}}}function be(e){let t,r,l,n,a;return{c(){t=C("div"),r=C("label"),r.textContent="Name",l=y(),n=C("input"),_(r,"for","exampleInputPassword1"),_(n,"type","text"),_(n,"class","form-control"),_(n,"id","nameInput"),_(n,"placeholder","Ditt name"),_(t,"class","form-group"),a=O(n,"input",e.input_input_handler_1)},m(a,s){b(a,t,s),h(t,r),h(t,l),h(t,n),A(n,e.name)},p(e,t){e.name&&n.value!==t.name&&A(n,t.name)},d(e){e&&v(t),a()}}}function ve(e){let t;return{c(){t=C("div"),t.innerHTML='<span class="sr-only">Loading...</span>',_(t,"class","spinner-border text-primary svelte-1r1bdcq"),_(t,"role","status")},m(e,r){b(e,t,r)},d(e){e&&v(t)}}}function xe(e){let t,r,l,n,a,s,i,c,d,u,p,m,f,g,x,k,O,A,V=e.error&&fe(e);const U=[he,ge],T=[];function D(e,t){return t.verify?0:1}c=D(0,e),d=T[c]=U[c](e);let N=e.loading&&ve();return{c(){t=C("main"),V&&V.c(),r=y(),l=C("div"),n=C("header"),a=C("h1"),s=$(e.headerText),i=y(),d.c(),u=y(),p=C("div"),N&&N.c(),m=y(),f=C("div"),g=C("div"),x=$(e.progress),_(g,"class","progress-bar"),_(g,"role","progressbar"),_(g,"style",k="width:"+e.progress),_(g,"aria-valuenow","25"),_(g,"aria-valuemin","0"),_(g,"aria-valuemax","100"),_(f,"class","progress svelte-1r1bdcq"),_(p,"id","progressContainer"),_(p,"class","svelte-1r1bdcq"),_(l,"id","login"),_(l,"class","svelte-1r1bdcq"),_(t,"class",O=o("100%"===e.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq")},m(e,o){b(e,t,o),V&&V.m(t,null),h(t,r),h(t,l),h(l,n),h(n,a),h(a,s),h(l,i),T[c].m(l,null),h(l,u),h(l,p),N&&N.m(p,null),h(p,m),h(p,f),h(f,g),h(g,x),A=!0},p(e,n){n.error?V?(V.p(e,n),Y(V,1)):(V=fe(n),V.c(),Y(V,1),V.m(t,r)):V&&(z(),Z(V,1,1,()=>{V=null}),X()),A&&!e.headerText||w(s,n.headerText);let a=c;c=D(0,n),c===a?T[c].p(e,n):(z(),Z(T[a],1,1,()=>{T[a]=null}),X(),d=T[c],d||(d=T[c]=U[c](n),d.c()),Y(d,1),d.m(l,u)),n.loading?N||(N=ve(),N.c(),N.m(p,m)):N&&(N.d(1),N=null),A&&!e.progress||w(x,n.progress),(!A||e.progress&&k!==(k="width:"+n.progress))&&_(g,"style",k),(!A||e.progress&&O!==(O=o("100%"===n.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq"))&&_(t,"class",O)},i(e){A||(Y(V),Y(d),A=!0)},o(e){Z(V),Z(d),A=!1},d(e){e&&v(t),V&&V.d(),T[c].d(),N&&N.d()}}}function Ce(e,t,r){let l,n,a,s,{apiCall:o}=t,i=!1,c="Logga in/Registera",d=!1,u="0%",p="",m=!1,f="";return e.$set=e=>{"apiCall"in e&&r("apiCall",o=e.apiCall)},{apiCall:o,email:l,name:n,headerText:c,verify:d,verificationCode:a,loading:s,progress:u,alertText:p,error:m,feedbackInformation:f,login:async function(e){if(e.preventDefault(),console.log(i),i)!async function(e){e.preventDefault();try{r("loading",s=!0);const e=await o("/registerUser",JSON.stringify({name:n,email:l}));if(r("loading",s=!1),e.error){if("AccountExists"==e.message)r("error",m=!0),r("alertText",p="Konto med den epost adressen finns redan")}else r("progress",u="66%"),r("verify",d=!0),r("headerText",c="Verifiera konto"),r("feedbackInformation",f="Ett mail har skickats med verifikations koden till "+l)}catch(e){console.log(e)}}(e);else try{r("loading",s=!0);const e=await o("/login",JSON.stringify({email:l}));e.error?"NoAccount"===e.message&&(r("progress",u="33%"),i=!0,r("loading",s=!1),r("headerText",c="Registera")):(r("loading",s=!1),console.log("Login no error"),r("headerText",c="Verifiera inloggning"),r("progress",u="50%"),r("feedbackInformation",f="Ett mail har skickats med verifikations koden till "+l),r("verify",d=!0))}catch(e){console.log(e)}},verifyWithCode:async function(e){try{console.log("code"),e.preventDefault();const t=await o("/verifyWithCode",JSON.stringify({verificationCode:a}));t.error?(r("error",m=!0),"WrongCode"===t.message?r("alertText",p="Fel verifikations kod, försök igen"):"NoToken"==t.message?(alert("Verifikations sessionen har gått ut, sidan kommer laddas om"),location.reload()):"TooManyWrongs"==t.message&&(alert("Du har skrivit in fel kod för många gånger, sidan kommer laddas om och du får logga in på nytt"),location.reload())):(console.log(t),me.set({user:t.user}),t.user.admin?pe.set("orders"):pe.set("makeOrder"))}catch(e){console.log(e)}},input_input_handler:function(){a=this.value,r("verificationCode",a)},input_input_handler_1:function(){n=this.value,r("name",n)},input_input_handler_2:function(){l=this.value,r("email",l)}}}class $e extends oe{constructor(e){super(),se(this,e,Ce,xe,s,{apiCall:0})}}function ye(e){let t,r=e.files[e.index].name+"";return{c(){t=$(r)},m(e,r){b(e,t,r)},p(e,l){(e.files||e.index)&&r!==(r=l.files[l.index].name+"")&&w(t,r)},d(e){e&&v(t)}}}function ke(t){let r;return{c(){r=$("Välj fil")},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r)}}}function Oe(e){let t,r,l,a,s,o,i,c,d,u,p,m,f,g,x;function $(e,t){return void 0===t.files[t.index]?ke:ye}let k=$(0,e),w=k(e);return{c(){t=C("div"),r=C("div"),l=C("div"),a=C("input"),o=y(),i=C("label"),w.c(),c=y(),d=C("div"),u=C("input"),p=y(),m=C("button"),m.innerHTML='<span aria-hidden="true">×</span>',_(a,"type","file"),_(a,"class","custom-file-input"),_(a,"id",e.index),_(a,"aria-describedby","inputGroupFileAddon01"),a.multiple=s=!1,_(i,"class","custom-file-label text-truncate"),_(i,"data-browse","Ladda upp"),_(i,"for",e.index),_(l,"class","col-4"),_(u,"type","text"),_(u,"class","form-control"),_(u,"placeholder","Fil information"),_(d,"class","col-7"),_(m,"type","button"),_(m,"class","close"),_(m,"data-dismiss","modal"),_(m,"aria-label","Close"),_(r,"class","form-row"),_(t,"class","form-group"),x=[O(a,"change",e.change_handler),O(u,"input",e.input1_input_handler),O(m,"click",e.deleteFile)]},m(n,s){b(n,t,s),h(t,r),h(r,l),h(l,a),h(l,o),h(l,i),w.m(i,null),h(r,c),h(r,d),h(d,u),A(u,e.descriptions[e.index]),h(r,p),h(r,m),g=!0},p(e,t){g&&!e.index||_(a,"id",t.index),k===(k=$(0,t))&&w?w.p(e,t):(w.d(1),w=k(t),w&&(w.c(),w.m(i,null))),g&&!e.index||_(i,"for",t.index),(e.descriptions||e.index)&&u.value!==t.descriptions[t.index]&&A(u,t.descriptions[t.index])},i(e){g||(R(()=>{f||(f=te(t,ce,{},!0)),f.run(1)}),g=!0)},o(e){f||(f=te(t,ce,{},!1)),f.run(0),g=!1},d(e){e&&v(t),w.d(),e&&f&&f.end(),n(x)}}}function _e(e,t,r){let{files:l}=t,{descriptions:n}=t,{index:a}=t,{deleteFileInput:s}=t;console.log(l);return e.$set=e=>{"files"in e&&r("files",l=e.files),"descriptions"in e&&r("descriptions",n=e.descriptions),"index"in e&&r("index",a=e.index),"deleteFileInput"in e&&r("deleteFileInput",s=e.deleteFileInput)},{files:l,descriptions:n,index:a,deleteFileInput:s,deleteFile:function(){s(a)},change_handler:e=>r("files",l[a]=e.currentTarget.files[0],l),input1_input_handler:function(){n[a]=this.value,r("descriptions",n),r("index",a)}}}class we extends oe{constructor(e){super(),se(this,e,_e,Oe,s,{files:0,descriptions:0,index:0,deleteFileInput:0})}}function Ae(t){let r,l,a,s,o,i,c,d,u,p,m,f,g,x,k;return{c(){r=C("nav"),l=C("span"),l.textContent="Användare",a=y(),s=C("div"),o=C("div"),i=C("a"),c=$("Gör en beställning"),u=y(),p=C("a"),m=$("Mina beställningar"),g=y(),x=C("a"),x.textContent="Logga ut",_(l,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        "),_(x,"class","nav-item nav-link"),_(x,"href","#"),_(o,"class","navbar-nav"),_(s,"class"," navbar"),_(s,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),k=[O(i,"click",t.click_handler),O(p,"click",t.click_handler_1),O(x,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,l),h(r,a),h(r,s),h(s,o),h(o,i),h(i,c),h(o,u),h(o,p),h(p,m),h(o,g),h(o,x)},p(e,t){e.urlValue&&d!==(d="nav-item nav-link "+("makeOrder"===t.urlValue?"active":""))&&_(i,"class",d),e.urlValue&&f!==(f="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&v(r),n(k)}}}function Ve(e,t){e&&e.preventDefault(),pe.set(t)}function Ue(e,t,r){let l,{apiCall:n}=t;pe.subscribe(e=>r("urlValue",l=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall)},{apiCall:n,urlValue:l,logOut:async function(e){try{e&&e.preventDefault(),(await n("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>Ve(e,"makeOrder"),click_handler_1:e=>Ve(e,"myOrders")}}class Te extends oe{constructor(e){super(),se(this,e,Ue,Ae,s,{apiCall:0})}}function De(e,t,r){const l=Object.create(e);return l.desc=t[r],l.i=r,l}function Ne(r){let l,n,s,o;return{c(){l=C("div"),n=$(r.alertText),_(l,"class",s="alert "+(r.error?"alert-danger":"alert-success")+"\r\n        "),_(l,"role","alert")},m(e,t){b(e,l,t),h(l,n)},p(e,t){e.alertText&&w(n,t.alertText),e.error&&s!==(s="alert "+(t.error?"alert-danger":"alert-success")+"\r\n        ")&&_(l,"class",s)},i(r){o||R(()=>{o=function(r,l,n){let s,o,i=l(r,n),d=!1,u=0;function p(){s&&L(r,s)}function m(){const{delay:l=0,duration:n=300,easing:a=t,tick:m=e,css:f}=i||ee;f&&(s=F(r,0,1,n,l,a,f,u++)),m(0,1);const h=c()+l,b=h+n;o&&o.abort(),d=!0,R(()=>J(r,!0,"start")),o=g(e=>{if(d){if(e>=b)return m(1,0),J(r,!0,"end"),p(),d=!1;if(e>=h){const t=a((e-h)/n);m(t,1-t)}}return d})}let f=!1;return{start(){f||(L(r),a(i)?(i=i(),K().then(m)):m())},invalidate(){f=!1},end(){d&&(p(),d=!1)}}}(l,ce,{}),o.start()})},o:e,d(e){e&&v(l)}}}function Fe(e){let t;const r=new we({props:{deleteFileInput:e.deleteFileInput,index:e.i,files:e.files,descriptions:e.fileDescriptions}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.files&&(l.files=t.files),e.fileDescriptions&&(l.descriptions=t.fileDescriptions),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Le(e){let t,r,l,a,s,o,i,c,d,u,p,m,f,g,$,k,w,A,V,U,T,D,N,F,L,S,E,j,I,B,M,H;const P=new Te({props:{apiCall:e.apiCall}});let R=(e.error||e.success)&&Ne(e),q=e.fileDescriptions,Q=[];for(let t=0;t<q.length;t+=1)Q[t]=Fe(De(e,q,t));const K=e=>Z(Q[e],1,1,()=>{Q[e]=null});return{c(){t=C("header"),re(P.$$.fragment),r=y(),l=C("div"),a=C("main"),R&&R.c(),s=y(),o=C("form"),i=C("div"),c=C("div"),d=C("div"),d.innerHTML='<label for="productName">Projektnamn</label> \n            <input type="text" class="form-control" id="productName" name="productName" aria-describedby="emailHelp" placeholder="Projektnamn">',u=y(),p=C("div"),m=C("label"),m.textContent="Beställare",f=y(),g=C("input"),k=y(),w=C("div"),w.innerHTML='<h3>Typ av uppdrag</h3> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkning" name="production"> \n            <label class="form-check-label" for="tillverkning">\n              Tillverkning\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkningsunderlag" name="productionDocumentation"> \n            <label class="form-check-label" for="tillverkningsunderlag">\n              Tillverkningsunderlag\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="beräkning" name="calculation"> \n            <label class="form-check-label" for="beräkning">Beräkning</label></div>',A=y(),V=C("div"),V.innerHTML='<h3>Beskrivning av produkt</h3> \n          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="productDescription"></textarea>',U=y(),T=C("div"),T.innerHTML='<h3>Önskemål</h3> \n          <textarea class="form-control" id="productDescripion" name="wishes" rows="3"></textarea>',D=y(),N=C("h3"),N.textContent="Filer",F=y();for(let e=0;e<Q.length;e+=1)Q[e].c();L=y(),S=C("button"),S.textContent="Lägg till fil",E=y(),j=C("hr"),I=y(),B=C("button"),B.textContent="Gör beställning",_(d,"class","col"),_(m,"for","customer"),_(g,"name","customer"),_(g,"type","text"),_(g,"id","customer"),_(g,"class","form-control"),g.value=$=e.user.name,_(g,"placeholder","Beställare"),_(p,"class","col"),_(c,"class","form-row"),_(w,"class","form-group mt-3"),_(V,"class","form-group"),_(T,"class","form-group"),_(S,"class","btn btn-primary"),_(j,"class","my-4"),_(B,"type","submit"),_(B,"class","btn btn-success btn-lg"),_(i,"class","form-group"),_(o,"class","svelte-1lxf9ux"),_(a,"class","svelte-1lxf9ux"),_(l,"class","container-fluid"),H=[O(S,"click",e.addFile),O(o,"submit",e.submitForm)]},m(e,n){b(e,t,n),le(P,t,null),b(e,r,n),b(e,l,n),h(l,a),R&&R.m(a,null),h(a,s),h(a,o),h(o,i),h(i,c),h(c,d),h(c,u),h(c,p),h(p,m),h(p,f),h(p,g),h(i,k),h(i,w),h(i,A),h(i,V),h(i,U),h(i,T),h(i,D),h(i,N),h(i,F);for(let e=0;e<Q.length;e+=1)Q[e].m(i,null);h(i,L),h(i,S),h(i,E),h(i,j),h(i,I),h(i,B),M=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),P.$set(r),t.error||t.success?R?(R.p(e,t),Y(R,1)):(R=Ne(t),R.c(),Y(R,1),R.m(a,s)):R&&(R.d(1),R=null),(!M||e.user&&$!==($=t.user.name))&&(g.value=$),e.deleteFileInput||e.files||e.fileDescriptions){let r;for(q=t.fileDescriptions,r=0;r<q.length;r+=1){const l=De(t,q,r);Q[r]?(Q[r].p(e,l),Y(Q[r],1)):(Q[r]=Fe(l),Q[r].c(),Y(Q[r],1),Q[r].m(i,L))}for(z(),r=q.length;r<Q.length;r+=1)K(r);X()}},i(e){if(!M){Y(P.$$.fragment,e),Y(R);for(let e=0;e<q.length;e+=1)Y(Q[e]);M=!0}},o(e){Z(P.$$.fragment,e),Q=Q.filter(Boolean);for(let e=0;e<Q.length;e+=1)Z(Q[e]);M=!1},d(e){e&&v(t),ne(P),e&&v(r),e&&v(l),R&&R.d(),x(Q,e),n(H)}}}function Se(e,t,r){let{apiCall:l}=t,{user:n}=t,a=[],s=[],o=!1,i=!1,c="";return async function(){n||r("user",n=await l("/checkAccount"))}(),e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall),"user"in e&&r("user",n=e.user)},{apiCall:l,user:n,files:a,fileDescriptions:s,success:o,error:i,alertText:c,addFile:function(e){e.preventDefault(),console.log("add file"),r("fileDescriptions",s=[...s,""]),console.log(s),console.log(a)},submitForm:async function(e){e.preventDefault();const t=e.currentTarget;console.log("form",t);const n=new FormData(t);a.map(e=>n.append("files",e)),n.append("fileDescriptions",s);for(let[e,t]of n.entries())console.log(e,t);(await l("/makeOrder",n,"multipart/form-data")).error?(r("error",i=!0),r("alertText",c="Kunde inte skapa beställning, försök igen senare")):(r("success",o=!0),r("alertText",c="Beställning skapad"),t.reset(),r("files",a=[]),r("fileDescriptions",s=[]))},deleteFileInput:function(e){console.log("fileDesc1",s),r("files",a=a.filter((t,r)=>r!==e)),r("fileDescriptions",s=s.filter((t,r)=>r!==e)),console.log("fileDesc",s)}}}class Ee extends oe{constructor(e){super(),se(this,e,Se,Le,s,{apiCall:0,user:0})}}function je(e,t,r){const l=Object.create(e);return l.file=t[r],l}function Ie(e){let t,r,l,n,a,s,o,i=e.file.originalName+"",c=e.file.description+"";return{c(){t=C("li"),r=C("a"),l=$(i),a=y(),s=C("li"),o=$(c),_(r,"href",n=e.file.url),_(t,"class","list-group-item"),V(t,"border","none"),_(s,"class","list-group-item")},m(e,n){b(e,t,n),h(t,r),h(r,l),b(e,a,n),b(e,s,n),h(s,o)},p(e,t){e.order&&i!==(i=t.file.originalName+"")&&w(l,i),e.order&&n!==(n=t.file.url)&&_(r,"href",n),e.order&&c!==(c=t.file.description+"")&&w(o,c)},d(e){e&&v(t),e&&v(a),e&&v(s)}}}function Be(e){let t,r,l,a,s,o,i,c,d,u,p,m,f,g,k,V,T,D,N,F,L,S,E,j,I,B,M,H,P,q,Q,K,J,W,G,z,X,Y,Z,ee,re,le,ne,ae,se,oe,ie,de,ue,pe,me,fe,ge,he,be,ve,xe,Ce,$e,ye,ke,Oe,_e,we,Ae,Ve,Ue,Te,De,Ne,Fe,Le,Se,Ee,Be,Me,He,Pe,Re,qe,Qe,Ke,Je,We,Ge,ze,Xe,Ye,Ze,et,tt,rt,lt,nt,at,st,ot,it,ct,dt,ut,pt,mt,ft,gt,ht,bt=e.order.productNumber+"",vt=e.order.productName+"",xt=new Date(e.order.date).toDateString()+"",Ct=e.order.customer.name+"",$t=e.order.customer.email+"",yt=e.order.productDescription+"",kt=e.order.wishes+"",Ot=e.order.files,_t=[];for(let t=0;t<Ot.length;t+=1)_t[t]=Ie(je(e,Ot,t));return{c(){t=C("div"),r=C("div"),l=C("div"),a=C("div"),s=C("div"),s.textContent="Orderdetaljer",o=y(),i=C("ul"),c=C("li"),d=$("Ordernummer: "),u=$(bt),p=y(),m=C("li"),f=$("Namn: "),g=$(vt),k=y(),V=C("li"),T=$("Datum: "),D=$(xt),N=y(),F=C("li"),L=C("div"),S=C("input"),j=y(),I=C("label"),I.textContent="Tillverkning",B=y(),M=C("li"),H=C("div"),P=C("input"),Q=y(),K=C("label"),K.textContent="Tillverkningsunderlag",J=y(),W=C("li"),G=C("div"),z=C("input"),Y=y(),Z=C("label"),Z.textContent="Beräkning",ee=y(),re=C("div"),le=C("div"),ne=C("div"),ne.textContent="Beställare",ae=y(),se=C("ul"),oe=C("li"),ie=$("Namn: "),de=$(Ct),ue=y(),pe=C("li"),me=$("Email:\r\n            "),fe=C("a"),ge=$($t),be=y(),ve=C("div"),xe=C("div"),Ce=C("div"),Ce.textContent="Ansvarig",$e=y(),ye=C("ul"),ke=C("li"),Oe=$("Namn:\r\n            "),_e=C("input"),we=y(),Ae=C("li"),Ve=$("Email:\r\n            "),Ue=C("input"),Te=y(),De=C("li"),Ne=$("Status:\r\n            "),Fe=C("select"),Le=C("option"),Le.textContent="Ej påbörjad",Se=C("option"),Se.textContent="Påbörjad",Ee=C("option"),Ee.textContent="Avslutad",Be=y(),Me=C("div"),He=C("div"),Pe=C("div"),Pe.textContent="Produkt beskrivning",Re=y(),qe=C("div"),Qe=$(yt),Ke=y(),Je=C("div"),We=C("div"),Ge=C("div"),Ge.textContent="Önskemål",ze=y(),Xe=C("div"),Ye=$(kt),Ze=y(),et=C("div"),tt=C("div"),rt=C("div"),rt.textContent="Filer",lt=y(),nt=C("ul");for(let e=0;e<_t.length;e+=1)_t[e].c();at=y(),st=C("div"),ot=C("div"),it=C("button"),it.textContent="Radera beställningar",ct=y(),dt=C("div"),ut=y(),pt=C("div"),mt=C("button"),mt.textContent="Spara ändringar",_(s,"class","card-header"),_(c,"class","list-group-item"),_(m,"class","list-group-item"),_(V,"class","list-group-item"),_(S,"type","checkbox"),_(S,"class","custom-control-input"),S.checked=E=e.order.missionType.production,S.disabled=!0,_(I,"class","custom-control-label"),_(L,"class","custom-control custom-checkbox"),_(F,"class","list-group-item"),_(P,"type","checkbox"),_(P,"class","custom-control-input"),P.checked=q=e.order.missionType.productionDocumentation,P.disabled=!0,_(K,"class","custom-control-label"),_(H,"class","custom-control custom-checkbox"),_(M,"class","list-group-item"),_(z,"type","checkbox"),_(z,"class","custom-control-input"),z.checked=X=e.order.missionType.calculation,z.disabled=!0,_(Z,"class","custom-control-label"),_(G,"class","custom-control custom-checkbox"),_(W,"class","list-group-item"),_(i,"class","list-group list-group-flush"),_(a,"class","card h-100"),_(l,"class","col mb-4"),_(ne,"class","card-header"),_(oe,"class","list-group-item"),_(fe,"href",he="mailto:"+e.order.customer.email),_(pe,"class","list-group-item"),_(se,"class","list-group list-group-flush"),_(le,"class","card h-100"),_(re,"class","col mb-4 "),_(Ce,"class","card-header"),_(_e,"type","text"),_(_e,"class","form-control "),_(ke,"class","list-group-item"),_(Ue,"type","email"),_(Ue,"class","form-control"),_(Ue,"aria-describedby","emailHelp"),_(Ae,"class","list-group-item"),Le.__value="Ej Påbörjad",Le.value=Le.__value,Se.__value="Påbörjad",Se.value=Se.__value,Ee.__value="Avslutad",Ee.value=Ee.__value,_(Fe,"class","form-control"),_(Fe,"id","exampleFormControlSelect2"),void 0===e.order.status&&R(()=>e.select_change_handler.call(Fe)),_(De,"class","list-group-item"),_(ye,"class","list-group list-group-flush"),_(xe,"class","card h-100"),_(ve,"class","col mb-4"),_(Pe,"class","card-header"),_(qe,"class","card-body"),_(He,"class","card h-100"),_(Me,"class","col mb-4"),_(Ge,"class","card-header"),_(Xe,"class","card-body"),_(We,"class","card h-100"),_(Je,"class","col mb-4"),_(rt,"class","card-header"),_(nt,"class","list-group list-group-flush"),_(tt,"class","card h-100"),_(et,"class","col mb-4"),_(r,"class","row row-cols-1 row-cols-md-2 row-cols-lg-3"),_(it,"class","btn btn-lg btn-danger"),_(ot,"class","col "),_(dt,"class","col"),_(mt,"class","btn btn-lg btn-success"),_(pt,"class","col "),_(st,"class","row"),_(t,"class","container-fluid text-left"),ht=[O(_e,"input",e.input3_input_handler),O(Ue,"input",e.input4_input_handler),O(Fe,"change",e.select_change_handler),O(it,"click",e.click_handler),O(mt,"click",e.saveChanges)]},m(n,v){b(n,t,v),h(t,r),h(r,l),h(l,a),h(a,s),h(a,o),h(a,i),h(i,c),h(c,d),h(c,u),h(i,p),h(i,m),h(m,f),h(m,g),h(i,k),h(i,V),h(V,T),h(V,D),h(i,N),h(i,F),h(F,L),h(L,S),h(L,j),h(L,I),h(i,B),h(i,M),h(M,H),h(H,P),h(H,Q),h(H,K),h(i,J),h(i,W),h(W,G),h(G,z),h(G,Y),h(G,Z),h(r,ee),h(r,re),h(re,le),h(le,ne),h(le,ae),h(le,se),h(se,oe),h(oe,ie),h(oe,de),h(se,ue),h(se,pe),h(pe,me),h(pe,fe),h(fe,ge),h(r,be),h(r,ve),h(ve,xe),h(xe,Ce),h(xe,$e),h(xe,ye),h(ye,ke),h(ke,Oe),h(ke,_e),A(_e,e.order.responsible.name),h(ye,we),h(ye,Ae),h(Ae,Ve),h(Ae,Ue),A(Ue,e.order.responsible.email),h(ye,Te),h(ye,De),h(De,Ne),h(De,Fe),h(Fe,Le),h(Fe,Se),h(Fe,Ee),U(Fe,e.order.status),h(r,Be),h(r,Me),h(Me,He),h(He,Pe),h(He,Re),h(He,qe),h(qe,Qe),h(r,Ke),h(r,Je),h(Je,We),h(We,Ge),h(We,ze),h(We,Xe),h(Xe,Ye),h(r,Ze),h(r,et),h(et,tt),h(tt,rt),h(tt,lt),h(tt,nt);for(let e=0;e<_t.length;e+=1)_t[e].m(nt,null);h(t,at),h(t,st),h(st,ot),h(ot,it),h(st,ct),h(st,dt),h(st,ut),h(st,pt),h(pt,mt),gt=!0},p(e,t){if(gt&&!e.order||bt===(bt=t.order.productNumber+"")||w(u,bt),gt&&!e.order||vt===(vt=t.order.productName+"")||w(g,vt),gt&&!e.order||xt===(xt=new Date(t.order.date).toDateString()+"")||w(D,xt),(!gt||e.order&&E!==(E=t.order.missionType.production))&&(S.checked=E),(!gt||e.order&&q!==(q=t.order.missionType.productionDocumentation))&&(P.checked=q),(!gt||e.order&&X!==(X=t.order.missionType.calculation))&&(z.checked=X),gt&&!e.order||Ct===(Ct=t.order.customer.name+"")||w(de,Ct),gt&&!e.order||$t===($t=t.order.customer.email+"")||w(ge,$t),(!gt||e.order&&he!==(he="mailto:"+t.order.customer.email))&&_(fe,"href",he),e.order&&_e.value!==t.order.responsible.name&&A(_e,t.order.responsible.name),e.order&&Ue.value!==t.order.responsible.email&&A(Ue,t.order.responsible.email),e.order&&U(Fe,t.order.status),gt&&!e.order||yt===(yt=t.order.productDescription+"")||w(Qe,yt),gt&&!e.order||kt===(kt=t.order.wishes+"")||w(Ye,kt),e.order){let r;for(Ot=t.order.files,r=0;r<Ot.length;r+=1){const l=je(t,Ot,r);_t[r]?_t[r].p(e,l):(_t[r]=Ie(l),_t[r].c(),_t[r].m(nt,null))}for(;r<_t.length;r+=1)_t[r].d(1);_t.length=Ot.length}},i(e){gt||(R(()=>{ft||(ft=te(t,ce,{},!0)),ft.run(1)}),gt=!0)},o(e){ft||(ft=te(t,ce,{},!1)),ft.run(0),gt=!1},d(e){e&&v(t),x(_t,e),e&&ft&&ft.end(),n(ht)}}}function Me(e,t,r){let{order:l}=t,{toggleExpand:n}=t,{deleteOrder:a}=t,{apiCall:s}=t;return e.$set=e=>{"order"in e&&r("order",l=e.order),"toggleExpand"in e&&r("toggleExpand",n=e.toggleExpand),"deleteOrder"in e&&r("deleteOrder",a=e.deleteOrder),"apiCall"in e&&r("apiCall",s=e.apiCall)},{order:l,toggleExpand:n,deleteOrder:a,apiCall:s,saveChanges:async function(){try{(await s("/updateOrder",JSON.stringify({id:l._id,email:l.responsible.email,name:l.responsible.name}))).error?alert("Ett fel uppstod, försök igen"):pe.set("orders")}catch(e){console.log(e)}},input3_input_handler:function(){l.responsible.name=this.value,r("order",l)},input4_input_handler:function(){l.responsible.email=this.value,r("order",l)},select_change_handler:function(){l.status=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),r("order",l)},click_handler:()=>a(l._id)}}class He extends oe{constructor(e){super(),se(this,e,Me,Be,s,{order:0,toggleExpand:0,deleteOrder:0,apiCall:0})}}function Pe(t){let r,l,a,s,o,i,c,d,u,p,m,f,g,x,k,A,V,U,T,D,N,F,L,S,E,j=t.order.productNumber+"",I=t.order.productName+"",B=t.order.customer.name+"",M=t.order.responsible.name+"",H=t.order.status+"",P=new Date(t.order.date).toDateString()+"";return{c(){r=C("tr"),l=C("th"),a=$(j),s=y(),o=C("td"),i=$(I),c=y(),d=C("td"),u=$(B),p=y(),m=C("td"),f=$(M),g=y(),x=C("td"),k=$(H),A=y(),V=C("td"),U=$(P),T=y(),D=C("td"),N=C("button"),N.textContent="Visa mer",F=y(),L=C("td"),S=C("button"),S.textContent="Radera order",_(l,"class","align-middle"),_(l,"scope","row"),_(o,"class","align-middle"),_(d,"class","align-middle d-none d-sm-table-cell"),_(m,"class","align-middle d-none d-md-table-cell"),_(x,"class","align-middle"),_(V,"class","align-middle d-none d-md-table-cell"),_(N,"class","btn btn-secondary "),_(D,"class","align-middle d-none d-md-table-cell"),_(S,"class","btn btn-danger float-right"),_(L,"class","align-middle d-none d-md-table-cell"),_(r,"class","svelte-1n1kl2d"),E=[O(l,"click",t.expandOrder),O(o,"click",t.expandOrder),O(d,"click",t.expandOrder),O(m,"click",t.expandOrder),O(x,"click",t.expandOrder),O(V,"click",t.expandOrder),O(N,"click",t.expandOrder),O(S,"click",t.click_handler)]},m(e,n){b(e,r,n),h(r,l),h(l,a),h(r,s),h(r,o),h(o,i),h(r,c),h(r,d),h(d,u),h(r,p),h(r,m),h(m,f),h(r,g),h(r,x),h(x,k),h(r,A),h(r,V),h(V,U),h(r,T),h(r,D),h(D,N),h(r,F),h(r,L),h(L,S),t.tr_1_binding(r)},p(e,t){e.order&&j!==(j=t.order.productNumber+"")&&w(a,j),e.order&&I!==(I=t.order.productName+"")&&w(i,I),e.order&&B!==(B=t.order.customer.name+"")&&w(u,B),e.order&&M!==(M=t.order.responsible.name+"")&&w(f,M),e.order&&H!==(H=t.order.status+"")&&w(k,H),e.order&&P!==(P=new Date(t.order.date).toDateString()+"")&&w(U,P)},i:e,o:e,d(e){e&&v(r),t.tr_1_binding(null),n(E)}}}function Re(e){let t,r,l;const n=new He({props:{deleteOrder:e.deleteOrder,order:e.order,expandOrder:e.expandOrder,deleteOrder:e.deleteOrder}});return{c(){t=C("tr"),r=C("td"),re(n.$$.fragment),_(r,"id","expandedContent"),_(r,"colspan","7"),V(t,"cursor","initial"),_(t,"class","svelte-1n1kl2d")},m(e,a){b(e,t,a),h(t,r),le(n,r,null),l=!0},p(e,t){const r={};e.deleteOrder&&(r.deleteOrder=t.deleteOrder),e.order&&(r.order=t.order),e.deleteOrder&&(r.deleteOrder=t.deleteOrder),n.$set(r)},i(e){l||(Y(n.$$.fragment,e),l=!0)},o(e){Z(n.$$.fragment,e),l=!1},d(e){e&&v(t),ne(n)}}}function qe(e){let t,r,l,n;const a=[Re,Pe],s=[];return t=1,r=s[1]=a[1](e),{c(){r.c(),l=k()},m(e,t){s[1].m(e,t),b(e,l,t),n=!0},p(e,t){r.p(e,t)},i(e){n||(Y(r),n=!0)},o(e){Z(r),n=!1},d(e){s[1].d(e),e&&v(l)}}}function Qe(e,t,r){let l,{deleteOrder:n}=t,{order:a}=t,{apiCall:s}=t,{getAllOrders:o}=t;return e.$set=e=>{"deleteOrder"in e&&r("deleteOrder",n=e.deleteOrder),"order"in e&&r("order",a=e.order),"apiCall"in e&&r("apiCall",s=e.apiCall),"getAllOrders"in e&&r("getAllOrders",o=e.getAllOrders)},{tr:l,deleteOrder:n,order:a,apiCall:s,getAllOrders:o,expandOrder:function(){me.set({order:a}),pe.set("expandedOrder")},click_handler:()=>n(a._id),tr_1_binding:function(e){j[e?"unshift":"push"](()=>{r("tr",l=e)})}}}class Ke extends oe{constructor(e){super(),se(this,e,Qe,qe,s,{deleteOrder:0,order:0,apiCall:0,getAllOrders:0})}}function Je(t){let r,l,a,s,o,i,c,d,u,p,m,f,g,x,k;return{c(){r=C("nav"),l=C("span"),l.textContent="Admin panel",a=y(),s=C("div"),o=C("div"),i=C("a"),c=$("Beställningar"),u=y(),p=C("a"),m=$("Hantera användare"),g=y(),x=C("a"),x.textContent="Logga ut",_(l,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",d="nav-item nav-link "+("orders"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        "),_(x,"class","nav-item nav-link"),_(x,"href","#"),_(o,"class","navbar-nav"),_(s,"class"," navbar"),_(s,"id","navbarNavAltMarkup"),_(r,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),k=[O(i,"click",t.click_handler),O(p,"click",t.click_handler_1),O(x,"click",t.logOut)]},m(e,t){b(e,r,t),h(r,l),h(r,a),h(r,s),h(s,o),h(o,i),h(i,c),h(o,u),h(o,p),h(p,m),h(o,g),h(o,x)},p(e,t){e.urlValue&&d!==(d="nav-item nav-link "+("orders"===t.urlValue?"active":""))&&_(i,"class",d),e.urlValue&&f!==(f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&v(r),n(k)}}}function We(e,t){e&&e.preventDefault(),pe.set(t)}function Ge(e,t,r){let l,{apiCall:n}=t;pe.subscribe(e=>r("urlValue",l=e));return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall)},{apiCall:n,urlValue:l,logOut:async function(e){try{e&&e.preventDefault(),(await n("/logOut")).error?alert("Kunde inte logga ut"):pe.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>We(e,"orders"),click_handler_1:e=>We(e,"manageUsers")}}class ze extends oe{constructor(e){super(),se(this,e,Ge,Je,s,{apiCall:0})}}function Xe(e,t,r){const l=Object.create(e);return l.order=t[r],l}function Ye(e){let t;const r=new Ke({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,order:e.order,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.getAllOrders&&(l.getAllOrders=t.getAllOrders),e.showOrders&&(l.order=t.order),e.deleteOrder&&(l.deleteOrder=t.deleteOrder),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Ze(e){let t,r,l,a,s,o,i,c,d,u,p,m,f,g,$,k,w,V,U,T,D,N,F,L,S,E,j,I,B,M=e.showOrders,H=[];for(let t=0;t<M.length;t+=1)H[t]=Ye(Xe(e,M,t));const P=e=>Z(H[e],1,1,()=>{H[e]=null});return{c(){t=C("div"),r=C("div"),r.innerHTML="<h2>Alla beställningar</h2>",l=y(),a=C("table"),s=C("caption"),s.textContent="Klicka på en beställning för mer information",o=y(),i=C("thead"),c=C("tr"),d=C("th"),d.textContent="#",u=y(),p=C("th"),p.textContent="Namn",m=y(),f=C("th"),f.textContent="Beställare",g=y(),$=C("th"),$.textContent="Ansvarig",k=y(),w=C("th"),w.textContent="Status",V=y(),U=C("th"),U.textContent="Datum",T=y(),D=C("th"),N=C("form"),F=C("input"),L=y(),S=C("button"),S.textContent="Sök",E=y(),j=C("tbody");for(let e=0;e<H.length;e+=1)H[e].c();_(r,"class","card-header"),_(d,"scope","col"),_(p,"scope","col"),_(f,"scope","col "),_(f,"class","d-none d-sm-table-cell"),_($,"scope","col "),_($,"class","d-none d-md-table-cell"),_(w,"scope","col"),_(U,"scope","col "),_(U,"class","d-none d-md-table-cell"),_(F,"class","form-control mr-sm-2 "),_(F,"type","search"),_(F,"placeholder","Sök"),_(F,"aria-label","Sök"),_(S,"class","btn btn-success bg my-2 my-sm-0"),_(S,"type","submit"),_(N,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(D,"scope","col"),_(D,"colspan","2"),_(i,"class","thead-dark"),_(a,"class","table table-striped table-hover table-bordered "),_(t,"class","card m-sm-4 m-2 text-center"),B=[O(F,"input",e.input_input_handler),O(N,"submit",e.filter)]},m(n,v){b(n,t,v),h(t,r),h(t,l),h(t,a),h(a,s),h(a,o),h(a,i),h(i,c),h(c,d),h(c,u),h(c,p),h(c,m),h(c,f),h(c,g),h(c,$),h(c,k),h(c,w),h(c,V),h(c,U),h(c,T),h(c,D),h(D,N),h(N,F),A(F,e.searchQuery),h(N,L),h(N,S),h(a,E),h(a,j);for(let e=0;e<H.length;e+=1)H[e].m(j,null);I=!0},p(e,t){if(e.searchQuery&&A(F,t.searchQuery),e.apiCall||e.getAllOrders||e.showOrders||e.deleteOrder){let r;for(M=t.showOrders,r=0;r<M.length;r+=1){const l=Xe(t,M,r);H[r]?(H[r].p(e,l),Y(H[r],1)):(H[r]=Ye(l),H[r].c(),Y(H[r],1),H[r].m(j,null))}for(z(),r=M.length;r<H.length;r+=1)P(r);X()}},i(e){if(!I){for(let e=0;e<M.length;e+=1)Y(H[e]);I=!0}},o(e){H=H.filter(Boolean);for(let e=0;e<H.length;e+=1)Z(H[e]);I=!1},d(e){e&&v(t),x(H,e),n(B)}}}function et(e,t,r){let l,{apiCall:n}=t,{getAllOrders:a}=t,{deleteOrder:s}=t,o="",{allOrders:i=[]}=t;function c(e){return e.toLowerCase().search(o.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall),"getAllOrders"in e&&r("getAllOrders",a=e.getAllOrders),"deleteOrder"in e&&r("deleteOrder",s=e.deleteOrder),"allOrders"in e&&r("allOrders",i=e.allOrders)},e.$$.update=(e={allOrders:1})=>{e.allOrders&&r("showOrders",l=i)},{apiCall:n,getAllOrders:a,deleteOrder:s,searchQuery:o,allOrders:i,filter:function(e){e&&e.preventDefault(),r("showOrders",l=i.filter(e=>e.productNumber==o||c(e.productName)||c(e.responsible.name)||c(e.responsible.email)||c(e.customer.name)||c(e.customer.email)||c(e.status)))},showOrders:l,input_input_handler:function(){o=this.value,r("searchQuery",o)}}}class tt extends oe{constructor(e){super(),se(this,e,et,Ze,s,{apiCall:0,getAllOrders:0,deleteOrder:0,allOrders:0})}}function rt(t){let r,l;return{c(){r=C("button"),r.textContent="Gör admin",_(r,"type","button"),_(r,"class","btn btn-warning"),l=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),l()}}}function lt(t){let r,l;return{c(){r=C("button"),r.textContent="Ta bort admin",_(r,"type","button"),_(r,"class","btn btn-warning"),l=O(r,"click",t.toggleUserAdmin)},m(e,t){b(e,r,t)},p:e,d(e){e&&v(r),l()}}}function nt(t){let r,l,n,a,s,o,i,c,d,u,p,m,f=t.user.name+"",g=t.user.email+"";function x(e,t){return t.user.admin?lt:rt}let k=x(0,t),A=k(t);return{c(){r=C("tr"),l=C("td"),n=$(f),a=y(),s=C("td"),o=$(g),i=y(),c=C("td"),A.c(),d=y(),u=C("td"),p=C("button"),p.textContent="Radera användare",_(p,"type","button"),_(p,"class","btn btn-danger"),m=O(p,"click",t.deleteUser)},m(e,t){b(e,r,t),h(r,l),h(l,n),h(r,a),h(r,s),h(s,o),h(r,i),h(r,c),A.m(c,null),h(r,d),h(r,u),h(u,p)},p(e,t){e.user&&f!==(f=t.user.name+"")&&w(n,f),e.user&&g!==(g=t.user.email+"")&&w(o,g),k===(k=x(0,t))&&A?A.p(e,t):(A.d(1),A=k(t),A&&(A.c(),A.m(c,null)))},i:e,o:e,d(e){e&&v(r),A.d(),m()}}}function at(e,t,r){let{user:l}=t,{getAllUsers:n}=t,{apiCall:a}=t;return e.$set=e=>{"user"in e&&r("user",l=e.user),"getAllUsers"in e&&r("getAllUsers",n=e.getAllUsers),"apiCall"in e&&r("apiCall",a=e.apiCall)},{user:l,getAllUsers:n,apiCall:a,deleteUser:async function(){const e=l._id;try{(await a("deleteUser",JSON.stringify({id:e}))).error?alert("Kunde inte radera användare"):(alert("användare raderad"),n())}catch(e){console.log(e)}},toggleUserAdmin:async function(){const e=l._id;try{(await a("/toggleUserAdmin",JSON.stringify({id:e}))).error?alert("Ett fel uppstod försök igen senare"):n()}catch(e){console.log(e)}}}}class st extends oe{constructor(e){super(),se(this,e,at,nt,s,{user:0,getAllUsers:0,apiCall:0})}}function ot(e,t,r){const l=Object.create(e);return l.user=t[r],l}function it(e){let t;const r=new st({props:{getAllUsers:e.getAllUsers,apiCall:e.apiCall,user:e.user}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.getAllUsers&&(l.getAllUsers=t.getAllUsers),e.apiCall&&(l.apiCall=t.apiCall),e.showUsers&&(l.user=t.user),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function ct(e){let t,r,l,a,s,o,i,c,d,u,p,m,f,g,$,k,w,V,U,T,D=e.showUsers,N=[];for(let t=0;t<D.length;t+=1)N[t]=it(ot(e,D,t));const F=e=>Z(N[e],1,1,()=>{N[e]=null});return{c(){t=C("div"),r=C("div"),l=C("div"),l.innerHTML="<h2>Alla användare</h2>",a=y(),s=C("div"),o=C("table"),i=C("thead"),c=C("th"),c.textContent="Namn",d=y(),u=C("th"),u.textContent="Email",p=y(),m=C("th"),f=C("form"),g=C("input"),$=y(),k=C("button"),k.textContent="Sök",w=y(),V=C("tbody");for(let e=0;e<N.length;e+=1)N[e].c();_(l,"class","card-header"),_(c,"scope","col"),_(u,"scope","col "),_(g,"class","form-control mr-sm-2 "),_(g,"type","search"),_(g,"placeholder","Sök"),_(g,"aria-label","Sök"),_(k,"class","btn btn-success bg my-2 my-sm-0"),_(k,"type","submit"),_(f,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(m,"scope","col"),_(m,"colspan","2"),_(i,"class","thead-dark"),_(o,"class","table table-striped table-bordered table-hover"),_(s,"class","table-responsive text-left"),_(r,"class","card text-center"),_(t,"class","container-fluid "),T=[O(g,"input",e.input_input_handler),O(f,"submit",e.search)]},m(n,v){b(n,t,v),h(t,r),h(r,l),h(r,a),h(r,s),h(s,o),h(o,i),h(i,c),h(i,d),h(i,u),h(i,p),h(i,m),h(m,f),h(f,g),A(g,e.searchQuery),h(f,$),h(f,k),h(o,w),h(o,V);for(let e=0;e<N.length;e+=1)N[e].m(V,null);U=!0},p(e,t){if(e.searchQuery&&A(g,t.searchQuery),e.getAllUsers||e.apiCall||e.showUsers){let r;for(D=t.showUsers,r=0;r<D.length;r+=1){const l=ot(t,D,r);N[r]?(N[r].p(e,l),Y(N[r],1)):(N[r]=it(l),N[r].c(),Y(N[r],1),N[r].m(V,null))}for(z(),r=D.length;r<N.length;r+=1)F(r);X()}},i(e){if(!U){for(let e=0;e<D.length;e+=1)Y(N[e]);U=!0}},o(e){N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)Z(N[e]);U=!1},d(e){e&&v(t),x(N,e),n(T)}}}function dt(e,t,r){let l,{apiCall:n}=t,a="",{allUsers:s=[]}=t,{getAllUsers:o}=t;function i(e){return console.log(e,a),console.log(e.toLowerCase().search(a.toLocaleLowerCase())>-1),e.toLowerCase().search(a.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&r("apiCall",n=e.apiCall),"allUsers"in e&&r("allUsers",s=e.allUsers),"getAllUsers"in e&&r("getAllUsers",o=e.getAllUsers)},e.$$.update=(e={allUsers:1})=>{e.allUsers&&r("showUsers",l=s)},{apiCall:n,searchQuery:a,allUsers:s,getAllUsers:o,search:function(e){e&&e.preventDefault(),console.log(s),r("showUsers",l=s.filter(e=>i(e.name)||i(e.email)||"admin"===a&&e.admin))},showUsers:l,input_input_handler:function(){a=this.value,r("searchQuery",a)}}}class ut extends oe{constructor(e){super(),se(this,e,dt,ct,s,{apiCall:0,allUsers:0,getAllUsers:0})}}function pt(e){let t;const r=new ut({props:{apiCall:e.apiCall,getAllUsers:e.getAllUsers,allUsers:e.allUsers}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.allUsers&&(l.allUsers=t.allUsers),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function mt(e){let t;const r=new He({props:{order:e.paramsValue.order,apiCall:e.apiCall,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.paramsValue&&(l.order=t.paramsValue.order),e.apiCall&&(l.apiCall=t.apiCall),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function ft(e){let t;const r=new tt({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,allOrders:e.allOrders,deleteOrder:e.deleteOrder}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.apiCall&&(l.apiCall=t.apiCall),e.allOrders&&(l.allOrders=t.allOrders),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function gt(e){let t,r,l,n,a,s;const o=new ze({props:{apiCall:e.apiCall}}),i=[ft,mt,pt],c=[];function d(e,t){return"orders"===t.urlValue?0:"expandedOrder"===t.urlValue?1:2}return l=d(0,e),n=c[l]=i[l](e),{c(){t=C("header"),re(o.$$.fragment),r=y(),n.c(),a=k()},m(e,n){b(e,t,n),le(o,t,null),b(e,r,n),c[l].m(e,n),b(e,a,n),s=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),o.$set(r);let s=l;l=d(0,t),l===s?c[l].p(e,t):(z(),Z(c[s],1,1,()=>{c[s]=null}),X(),n=c[l],n||(n=c[l]=i[l](t),n.c()),Y(n,1),n.m(a.parentNode,a))},i(e){s||(Y(o.$$.fragment,e),Y(n),s=!0)},o(e){Z(o.$$.fragment,e),Z(n),s=!1},d(e){e&&v(t),ne(o),e&&v(r),c[l].d(e),e&&v(a)}}}function ht(e,t,r){let l,n,{apiCall:a}=t;me.subscribe(e=>r("paramsValue",n=e)),pe.subscribe(e=>r("urlValue",l=e));let s=[],o=[];async function i(){try{const e=await a("/getAllorders");e.error&&console.log("error",e.message),console.log("call",e),r("allOrders",s=e.data),console.log("allOrders",s)}catch(e){console.log(e)}}async function c(){try{const e=await a("/getAllUsers");console.log("call",e),e.error?alert("Kunde inte hämta anvädare från servern"):r("allUsers",o=e.users)}catch(e){console.log(e)}}return c(),i(),e.$set=e=>{"apiCall"in e&&r("apiCall",a=e.apiCall)},{apiCall:a,urlValue:l,paramsValue:n,allOrders:s,allUsers:o,getAllOrders:i,getAllUsers:c,deleteOrder:async function(e){try{const t=await a("/deleteOrder",JSON.stringify({id:e}));console.log(t),t.error||(console.log("success"),pe.set("orders"),i())}catch(e){console.log(e)}}}}class bt extends oe{constructor(e){super(),se(this,e,ht,gt,s,{apiCall:0})}}function vt(t){let r,l,n,a,s,o,i,c,d,u,p,m,f,g,x,k,O,A,V=t.order.productNumber+"",U=t.order.productName+"",T=t.order.customer.name+"",D=t.order.responsible.name+"",N=t.order.status+"",F=new Date(t.order.date).toDateString()+"";return{c(){r=C("tr"),l=C("th"),n=$(V),a=y(),s=C("td"),o=$(U),i=y(),c=C("td"),d=$(T),u=y(),p=C("td"),m=$(D),f=y(),g=C("td"),x=$(N),k=y(),O=C("td"),A=$(F),_(l,"scope","col")},m(e,t){b(e,r,t),h(r,l),h(l,n),h(r,a),h(r,s),h(s,o),h(r,i),h(r,c),h(c,d),h(r,u),h(r,p),h(p,m),h(r,f),h(r,g),h(g,x),h(r,k),h(r,O),h(O,A)},p(e,t){e.order&&V!==(V=t.order.productNumber+"")&&w(n,V),e.order&&U!==(U=t.order.productName+"")&&w(o,U),e.order&&T!==(T=t.order.customer.name+"")&&w(d,T),e.order&&D!==(D=t.order.responsible.name+"")&&w(m,D),e.order&&N!==(N=t.order.status+"")&&w(x,N),e.order&&F!==(F=new Date(t.order.date).toDateString()+"")&&w(A,F)},i:e,o:e,d(e){e&&v(r)}}}function xt(e,t,r){let{order:l}=t;return e.$set=e=>{"order"in e&&r("order",l=e.order)},{order:l}}class Ct extends oe{constructor(e){super(),se(this,e,xt,vt,s,{order:0})}}function $t(e,t,r){const l=Object.create(e);return l.order=t[r],l}function yt(e){let t;const r=new Ct({props:{order:e.order}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.orders&&(l.order=t.order),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function kt(e){let t,r,l,n,a,s,o,i;const c=new Te({props:{apiCall:e.apiCall}});let d=e.orders,u=[];for(let t=0;t<d.length;t+=1)u[t]=yt($t(e,d,t));const p=e=>Z(u[e],1,1,()=>{u[e]=null});return{c(){t=C("header"),re(c.$$.fragment),r=y(),l=C("div"),n=C("table"),a=C("thead"),a.innerHTML='<tr><th scope="col">#</th> \n        <th scope="col">Namn</th> \n        <th scope="col " class="d-none d-sm-table-cell">Beställare</th> \n        <th scope="col " class="d-none d-md-table-cell">Ansvarig</th> \n        <th scope="col">Status</th> \n        <th scope="col " class="d-none d-md-table-cell">Datum</th></tr>',s=y(),o=C("tbody");for(let e=0;e<u.length;e+=1)u[e].c();_(a,"class","thead-dark"),_(n,"class","table table-striped table-hover table-bordered "),_(l,"class","card m-sm-4 m-2 text-center")},m(e,d){b(e,t,d),le(c,t,null),b(e,r,d),b(e,l,d),h(l,n),h(n,a),h(n,s),h(n,o);for(let e=0;e<u.length;e+=1)u[e].m(o,null);i=!0},p(e,t){const r={};if(e.apiCall&&(r.apiCall=t.apiCall),c.$set(r),e.orders){let r;for(d=t.orders,r=0;r<d.length;r+=1){const l=$t(t,d,r);u[r]?(u[r].p(e,l),Y(u[r],1)):(u[r]=yt(l),u[r].c(),Y(u[r],1),u[r].m(o,null))}for(z(),r=d.length;r<u.length;r+=1)p(r);X()}},i(e){if(!i){Y(c.$$.fragment,e);for(let e=0;e<d.length;e+=1)Y(u[e]);i=!0}},o(e){Z(c.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)Z(u[e]);i=!1},d(e){e&&v(t),ne(c),e&&v(r),e&&v(l),x(u,e)}}}function Ot(e,t,r){let{apiCall:l}=t,n=[];return async function(){try{const e=await l("/getMyOrders","");console.log("call",e),e.error?alert("Kunde inte hämta din beställningar"):r("orders",n=e.orders)}catch(e){console.log(e)}}(),e.$set=e=>{"apiCall"in e&&r("apiCall",l=e.apiCall)},{apiCall:l,orders:n}}class _t extends oe{constructor(e){super(),se(this,e,Ot,kt,s,{apiCall:0})}}function wt(t){let r;return{c(){r=C("main"),r.innerHTML='<header><h1>Laddar...</h1></header> \n  <div class="spinner-grow  svelte-1cplefx" style="width: 20rem; height: 20rem;" role="status" id="load"><span class="sr-only">Loading...</span></div>',_(r,"class","bg-primary svelte-1cplefx")},m(e,t){b(e,r,t)},p:e,i:e,o:e,d(e){e&&v(r)}}}class At extends oe{constructor(e){super(),se(this,e,null,wt,s,{})}}let Vt=ue({});function Ut(t){let r;const l=new At({});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Tt(t){let r;const l=new _t({props:{apiCall:Et}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Dt(e){let t;const r=new He({props:{order:e.selectedOrderValue}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};e.selectedOrderValue&&(l.order=t.selectedOrderValue),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Nt(e){let t;const r=new Ee({props:{user:e.userValue||e.paramsValue.user,apiCall:Et}});return{c(){re(r.$$.fragment)},m(e,l){le(r,e,l),t=!0},p(e,t){const l={};(e.userValue||e.paramsValue)&&(l.user=t.userValue||t.paramsValue.user),r.$set(l)},i(e){t||(Y(r.$$.fragment,e),t=!0)},o(e){Z(r.$$.fragment,e),t=!1},d(e){ne(r,e)}}}function Ft(t){let r;const l=new bt({props:{apiCall:Et}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function Lt(t){let r;const l=new $e({props:{apiCall:Et}});return{c(){re(l.$$.fragment)},m(e,t){le(l,e,t),r=!0},p:e,i(e){r||(Y(l.$$.fragment,e),r=!0)},o(e){Z(l.$$.fragment,e),r=!1},d(e){ne(l,e)}}}function St(e){let t,r,l,n;const a=[Lt,Ft,Nt,Dt,Tt,Ut],s=[];function o(e,t){return"authenticate"===t.urlValue?0:"orders"===t.urlValue||"manageUsers"===t.urlValue||"expandedOrder"===t.urlValue?1:"makeOrder"===t.urlValue?2:"expandedOrder"===t.urlValue?3:"myOrders"===t.urlValue?4:5}return t=o(0,e),r=s[t]=a[t](e),{c(){r.c(),l=k()},m(e,r){s[t].m(e,r),b(e,l,r),n=!0},p(e,n){let i=t;t=o(0,n),t===i?s[t].p(e,n):(z(),Z(s[i],1,1,()=>{s[i]=null}),X(),r=s[t],r||(r=s[t]=a[t](n),r.c()),Y(r,1),r.m(l.parentNode,l))},i(e){n||(Y(r),n=!0)},o(e){Z(r),n=!1},d(e){s[t].d(e),e&&v(l)}}}function Et(e,t,r,l){const n=!("multipart/form-data"===r);return console.log(t),new Promise((r,a)=>{const s={method:"POST",mode:"cors",credentials:"include",body:t};n&&(s.headers={"Content-Type":"application/json"}),fetch(e,s).then(e=>e.json()).then(e=>{console.log("answer"),e.error?l||"NoAuth"!==e.message?r(e):(console.log("Logged out"),alert("Du har blivit utloggad"),pe.set("authenticate")):(r(e),console.log(e))}).catch(e=>a(e))})}function jt(e,t,r){let l,n,a,s;return Vt.subscribe(e=>r("selectedOrderValue",a=e)),pe.subscribe(e=>r("urlValue",l=e)),me.subscribe(e=>r("paramsValue",s=e)),async function(){try{console.log("route user");const e=await Et("/checkAccount",void 0,void 0,!0);console.log("user",e);const t=function(e){try{return e.authenticated?(r("userValue",n=e),e.admin?"orders":"makeOrder"):"authenticate"}catch(e){console.log(e)}}(e);console.log(t),pe.set(t)}catch(e){console.log("err"),console.log(e)}}(),e.$$.update=(e={urlValue:1})=>{e.urlValue&&console.log(l)},{urlValue:l,userValue:n,selectedOrderValue:a,paramsValue:s}}return new class extends oe{constructor(e){super(),se(this,e,jt,St,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
