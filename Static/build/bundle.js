var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function l(e){e.forEach(n)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e){return null==e?"":e}const i="undefined"!=typeof window;let c=i?()=>window.performance.now():()=>Date.now(),u=i?e=>requestAnimationFrame(e):e;const d=new Set;let p,m=!1;function f(){d.forEach(e=>{e[0](c())||(d.delete(e),e[1]())}),(m=d.size>0)&&u(f)}function g(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function b(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function y(e){return document.createTextNode(e)}function C(){return y(" ")}function $(){return y("")}function k(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function _(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function O(e,t){(null!=t||e.value)&&(e.value=t)}function T(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let D,E=0,F={};function A(e,t,n,r,l,o,s,a=0){const i=16.666/r;let c="{\n";for(let e=0;e<=1;e+=i){const r=t+(n-t)*o(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`;if(!F[d]){if(!p){const e=x("style");document.head.appendChild(e),p=e.sheet}F[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length)}const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${r}ms linear ${l}ms 1 both`,E+=1,d}function S(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--E&&u(()=>{if(E)return;let e=p.cssRules.length;for(;e--;)p.deleteRule(e);F={}})}function V(e){D=e}const N=[],L=[],j=[],I=[],H=Promise.resolve();let M,B=!1;function P(e){j.push(e)}function Q(){const e=new Set;do{for(;N.length;){const e=N.shift();V(e),q(e.$$)}for(;L.length;)L.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];e.has(n)||(n(),e.add(n))}j.length=0}while(N.length);for(;I.length;)I.pop()();B=!1}function q(e){null!==e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(P))}function R(e,t,n){e.dispatchEvent(function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(`${t?"intro":"outro"}${n}`))}const W=new Set;let U;function G(){U={r:0,c:[],p:U}}function J(){U.r||l(U.c),U=U.p}function K(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Y(e,t,n,r){if(e&&e.o){if(W.has(e))return;W.add(e),U.c.push(()=>{W.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const z={duration:0};function X(n,r,s,a){let i=r(n,s),p=a?0:1,g=null,h=null,b=null;function v(){b&&S(n,b)}function x(e,t){const n=e.b-p;return t*=Math.abs(n),{a:p,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(r){const{delay:o=0,duration:s=300,easing:a=t,tick:y=e,css:C}=i||z,$={start:c()+o,b:r};r||($.group=U,U.r+=1),g?h=$:(C&&(v(),b=A(n,p,r,s,o,a,C)),r&&y(0,1),g=x($,s),P(()=>R(n,r,"start")),function(e){let t;m||(m=!0,u(f)),new Promise(n=>{d.add(t=[e,n])})}(e=>{if(h&&e>h.start&&(g=x(h,s),h=null,R(n,g.b,"start"),C&&(v(),b=A(n,p,g.b,g.duration,0,a,i.css))),g)if(e>=g.end)y(p=g.b,1-p),R(n,g.b,"end"),h||(g.b?v():--g.group.r||l(g.group.c)),g=null;else if(e>=g.start){const t=e-g.start;p=g.a+g.d*a(t/g.duration),y(p,1-p)}return!(!g&&!h)}))}return{run(e){o(i)?(M||(M=Promise.resolve()).then(()=>{M=null}),M).then(()=>{i=i(),y(e)}):y(e)},end(){v(),g=h=null}}}function Z(e){e&&e.c()}function ee(e,t,r){const{fragment:s,on_mount:a,on_destroy:i,after_update:c}=e.$$;s&&s.m(t,r),P(()=>{const t=a.map(n).filter(o);i?i.push(...t):l(t),e.$$.on_mount=[]}),c.forEach(P)}function te(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function ne(e,t){e.$$.dirty||(N.push(e),B||(B=!0,H.then(Q)),e.$$.dirty=r()),e.$$.dirty[t]=!0}function re(t,n,o,s,a,i){const c=D;V(t);const u=n.props||{},d=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:r(),dirty:null};let p=!1;d.ctx=o?o(t,u,(e,n,r=n)=>(d.ctx&&a(d.ctx[e],d.ctx[e]=r)&&(d.bound[e]&&d.bound[e](r),p&&ne(t,e)),n)):u,d.update(),p=!0,l(d.before_update),d.fragment=!!s&&s(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&K(t.$$.fragment),ee(t,n.target,n.anchor),Q()),V(c)}class le{$destroy(){te(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function oe(e){const t=e-1;return t*t*t+1}function se(e,{delay:t=0,duration:n=400,easing:r=oe}){const l=getComputedStyle(e),o=+l.opacity,s=parseFloat(l.height),a=parseFloat(l.paddingTop),i=parseFloat(l.paddingBottom),c=parseFloat(l.marginTop),u=parseFloat(l.marginBottom),d=parseFloat(l.borderTopWidth),p=parseFloat(l.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*o};`+`height: ${e*s}px;`+`padding-top: ${e*a}px;`+`padding-bottom: ${e*i}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*u}px;`+`border-top-width: ${e*d}px;`+`border-bottom-width: ${e*p}px;`}}const ae=[];const ie=function(t,n=e){let r;const l=[];function o(e){if(s(t,e)&&(t=e,r)){const e=!ae.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),ae.push(n,t)}if(e){for(let e=0;e<ae.length;e+=2)ae[e][0](ae[e+1]);ae.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=e){const i=[s,a];return l.push(i),1===l.length&&(r=n(o)||e),s(t),()=>{const e=l.indexOf(i);-1!==e&&l.splice(e,1),0===l.length&&(r(),r=null)}}}}("");function ce(e){let t,n,r,l;return{c(){t=x("div"),n=y(e.alertText),_(t,"class","alert alert-danger svelte-1r1bdcq"),_(t,"role","alert")},m(e,r){h(e,t,r),g(t,n),l=!0},p(e,t){l&&!e.alertText||w(n,t.alertText)},i(e){l||(P(()=>{r||(r=X(t,se,{},!0)),r.run(1)}),l=!0)},o(e){r||(r=X(t,se,{},!1)),r.run(0),l=!1},d(e){e&&b(t),e&&r&&r.end()}}}function ue(e){let t,n,r,o,s,a,i,c,u,d,p,m="Register"===e.headerText&&pe(e);return{c(){t=x("form"),n=x("div"),m&&m.c(),r=C(),(o=x("label")).textContent="Email address",s=C(),a=x("input"),i=C(),(c=x("button")).textContent="Submit",_(o,"for","exampleInputEmail1"),_(a,"type","email"),_(a,"class","form-control"),_(a,"id","exampleInputEmail1"),_(a,"aria-describedby","emailHelp"),_(a,"placeholder","Enter email"),_(n,"class","form-group"),_(c,"type","submit"),_(c,"class","btn btn-primary"),p=[k(a,"input",e.input_input_handler_2),k(t,"submit",e.login)]},m(l,u){h(l,t,u),g(t,n),m&&m.m(n,null),g(n,r),g(n,o),g(n,s),g(n,a),O(a,e.email),g(t,i),g(t,c),d=!0},p(e,t){"Register"===t.headerText?m?m.p(e,t):((m=pe(t)).c(),m.m(n,r)):m&&(m.d(1),m=null),e.email&&a.value!==t.email&&O(a,t.email)},i(e){d||(P(()=>{u||(u=X(t,se,{},!0)),u.run(1)}),d=!0)},o(e){u||(u=X(t,se,{},!1)),u.run(0),d=!1},d(e){e&&b(t),m&&m.d(),e&&u&&u.end(),l(p)}}}function de(e){let t,n,r,o,s,a,i,c,u,d,p,m,f;return{c(){t=x("form"),n=x("div"),(r=x("label")).textContent="Verification code",o=C(),s=x("input"),a=C(),i=x("small"),c=y(e.feedbackInformation),u=C(),(d=x("button")).textContent="Submit",_(r,"for","verficationCode"),_(s,"type","text"),_(s,"class","form-control"),_(s,"id","verficationCode"),_(s,"aria-describedby","emailHelp"),_(s,"placeholder","Enter verification code"),_(i,"id","emailHelp"),_(i,"class","form-text text-muted"),_(n,"class","form-group"),_(d,"type","submit"),_(d,"class","btn btn-primary"),f=[k(s,"input",e.input_input_handler),k(t,"submit",e.verifyWithCode)]},m(l,p){h(l,t,p),g(t,n),g(n,r),g(n,o),g(n,s),O(s,e.verificationCode),g(n,a),g(n,i),g(i,c),g(t,u),g(t,d),m=!0},p(e,t){e.verificationCode&&s.value!==t.verificationCode&&O(s,t.verificationCode),m&&!e.feedbackInformation||w(c,t.feedbackInformation)},i(e){m||(P(()=>{p||(p=X(t,se,{},!0)),p.run(1)}),m=!0)},o(e){p||(p=X(t,se,{},!1)),p.run(0),m=!1},d(e){e&&b(t),e&&p&&p.end(),l(f)}}}function pe(e){let t,n,r,l,o;return{c(){t=x("div"),(n=x("label")).textContent="Your name",r=C(),l=x("input"),_(n,"for","exampleInputPassword1"),_(l,"type","text"),_(l,"class","form-control"),_(l,"id","nameInput"),_(l,"placeholder","Your name"),_(t,"class","form-group"),o=k(l,"input",e.input_input_handler_1)},m(o,s){h(o,t,s),g(t,n),g(t,r),g(t,l),O(l,e.name)},p(e,t){e.name&&l.value!==t.name&&O(l,t.name)},d(e){e&&b(t),o()}}}function me(e){let t;return{c(){(t=x("div")).innerHTML='<span class="sr-only">Loading...</span>',_(t,"class","spinner-border text-primary svelte-1r1bdcq"),_(t,"role","status")},m(e,n){h(e,t,n)},d(e){e&&b(t)}}}function fe(e){let t,n,r,l,o,s,i,c,u,d,p,m,f,v,$,k,O,T,D=e.error&&ce(e);const E=[de,ue],F=[];function A(e,t){return t.verify?0:1}c=A(0,e),u=F[c]=E[c](e);let S=e.loading&&me();return{c(){t=x("main"),D&&D.c(),n=C(),r=x("div"),l=x("header"),o=x("h1"),s=y(e.headerText),i=C(),u.c(),d=C(),p=x("div"),S&&S.c(),m=C(),f=x("div"),v=x("div"),$=y(e.progress),_(v,"class","progress-bar"),_(v,"role","progressbar"),_(v,"style",k="width:"+e.progress),_(v,"aria-valuenow","25"),_(v,"aria-valuemin","0"),_(v,"aria-valuemax","100"),_(f,"class","progress svelte-1r1bdcq"),_(p,"id","progressContainer"),_(p,"class","svelte-1r1bdcq"),_(r,"id","login"),_(r,"class","svelte-1r1bdcq"),_(t,"class",O=a("100%"===e.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq")},m(e,a){h(e,t,a),D&&D.m(t,null),g(t,n),g(t,r),g(r,l),g(l,o),g(o,s),g(r,i),F[c].m(r,null),g(r,d),g(r,p),S&&S.m(p,null),g(p,m),g(p,f),g(f,v),g(v,$),T=!0},p(e,l){l.error?D?(D.p(e,l),K(D,1)):((D=ce(l)).c(),K(D,1),D.m(t,n)):D&&(G(),Y(D,1,1,()=>{D=null}),J()),T&&!e.headerText||w(s,l.headerText);let o=c;(c=A(0,l))===o?F[c].p(e,l):(G(),Y(F[o],1,1,()=>{F[o]=null}),J(),(u=F[c])||(u=F[c]=E[c](l)).c(),K(u,1),u.m(r,d)),l.loading?S||((S=me()).c(),S.m(p,m)):S&&(S.d(1),S=null),T&&!e.progress||w($,l.progress),(!T||e.progress&&k!==(k="width:"+l.progress))&&_(v,"style",k),(!T||e.progress&&O!==(O=a("100%"===l.progress?"bg-success":"bg-primary")+" svelte-1r1bdcq"))&&_(t,"class",O)},i(e){T||(K(D),K(u),T=!0)},o(e){Y(D),Y(u),T=!1},d(e){e&&b(t),D&&D.d(),F[c].d(),S&&S.d()}}}function ge(e,t,n){let r,l,o,s,a,{apiCall:i}=t,c=!1,u="Login/Register",d=!1,p="0%",m="",f=!1,g="";return e.$set=e=>{"apiCall"in e&&n("apiCall",i=e.apiCall)},{apiCall:i,email:r,name:l,headerText:u,verify:d,verificationCode:o,loading:s,progress:p,alertText:m,error:f,feedbackInformation:g,login:async function(e){if(e.preventDefault(),console.log(c),c)!async function(e){e.preventDefault();try{const e=await i("/registerUser",JSON.stringify({name:l,email:r}));e.error||(n("progress",p="66%"),n("verify",d=!0),a=e.data.token,console.log(a),n("headerText",u="Verify account"),n("feedbackInformation",g="An email with the verification code have been sent to "+r))}catch(e){console.log(e)}}(e);else try{n("loading",s=!0);const e=await i("/login",JSON.stringify({email:r}));"NoAccount"===e.message?(n("progress",p="33%"),c=!0,n("loading",s=!1),n("headerText",u="Register")):e.error?console.log("huh"):(n("loading",s=!1),console.log("Login no error"),n("headerText",u="Verify login"),a=e.data.token,n("progress",p="50%"),n("feedbackInformation",g="An email with the verification code have been sent to "+r),n("verify",d=!0)),console.log(e)}catch(e){console.log(e)}},verifyWithCode:async function(e){try{console.log("code"),e.preventDefault(),console.log(a);const t=await i("/verifyWithCode",JSON.stringify({verificationCode:o,token:a}));console.log(t),t.error?(n("error",f=!0),"WrongCode"===t.message&&n("alertText",m="Wrong verification code entered, try again")):(console.log(t),t.admin?ie.set("orders"):ie.set("makeOrder"))}catch(e){console.log(e)}},input_input_handler:function(){o=this.value,n("verificationCode",o)},input_input_handler_1:function(){l=this.value,n("name",l)},input_input_handler_2:function(){r=this.value,n("email",r)}}}class he extends le{constructor(e){super(),re(this,e,ge,fe,s,{apiCall:0})}}function be(e,t,n){const r=Object.create(e);return r.file=t[n],r}function ve(e){let t,n,r,l,o,s,a,i=e.file.originalName+"",c=e.file.description+"";return{c(){t=x("li"),n=x("a"),r=y(i),o=C(),s=x("li"),a=y(c),_(n,"href",l="http://localhost:8000"+e.file.url),_(t,"class","list-group-item"),T(t,"border","none"),_(s,"class","list-group-item")},m(e,l){h(e,t,l),g(t,n),g(n,r),h(e,o,l),h(e,s,l),g(s,a)},p(e,t){e.order&&i!==(i=t.file.originalName+"")&&w(r,i),e.order&&l!==(l="http://localhost:8000"+t.file.url)&&_(n,"href",l),e.order&&c!==(c=t.file.description+"")&&w(a,c)},d(e){e&&b(t),e&&b(o),e&&b(s)}}}function xe(e){let t,n,r,o,s,a,i,c,u,d,p,m,f,$,T,D,E,F,A,S,V,N,L,j,I,H,M,B,Q,q,R,W,U,G,J,K,Y,z,Z,ee,te,ne,re,le,oe,ae,ie,ce,ue,de,pe,me,fe,ge,he,xe,ye,Ce,$e,ke,_e,we,Oe,Te,De,Ee,Fe,Ae,Se,Ve,Ne,Le,je,Ie,He,Me,Be,Pe,Qe,qe,Re,We,Ue,Ge,Je,Ke,Ye,ze=e.order.number+"",Xe=new Date(e.order.date).toDateString()+"",Ze=e.order.customer.name+"",et=e.order.customer.email+"",tt=e.order.productDescription+"",nt=e.order.wishes+"",rt=e.order.files,lt=[];for(let t=0;t<rt.length;t+=1)lt[t]=ve(be(e,rt,t));return{c(){t=x("div"),n=x("div"),r=x("div"),o=x("div"),(s=x("div")).textContent="Orderdetaljer",a=C(),i=x("ul"),c=x("li"),u=y("Ordernummer: "),d=y(ze),p=C(),m=x("li"),f=y("Datum: "),$=y(Xe),T=C(),D=x("li"),E=y("Status:\r\n            "),F=x("select"),(A=x("option")).textContent="Ej påbörjad",(S=x("option")).textContent="Påbörjad",(V=x("option")).textContent="Avslutad",N=C(),(L=x("li")).innerHTML='<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="customCheckDisabled1" disabled=""> \n              <label class="custom-control-label" for="customCheckDisabled1">\n                Tillverkning\n              </label></div>',j=C(),(I=x("li")).innerHTML='<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="customCheckDisabled1" disabled=""> \n              <label class="custom-control-label" for="customCheckDisabled1">\n                Tillverkningsunderlag\n              </label></div>',H=C(),(M=x("li")).innerHTML='<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="customCheckDisabled1" disabled=""> \n              <label class="custom-control-label" for="customCheckDisabled1">\n                Beräkning\n              </label></div>',B=C(),Q=x("div"),q=x("div"),(R=x("div")).textContent="Beställare",W=C(),U=x("ul"),G=x("li"),J=y("Namn: "),K=y(Ze),Y=C(),z=x("li"),Z=y("Email:\r\n            "),ee=x("a"),te=y(et),re=C(),le=x("div"),oe=x("div"),(ae=x("div")).textContent="Ansvarig",ie=C(),ce=x("ul"),ue=x("li"),de=y("Namn:\r\n            "),pe=x("input"),me=C(),fe=x("li"),ge=y("Email:\r\n            "),he=x("input"),xe=C(),ye=x("div"),Ce=x("div"),($e=x("div")).textContent="Produkt beskrivning",ke=C(),_e=x("div"),we=y(tt),Oe=C(),Te=x("div"),De=x("div"),(Ee=x("div")).textContent="Önskemål",Fe=C(),Ae=x("div"),Se=y(nt),Ve=C(),Ne=x("div"),Le=x("div"),(je=x("div")).textContent="Filer",Ie=C(),He=x("ul");for(let e=0;e<lt.length;e+=1)lt[e].c();Me=C(),Be=x("div"),Pe=x("div"),(Qe=x("button")).textContent="Delete order",qe=C(),Re=x("div"),(We=x("button")).textContent="Stäng",Ue=C(),(Ge=x("div")).innerHTML='<button class="btn btn-lg btn-success">Spara</button>',_(s,"class","card-header"),_(c,"class","list-group-item"),_(m,"class","list-group-item"),A.__value="Ej påbörjad",A.value=A.__value,S.__value="Påbörjad",S.value=S.__value,V.__value="Avslutad",V.value=V.__value,_(F,"class","form-control"),_(F,"id","exampleFormControlSelect2"),_(D,"class","list-group-item"),_(L,"class","list-group-item"),_(I,"class","list-group-item"),_(M,"class","list-group-item"),_(i,"class","list-group list-group-flush"),_(o,"class","card h-100"),_(r,"class","col mb-4"),_(R,"class","card-header"),_(G,"class","list-group-item"),_(ee,"href",ne="mailto:"+e.order.customer.email),_(z,"class","list-group-item"),_(U,"class","list-group list-group-flush"),_(q,"class","card h-100"),_(Q,"class","col mb-4 "),_(ae,"class","card-header"),_(pe,"type","text"),_(pe,"class","form-control "),_(ue,"class","list-group-item"),_(he,"type","email"),_(he,"class","form-control"),_(he,"aria-describedby","emailHelp"),_(fe,"class","list-group-item"),_(ce,"class","list-group list-group-flush"),_(oe,"class","card h-100"),_(le,"class","col mb-4"),_($e,"class","card-header"),_(_e,"class","card-body"),_(Ce,"class","card h-100"),_(ye,"class","col mb-4"),_(Ee,"class","card-header"),_(Ae,"class","card-body"),_(De,"class","card h-100"),_(Te,"class","col mb-4"),_(je,"class","card-header"),_(He,"class","list-group list-group-flush"),_(Le,"class","card h-100"),_(Ne,"class","col mb-4"),_(n,"class","row row-cols-1 row-cols-md-2 row-cols-lg-3"),_(Qe,"class","btn btn-lg btn-danger"),_(Pe,"class","col "),_(We,"class","btn btn-lg btn-secondary"),_(Re,"class","col"),_(Ge,"class","col "),_(Be,"class","row"),_(t,"class","container-fluid text-left"),Ye=[k(pe,"input",e.input3_input_handler),k(he,"input",e.input4_input_handler),k(Qe,"click",e.deleteOrder),k(We,"click",e.toggleExpand)]},m(l,b){h(l,t,b),g(t,n),g(n,r),g(r,o),g(o,s),g(o,a),g(o,i),g(i,c),g(c,u),g(c,d),g(i,p),g(i,m),g(m,f),g(m,$),g(i,T),g(i,D),g(D,E),g(D,F),g(F,A),g(F,S),g(F,V),g(i,N),g(i,L),g(i,j),g(i,I),g(i,H),g(i,M),g(n,B),g(n,Q),g(Q,q),g(q,R),g(q,W),g(q,U),g(U,G),g(G,J),g(G,K),g(U,Y),g(U,z),g(z,Z),g(z,ee),g(ee,te),g(n,re),g(n,le),g(le,oe),g(oe,ae),g(oe,ie),g(oe,ce),g(ce,ue),g(ue,de),g(ue,pe),O(pe,e.order.responsible.name),g(ce,me),g(ce,fe),g(fe,ge),g(fe,he),O(he,e.order.responsible.email),g(n,xe),g(n,ye),g(ye,Ce),g(Ce,$e),g(Ce,ke),g(Ce,_e),g(_e,we),g(n,Oe),g(n,Te),g(Te,De),g(De,Ee),g(De,Fe),g(De,Ae),g(Ae,Se),g(n,Ve),g(n,Ne),g(Ne,Le),g(Le,je),g(Le,Ie),g(Le,He);for(let e=0;e<lt.length;e+=1)lt[e].m(He,null);g(t,Me),g(t,Be),g(Be,Pe),g(Pe,Qe),g(Be,qe),g(Be,Re),g(Re,We),g(Be,Ue),g(Be,Ge),Ke=!0},p(e,t){if(Ke&&!e.order||ze===(ze=t.order.number+"")||w(d,ze),Ke&&!e.order||Xe===(Xe=new Date(t.order.date).toDateString()+"")||w($,Xe),Ke&&!e.order||Ze===(Ze=t.order.customer.name+"")||w(K,Ze),Ke&&!e.order||et===(et=t.order.customer.email+"")||w(te,et),(!Ke||e.order&&ne!==(ne="mailto:"+t.order.customer.email))&&_(ee,"href",ne),e.order&&pe.value!==t.order.responsible.name&&O(pe,t.order.responsible.name),e.order&&he.value!==t.order.responsible.email&&O(he,t.order.responsible.email),Ke&&!e.order||tt===(tt=t.order.productDescription+"")||w(we,tt),Ke&&!e.order||nt===(nt=t.order.wishes+"")||w(Se,nt),e.order){let n;for(rt=t.order.files,n=0;n<rt.length;n+=1){const r=be(t,rt,n);lt[n]?lt[n].p(e,r):(lt[n]=ve(r),lt[n].c(),lt[n].m(He,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=rt.length}},i(e){Ke||(P(()=>{Je||(Je=X(t,se,{},!0)),Je.run(1)}),Ke=!0)},o(e){Je||(Je=X(t,se,{},!1)),Je.run(0),Ke=!1},d(e){e&&b(t),v(lt,e),e&&Je&&Je.end(),l(Ye)}}}function ye(e,t,n){let{order:r}=t,{toggleExpand:l}=t,{deleteOrder:o}=t;return e.$set=e=>{"order"in e&&n("order",r=e.order),"toggleExpand"in e&&n("toggleExpand",l=e.toggleExpand),"deleteOrder"in e&&n("deleteOrder",o=e.deleteOrder)},{order:r,toggleExpand:l,deleteOrder:o,input3_input_handler:function(){r.responsible.name=this.value,n("order",r)},input4_input_handler:function(){r.responsible.email=this.value,n("order",r)}}}class Ce extends le{constructor(e){super(),re(this,e,ye,xe,s,{order:0,toggleExpand:0,deleteOrder:0})}}function $e(t){let n,r,o,s,a,i,c,u,d,p,m,f,v,$,O,T,D,E,F,A,S,V,N=t.order.number+"",L=t.order.productName+"",j=t.order.customer.name+"",I=t.order.responsible.name+"",H=t.order.status+"",M=new Date(t.order.date).toDateString()+"";return{c(){n=x("tr"),r=x("th"),o=y(N),s=C(),a=x("td"),i=y(L),c=C(),u=x("td"),d=y(j),p=C(),m=x("td"),f=y(I),v=C(),$=x("td"),O=y(H),T=C(),D=x("td"),E=y(M),F=C(),A=x("td"),(S=x("button")).textContent="Radera order",_(r,"class","align-middle"),_(r,"scope","row"),_(a,"class","align-middle"),_(u,"class","align-middle d-none d-sm-table-cell"),_(m,"class","align-middle d-none d-md-table-cell"),_($,"class","align-middle"),_(D,"class","align-middle d-none d-md-table-cell"),_(S,"class","btn btn-danger float-right"),_(n,"class","svelte-1n1kl2d"),V=[k(r,"click",t.toggleExpand),k(a,"click",t.toggleExpand),k(u,"click",t.toggleExpand),k(m,"click",t.toggleExpand),k($,"click",t.toggleExpand),k(D,"click",t.toggleExpand),k(S,"click",t.deleteOrder)]},m(e,l){h(e,n,l),g(n,r),g(r,o),g(n,s),g(n,a),g(a,i),g(n,c),g(n,u),g(u,d),g(n,p),g(n,m),g(m,f),g(n,v),g(n,$),g($,O),g(n,T),g(n,D),g(D,E),g(n,F),g(n,A),g(A,S),t.tr_1_binding(n)},p(e,t){e.order&&N!==(N=t.order.number+"")&&w(o,N),e.order&&L!==(L=t.order.productName+"")&&w(i,L),e.order&&j!==(j=t.order.customer.name+"")&&w(d,j),e.order&&I!==(I=t.order.responsible.name+"")&&w(f,I),e.order&&H!==(H=t.order.status+"")&&w(O,H),e.order&&M!==(M=new Date(t.order.date).toDateString()+"")&&w(E,M)},i:e,o:e,d(e){e&&b(n),t.tr_1_binding(null),l(V)}}}function ke(e){let t,n,r;const l=new Ce({props:{deleteOrder:e.deleteOrder,order:e.order,toggleExpand:e.toggleExpand}});return{c(){t=x("tr"),n=x("td"),Z(l.$$.fragment),_(n,"id","expandedContent"),_(n,"colspan","7"),T(t,"cursor","initial"),_(t,"class","svelte-1n1kl2d")},m(e,o){h(e,t,o),g(t,n),ee(l,n,null),r=!0},p(e,t){const n={};e.order&&(n.order=t.order),l.$set(n)},i(e){r||(K(l.$$.fragment,e),r=!0)},o(e){Y(l.$$.fragment,e),r=!1},d(e){e&&b(t),te(l)}}}function _e(e){let t,n,r,l;const o=[ke,$e],s=[];function a(e,t){return t.expanded?0:1}return t=a(0,e),n=s[t]=o[t](e),{c(){n.c(),r=$()},m(e,n){s[t].m(e,n),h(e,r,n),l=!0},p(e,l){let i=t;(t=a(0,l))===i?s[t].p(e,l):(G(),Y(s[i],1,1,()=>{s[i]=null}),J(),(n=s[t])||(n=s[t]=o[t](l)).c(),K(n,1),n.m(r.parentNode,r))},i(e){l||(K(n),l=!0)},o(e){Y(n),l=!1},d(e){s[t].d(e),e&&b(r)}}}function we(e,t,n){let r,l,{order:o}=t,{apiCall:s}=t,{getAllOrders:a}=t,i=!1;return e.$set=e=>{"order"in e&&n("order",o=e.order),"apiCall"in e&&n("apiCall",s=e.apiCall),"getAllOrders"in e&&n("getAllOrders",a=e.getAllOrders)},{tr:r,order:o,apiCall:s,getAllOrders:a,expanded:i,toggleExpand:function(){n("expanded",i=!i)},deleteOrder:async function(){console.log("delete"),console.log(l);try{const e=await s("/deleteOrder",JSON.stringify({id:o._id}));console.log(e),e.error||(console.log("success"),a())}catch(e){console.log(e)}},tr_1_binding:function(e){L[e?"unshift":"push"](()=>{n("tr",r=e)})}}}class Oe extends le{constructor(e){super(),re(this,e,we,_e,s,{order:0,apiCall:0,getAllOrders:0})}}function Te(t){let n,r,o,s,a,i,c,u,d,p,m,f,v,$,w;return{c(){n=x("nav"),(r=x("span")).textContent="Admin panel",o=C(),s=x("div"),a=x("div"),i=x("a"),c=y("Beställningar"),d=C(),p=x("a"),m=y("Hantera användare"),v=C(),($=x("a")).textContent="Logga ut",_(r,"class","navbar-brand mb-0 h1"),_(i,"href","#"),_(i,"class",u="nav-item nav-link "+("orders"===t.urlValue?"active":"")),_(p,"href","#"),_(p,"class",f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        "),_($,"class","nav-item nav-link"),_($,"href","#"),_(a,"class","navbar-nav"),_(s,"class"," navbar"),_(s,"id","navbarNavAltMarkup"),_(n,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),w=[k(i,"click",t.click_handler),k(p,"click",t.click_handler_1),k($,"click",t.logOut)]},m(e,t){h(e,n,t),g(n,r),g(n,o),g(n,s),g(s,a),g(a,i),g(i,c),g(a,d),g(a,p),g(p,m),g(a,v),g(a,$)},p(e,t){e.urlValue&&u!==(u="nav-item nav-link "+("orders"===t.urlValue?"active":""))&&_(i,"class",u),e.urlValue&&f!==(f="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        ")&&_(p,"class",f)},i:e,o:e,d(e){e&&b(n),l(w)}}}function De(e,t){e&&e.preventDefault(),ie.set(t)}function Ee(e,t,n){let r,{apiCall:l}=t;ie.subscribe(e=>n("urlValue",r=e));return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall)},{apiCall:l,urlValue:r,logOut:async function(e){try{e&&e.preventDefault(),(await l("/logOut")).error?alert("Kunde inte logga ut"):ie.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>De(e,"orders"),click_handler_1:e=>De(e,"manageUsers")}}class Fe extends le{constructor(e){super(),re(this,e,Ee,Te,s,{apiCall:0})}}function Ae(e,t,n){const r=Object.create(e);return r.order=t[n],r}function Se(e){let t;const n=new Oe({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,order:e.order}});return{c(){Z(n.$$.fragment)},m(e,r){ee(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.showOrders&&(r.order=t.order),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){te(n,e)}}}function Ve(e){let t,n,r,o,s,a,i,c,u,d,p,m,f,y,$,w,T,D,E,F,A,S,V,N,L,j,I,H;const M=new Fe({props:{apiCall:e.apiCall}});let B=e.showOrders,P=[];for(let t=0;t<B.length;t+=1)P[t]=Se(Ae(e,B,t));const Q=e=>Y(P[e],1,1,()=>{P[e]=null});return{c(){Z(M.$$.fragment),t=C(),n=x("div"),r=x("table"),(o=x("caption")).textContent="Klicka på en beställning för mer information",s=C(),a=x("thead"),i=x("tr"),(c=x("th")).textContent="#",u=C(),(d=x("th")).textContent="Namn",p=C(),(m=x("th")).textContent="Beställare",f=C(),(y=x("th")).textContent="Ansvarig",$=C(),(w=x("th")).textContent="Status",T=C(),(D=x("th")).textContent="Datum",E=C(),F=x("th"),A=x("form"),S=x("input"),V=C(),(N=x("button")).textContent="Sök",L=C(),j=x("tbody");for(let e=0;e<P.length;e+=1)P[e].c();_(c,"scope","col"),_(d,"scope","col"),_(m,"scope","col "),_(m,"class","d-none d-sm-table-cell"),_(y,"scope","col "),_(y,"class","d-none d-md-table-cell"),_(w,"scope","col"),_(D,"scope","col "),_(D,"class","d-none d-md-table-cell"),_(S,"class","form-control mr-sm-2 "),_(S,"type","search"),_(S,"placeholder","Sök"),_(S,"aria-label","Sök"),_(N,"class","btn btn-success bg my-2 my-sm-0"),_(N,"type","submit"),_(A,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(F,"scope","col"),_(a,"class","thead-dark"),_(r,"class","table table-striped table-hover table-bordered "),_(n,"class","card m-sm-4 m-2 text-center"),H=[k(S,"input",e.input_input_handler),k(A,"submit",e.filter)]},m(l,b){ee(M,l,b),h(l,t,b),h(l,n,b),g(n,r),g(r,o),g(r,s),g(r,a),g(a,i),g(i,c),g(i,u),g(i,d),g(i,p),g(i,m),g(i,f),g(i,y),g(i,$),g(i,w),g(i,T),g(i,D),g(i,E),g(i,F),g(F,A),g(A,S),O(S,e.searchQuery),g(A,V),g(A,N),g(r,L),g(r,j);for(let e=0;e<P.length;e+=1)P[e].m(j,null);I=!0},p(e,t){const n={};if(e.apiCall&&(n.apiCall=t.apiCall),M.$set(n),e.searchQuery&&O(S,t.searchQuery),e.apiCall||e.getAllOrders||e.showOrders){let n;for(B=t.showOrders,n=0;n<B.length;n+=1){const r=Ae(t,B,n);P[n]?(P[n].p(e,r),K(P[n],1)):(P[n]=Se(r),P[n].c(),K(P[n],1),P[n].m(j,null))}for(G(),n=B.length;n<P.length;n+=1)Q(n);J()}},i(e){if(!I){K(M.$$.fragment,e);for(let e=0;e<B.length;e+=1)K(P[e]);I=!0}},o(e){Y(M.$$.fragment,e),P=P.filter(Boolean);for(let e=0;e<P.length;e+=1)Y(P[e]);I=!1},d(e){te(M,e),e&&b(t),e&&b(n),v(P,e),l(H)}}}function Ne(e,t,n){let{apiCall:r}=t;i();let l="",o=[],s=o;function a(e){return e.toLowerCase().search(l.toLocaleLowerCase())>-1}async function i(){try{const e=await r("/getAllorders");e.error&&console.log("error",e.message),console.log("call",e),o=e.data,console.log("allOrders",o),n("showOrders",s=o),console.log("show",s)}catch(e){console.log(e)}}return e.$set=e=>{"apiCall"in e&&n("apiCall",r=e.apiCall)},{apiCall:r,searchQuery:l,showOrders:s,filter:function(e){e&&e.preventDefault(),n("showOrders",s=o.filter(e=>e.number==l||a(e.productName)||a(e.responsible.name)||a(e.responsible.email)||a(e.customer.name)||a(e.customer.email)||a(e.status)))},getAllOrders:i,input_input_handler:function(){l=this.value,n("searchQuery",l)}}}class Le extends le{constructor(e){super(),re(this,e,Ne,Ve,s,{apiCall:0})}}function je(e){let t,n=e.files[e.index].name+"";return{c(){t=y(n)},m(e,n){h(e,t,n)},p(e,r){(e.files||e.index)&&n!==(n=r.files[r.index].name+"")&&w(t,n)},d(e){e&&b(t)}}}function Ie(t){let n;return{c(){n=y("Choose file")},m(e,t){h(e,n,t)},p:e,d(e){e&&b(n)}}}function He(e){let t,n,r,o,s,a,i,c,u,d,p,m,f,v,y;function $(e,t){return void 0===t.files[t.index]?Ie:je}let w=$(0,e),T=w(e);return{c(){t=x("div"),n=x("div"),r=x("div"),o=x("input"),a=C(),i=x("label"),T.c(),c=C(),u=x("div"),d=x("input"),p=C(),(m=x("button")).innerHTML='<span aria-hidden="true">×</span>',_(o,"type","file"),_(o,"class","custom-file-input"),_(o,"id","inputGroupFile01"),_(o,"aria-describedby","inputGroupFileAddon01"),o.multiple=s=!1,_(i,"class","custom-file-label text-truncate"),_(i,"for","inputGroupFile01"),_(r,"class","col-4"),_(d,"type","text"),_(d,"class","form-control"),_(d,"placeholder","File description"),_(u,"class","col-7"),_(m,"type","button"),_(m,"class","close"),_(m,"data-dismiss","modal"),_(m,"aria-label","Close"),_(n,"class","form-row"),_(t,"class","form-group"),y=[k(o,"change",e.change_handler),k(d,"input",e.input1_input_handler),k(m,"click",e.deleteFile)]},m(l,s){h(l,t,s),g(t,n),g(n,r),g(r,o),g(r,a),g(r,i),T.m(i,null),g(n,c),g(n,u),g(u,d),O(d,e.descriptions[e.index]),g(n,p),g(n,m),v=!0},p(e,t){w===(w=$(0,t))&&T?T.p(e,t):(T.d(1),(T=w(t))&&(T.c(),T.m(i,null))),(e.descriptions||e.index)&&d.value!==t.descriptions[t.index]&&O(d,t.descriptions[t.index])},i(e){v||(P(()=>{f||(f=X(t,se,{},!0)),f.run(1)}),v=!0)},o(e){f||(f=X(t,se,{},!1)),f.run(0),v=!1},d(e){e&&b(t),T.d(),e&&f&&f.end(),l(y)}}}function Me(e,t,n){let{files:r}=t,{descriptions:l}=t,{index:o}=t,{deleteFileInput:s}=t;console.log(r);return e.$set=e=>{"files"in e&&n("files",r=e.files),"descriptions"in e&&n("descriptions",l=e.descriptions),"index"in e&&n("index",o=e.index),"deleteFileInput"in e&&n("deleteFileInput",s=e.deleteFileInput)},{files:r,descriptions:l,index:o,deleteFileInput:s,deleteFile:function(){s(o)},change_handler:e=>n("files",r[o]=e.currentTarget.files[0],r),input1_input_handler:function(){l[o]=this.value,n("descriptions",l),n("index",o)}}}class Be extends le{constructor(e){super(),re(this,e,Me,He,s,{files:0,descriptions:0,index:0,deleteFileInput:0})}}function Pe(e,t,n){const r=Object.create(e);return r.desc=t[n],r.i=n,r}function Qe(e){let t,n,r,l,o;return{c(){t=x("div"),n=y(e.alertText),_(t,"class",r="alert "+(e.error?"alert-danger":"alert-success")+"\r\n        "),_(t,"role","alert")},m(e,r){h(e,t,r),g(t,n),o=!0},p(e,l){o&&!e.alertText||w(n,l.alertText),(!o||e.error&&r!==(r="alert "+(l.error?"alert-danger":"alert-success")+"\r\n        "))&&_(t,"class",r)},i(e){o||(P(()=>{l||(l=X(t,se,{},!0)),l.run(1)}),o=!0)},o(e){l||(l=X(t,se,{},!1)),l.run(0),o=!1},d(e){e&&b(t),e&&l&&l.end()}}}function qe(e){let t;const n=new Be({props:{deleteFileInput:e.deleteFileInput,index:e.i,files:e.files,descriptions:e.fileDescriptions}});return{c(){Z(n.$$.fragment)},m(e,r){ee(n,e,r),t=!0},p(e,t){const r={};e.files&&(r.files=t.files),e.fileDescriptions&&(r.descriptions=t.fileDescriptions),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){te(n,e)}}}function Re(e){let t,n,r,o,s,a,i,c,u,d,p,m,f,y,$,w,O,T,D,E,F,A,S,V,N,L,j,I,H,M,B=(e.error||e.success)&&Qe(e),P=e.fileDescriptions,Q=[];for(let t=0;t<P.length;t+=1)Q[t]=qe(Pe(e,P,t));const q=e=>Y(Q[e],1,1,()=>{Q[e]=null});return{c(){t=x("div"),n=x("main"),B&&B.c(),r=C(),o=x("form"),s=x("div"),a=x("div"),(i=x("div")).innerHTML='<label for="productName">Projektnamn</label> \n            <input type="text" class="form-control" id="productName" name="productName" aria-describedby="emailHelp" placeholder="Projektnamn">',c=C(),u=x("div"),(d=x("label")).textContent="Beställare",p=C(),m=x("input"),y=C(),($=x("div")).innerHTML='<h3>Typ av uppdrag</h3> \n          <div class="form-check"><input class="form-check-input" type="checkbox" value="" id="tillverkning" name="producation"> \n            <label class="form-check-label" for="tillverkning">\n              Tillverkning\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" value="" id="tillverkningsunderlag" name="productionDocumentation"> \n            <label class="form-check-label" for="tillverkningsunderlag">\n              Tillverkningsunderlag\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" value="" id="beräkning" name="calculation"> \n            <label class="form-check-label" for="beräkning">Beräkning</label></div>',w=C(),(O=x("div")).innerHTML='<h3>Beskrivning av produkt</h3> \n          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="productDescription"></textarea>',T=C(),(D=x("div")).innerHTML='<h3>Önskemål</h3> \n          <textarea class="form-control" id="productDescripion" name="wishes" rows="3"></textarea>',E=C(),(F=x("h3")).textContent="Filer",A=C();for(let e=0;e<Q.length;e+=1)Q[e].c();S=C(),(V=x("button")).textContent="Lägg till fil",N=C(),L=x("hr"),j=C(),(I=x("button")).textContent="Gör beställning",_(i,"class","col"),_(d,"for","customer"),_(m,"name","customer"),_(m,"type","text"),_(m,"id","customer"),_(m,"class","form-control"),m.value=f=e.user.name,_(m,"placeholder","Beställare"),_(u,"class","col"),_(a,"class","form-row"),_($,"class","form-group mt-3"),_(O,"class","form-group"),_(D,"class","form-group"),_(V,"class","btn btn-primary"),_(L,"class","my-4"),_(I,"type","submit"),_(I,"class","btn btn-success btn-lg"),_(s,"class","form-group"),_(o,"class","svelte-1lxf9ux"),_(n,"class","svelte-1lxf9ux"),_(t,"class","container-fluid"),M=[k(V,"click",e.addFile),k(o,"submit",e.submitForm)]},m(e,l){h(e,t,l),g(t,n),B&&B.m(n,null),g(n,r),g(n,o),g(o,s),g(s,a),g(a,i),g(a,c),g(a,u),g(u,d),g(u,p),g(u,m),g(s,y),g(s,$),g(s,w),g(s,O),g(s,T),g(s,D),g(s,E),g(s,F),g(s,A);for(let e=0;e<Q.length;e+=1)Q[e].m(s,null);g(s,S),g(s,V),g(s,N),g(s,L),g(s,j),g(s,I),H=!0},p(e,t){if(t.error||t.success?B?(B.p(e,t),K(B,1)):((B=Qe(t)).c(),K(B,1),B.m(n,r)):B&&(G(),Y(B,1,1,()=>{B=null}),J()),(!H||e.user&&f!==(f=t.user.name))&&(m.value=f),e.deleteFileInput||e.files||e.fileDescriptions){let n;for(P=t.fileDescriptions,n=0;n<P.length;n+=1){const r=Pe(t,P,n);Q[n]?(Q[n].p(e,r),K(Q[n],1)):(Q[n]=qe(r),Q[n].c(),K(Q[n],1),Q[n].m(s,S))}for(G(),n=P.length;n<Q.length;n+=1)q(n);J()}},i(e){if(!H){K(B);for(let e=0;e<P.length;e+=1)K(Q[e]);H=!0}},o(e){Y(B),Q=Q.filter(Boolean);for(let e=0;e<Q.length;e+=1)Y(Q[e]);H=!1},d(e){e&&b(t),B&&B.d(),v(Q,e),l(M)}}}function We(e,t,n){let{apiCall:r}=t,{user:l}=t,o=[],s=[],a=!1,i=!1,c="";return e.$set=e=>{"apiCall"in e&&n("apiCall",r=e.apiCall),"user"in e&&n("user",l=e.user)},{apiCall:r,user:l,files:o,fileDescriptions:s,success:a,error:i,alertText:c,addFile:function(e){e.preventDefault(),console.log("add file"),n("fileDescriptions",s=[...s,""]),console.log(s),console.log(o)},submitForm:async function(e){e.preventDefault();const t=e.currentTarget;console.log("form",t);const l=new FormData(t);o.map(e=>l.append("files",e)),l.append("fileDescriptions",s);for(let[e,t]of l.entries())console.log(e,t);(await r("/makeOrder",l,"multipart/form-data")).error?(n("error",i=!0),n("alertText",c="Kunde inte skapa beställning, försök igen senare")):(n("success",a=!0),n("alertText",c="Beställning skapad"),t.reset())},deleteFileInput:function(e){console.log("fileDesc1",s),n("files",o=o.filter((t,n)=>n!==e)),n("fileDescriptions",s=s.filter((t,n)=>n!==e)),console.log("fileDesc",s)}}}class Ue extends le{constructor(e){super(),re(this,e,We,Re,s,{apiCall:0,user:0})}}function Ge(t){let n,r,l,o,s,a,i,c,u,d,p=t.user.name+"",m=t.user.email+"";return{c(){n=x("tr"),r=x("td"),l=y(p),o=C(),s=x("td"),a=y(m),i=C(),(c=x("td")).innerHTML='<button type="button" class="btn btn-warning">Make admin</button>',u=C(),(d=x("td")).innerHTML='<button type="button" class="btn btn-danger">Delete user</button>'},m(e,t){h(e,n,t),g(n,r),g(r,l),g(n,o),g(n,s),g(s,a),g(n,i),g(n,c),g(n,u),g(n,d)},p(e,t){e.user&&p!==(p=t.user.name+"")&&w(l,p),e.user&&m!==(m=t.user.email+"")&&w(a,m)},i:e,o:e,d(e){e&&b(n)}}}function Je(e,t,n){let{user:r}=t;return e.$set=e=>{"user"in e&&n("user",r=e.user)},{user:r}}class Ke extends le{constructor(e){super(),re(this,e,Je,Ge,s,{user:0})}}function Ye(e,t,n){const r=Object.create(e);return r.user=t[n],r}function ze(t){let n;const r=new Ke({props:{user:t.user}});return{c(){Z(r.$$.fragment)},m(e,t){ee(r,e,t),n=!0},p:e,i(e){n||(K(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){te(r,e)}}}function Xe(e){let t,n,r,o,s,a,i,c,u,d,p,m,f,y,$,w,T,D,E,F,A;const S=new Fe({props:{apiCall:e.apiCall}});let V=e.users,N=[];for(let t=0;t<V.length;t+=1)N[t]=ze(Ye(e,V,t));const L=e=>Y(N[e],1,1,()=>{N[e]=null});return{c(){Z(S.$$.fragment),t=C(),n=x("div"),r=x("div"),(o=x("div")).textContent="Användare",s=C(),a=x("div"),i=x("table"),c=x("thead"),(u=x("th")).textContent="Namn",d=C(),(p=x("th")).textContent="Email",m=C(),f=x("th"),y=x("form"),$=x("input"),w=C(),(T=x("button")).textContent="Sök",D=C(),E=x("tbody");for(let e=0;e<N.length;e+=1)N[e].c();_(o,"class","card-header"),_(u,"scope","col"),_(p,"scope","col "),_($,"class","form-control mr-sm-2 "),_($,"type","search"),_($,"placeholder","Sök"),_($,"aria-label","Sök"),_(T,"class","btn btn-success bg my-2 my-sm-0"),_(T,"type","submit"),_(y,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),_(f,"scope","col"),_(f,"colspan","2"),_(c,"class","thead-dark"),_(i,"class","table table-striped table-bordered table-hover"),_(a,"class","table-responsive"),_(r,"class","card"),_(n,"class","container-fluid "),A=[k($,"input",e.input_input_handler),k(y,"submit",Ze)]},m(l,b){ee(S,l,b),h(l,t,b),h(l,n,b),g(n,r),g(r,o),g(r,s),g(r,a),g(a,i),g(i,c),g(c,u),g(c,d),g(c,p),g(c,m),g(c,f),g(f,y),g(y,$),O($,e.searchQuery),g(y,w),g(y,T),g(i,D),g(i,E);for(let e=0;e<N.length;e+=1)N[e].m(E,null);F=!0},p(e,t){const n={};if(e.apiCall&&(n.apiCall=t.apiCall),S.$set(n),e.searchQuery&&O($,t.searchQuery),e.users){let n;for(V=t.users,n=0;n<V.length;n+=1){const r=Ye(t,V,n);N[n]?(N[n].p(e,r),K(N[n],1)):(N[n]=ze(r),N[n].c(),K(N[n],1),N[n].m(E,null))}for(G(),n=V.length;n<N.length;n+=1)L(n);J()}},i(e){if(!F){K(S.$$.fragment,e);for(let e=0;e<V.length;e+=1)K(N[e]);F=!0}},o(e){Y(S.$$.fragment,e),N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)Y(N[e]);F=!1},d(e){te(S,e),e&&b(t),e&&b(n),v(N,e),l(A)}}}function Ze(){}function et(e,t,n){let r,{apiCall:l}=t;return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall)},{apiCall:l,searchQuery:r,users:[{name:"Hugo Persson",email:"hugopersson7@gmail.com",admin:!1}],input_input_handler:function(){r=this.value,n("searchQuery",r)}}}class tt extends le{constructor(e){super(),re(this,e,et,Xe,s,{apiCall:0})}}function nt(t){let n;return{c(){n=y("Checking route")},m(e,t){h(e,n,t)},p:e,i:e,o:e,d(e){e&&b(n)}}}function rt(t){let n;const r=new tt({props:{apiCall:it}});return{c(){Z(r.$$.fragment)},m(e,t){ee(r,e,t),n=!0},p:e,i(e){n||(K(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){te(r,e)}}}function lt(e){let t;const n=new Ue({props:{user:e.userValue,apiCall:it}});return{c(){Z(n.$$.fragment)},m(e,r){ee(n,e,r),t=!0},p(e,t){const r={};e.userValue&&(r.user=t.userValue),n.$set(r)},i(e){t||(K(n.$$.fragment,e),t=!0)},o(e){Y(n.$$.fragment,e),t=!1},d(e){te(n,e)}}}function ot(t){let n;const r=new Le({props:{apiCall:it}});return{c(){Z(r.$$.fragment)},m(e,t){ee(r,e,t),n=!0},p:e,i(e){n||(K(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){te(r,e)}}}function st(t){let n;const r=new he({props:{apiCall:it}});return{c(){Z(r.$$.fragment)},m(e,t){ee(r,e,t),n=!0},p:e,i(e){n||(K(r.$$.fragment,e),n=!0)},o(e){Y(r.$$.fragment,e),n=!1},d(e){te(r,e)}}}function at(e){let t,n,r,l;const o=[st,ot,lt,rt,nt],s=[];function a(e,t){return"authenticate"===t.urlValue?0:"orders"===t.urlValue?1:"makeOrder"===t.urlValue?2:"manageUsers"===t.urlValue?3:4}return t=a(0,e),n=s[t]=o[t](e),{c(){n.c(),r=$()},m(e,n){s[t].m(e,n),h(e,r,n),l=!0},p(e,l){let i=t;(t=a(0,l))===i?s[t].p(e,l):(G(),Y(s[i],1,1,()=>{s[i]=null}),J(),(n=s[t])||(n=s[t]=o[t](l)).c(),K(n,1),n.m(r.parentNode,r))},i(e){l||(K(n),l=!0)},o(e){Y(n),l=!1},d(e){s[t].d(e),e&&b(r)}}}function it(e,t,n){const r=!("multipart/form-data"===n);return console.log(t),new Promise((n,l)=>{const o={method:"POST",mode:"cors",credentials:"include",body:t};r&&(o.headers={"Content-Type":"application/json"}),console.log(o),fetch("http://localhost:8000"+e,o).then(e=>(console.log(e.headers.get("set-cookie")),console.log(document.cookie),e.json())).then(e=>n(e)).catch(e=>l(e))})}function ct(e,t,n){let r,l;return ie.subscribe(e=>n("urlValue",r=e)),"/"===window.location.pathname&&async function(){try{const e=await it("/checkAccount");console.log("user",e),n("userValue",l=e);const t=function(e){try{return e.authenticated?e.admin?"orders":"makeOrder":"authenticate"}catch(e){console.log(e)}}(e);console.log(t),ie.set(t)}catch(e){console.log("err"),console.log(e)}}(),e.$$.update=(e={urlValue:1})=>{e.urlValue&&console.log(r)},{urlValue:r,userValue:l}}return new class extends le{constructor(e){super(),re(this,e,ct,at,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
