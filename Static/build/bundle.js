var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function l(){return Object.create(null)}function a(e){e.forEach(r)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t,n){if(e){const r=d(e,t,n);return e[0](r)}}function d(e,t,r){return e[1]?n({},n(t.$$scope.ctx,e[1](r?r(t):{}))):t.$$scope.ctx}function c(e,t,r,l){return e[1]?n({},n(t.$$scope.changed||{},e[1](l?l(r):{}))):t.$$scope.changed||{}}function u(e){return null==e?"":e}const g=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h="undefined"!=typeof window;let m=h?()=>window.performance.now():()=>Date.now(),p=h?e=>requestAnimationFrame(e):e;const f=new Set;let b,v=!1;function y(){f.forEach(e=>{e[0](m())||(f.delete(e),e[1]())}),v=f.size>0,v&&p(y)}function k(e){let t;return v||(v=!0,p(y)),{promise:new Promise(n=>{f.add(t=[e,n])}),abort(){f.delete(t)}}}function $(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function _(e){return document.createTextNode(e)}function D(){return _(" ")}function M(){return _("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function T(e,t){t=""+t,e.data!==t&&(e.data=t)}function V(e,t){(null!=t||e.value)&&(e.value=t)}function E(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function F(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function N(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function I(e,t,n){e.classList[n?"add":"remove"](t)}function U(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let j,B=0,Y={};function L(e,t,n,r,l,a,o,s=0){const i=16.666/r;let d="{\n";for(let e=0;e<=1;e+=i){const r=t+(n-t)*a(e);d+=100*e+`%{${o(r,1-r)}}\n`}const c=d+`100% {${o(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(c)}_${s}`;if(!Y[u]){if(!b){const e=w("style");document.head.appendChild(e),b=e.sheet}Y[u]=!0,b.insertRule(`@keyframes ${u} ${c}`,b.cssRules.length)}const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${l}ms 1 both`,B+=1,u}function H(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--B&&p(()=>{if(B)return;let e=b.cssRules.length;for(;e--;)b.deleteRule(e);Y={}})}function P(e){j=e}function J(){if(!j)throw new Error("Function called outside component initialization");return j}function W(e){J().$$.on_mount.push(e)}function R(){const e=J();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const l=U(t,n);r.slice().forEach(t=>{t.call(e,l)})}}}const q=[],z=[],G=[],Q=[],K=Promise.resolve();let X,Z=!1;function ee(){Z||(Z=!0,K.then(re))}function te(e){G.push(e)}function ne(e){Q.push(e)}function re(){const e=new Set;do{for(;q.length;){const e=q.shift();P(e),le(e.$$)}for(;z.length;)z.pop()();for(let t=0;t<G.length;t+=1){const n=G[t];e.has(n)||(n(),e.add(n))}G.length=0}while(q.length);for(;Q.length;)Q.pop()();Z=!1}function le(e){null!==e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(te))}function ae(){return X||(X=Promise.resolve(),X.then(()=>{X=null})),X}function oe(e,t,n){e.dispatchEvent(U(`${t?"intro":"outro"}${n}`))}const se=new Set;let ie;function de(){ie={r:0,c:[],p:ie}}function ce(){ie.r||a(ie.c),ie=ie.p}function ue(e,t){e&&e.i&&(se.delete(e),e.i(t))}function ge(e,t,n,r){if(e&&e.o){if(se.has(e))return;se.add(e),ie.c.push(()=>{se.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const he={duration:0};function me(n,r,l){let a,s,i=r(n,l),d=!1,c=0;function u(){a&&H(n,a)}function g(){const{delay:r=0,duration:l=300,easing:o=t,tick:g=e,css:h}=i||he;h&&(a=L(n,0,1,l,r,o,h,c++)),g(0,1);const p=m()+r,f=p+l;s&&s.abort(),d=!0,te(()=>oe(n,!0,"start")),s=k(e=>{if(d){if(e>=f)return g(1,0),oe(n,!0,"end"),u(),d=!1;if(e>=p){const t=o((e-p)/l);g(t,1-t)}}return d})}let h=!1;return{start(){h||(H(n),o(i)?(i=i(),ae().then(g)):g())},invalidate(){h=!1},end(){d&&(u(),d=!1)}}}function pe(n,r,l,s){let i=r(n,l),d=s?0:1,c=null,u=null,g=null;function h(){g&&H(n,g)}function p(e,t){const n=e.b-d;return t*=Math.abs(n),{a:d,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function f(r){const{delay:l=0,duration:o=300,easing:s=t,tick:f=e,css:b}=i||he,v={start:m()+l,b:r};r||(v.group=ie,ie.r+=1),c?u=v:(b&&(h(),g=L(n,d,r,o,l,s,b)),r&&f(0,1),c=p(v,o),te(()=>oe(n,r,"start")),k(e=>{if(u&&e>u.start&&(c=p(u,o),u=null,oe(n,c.b,"start"),b&&(h(),g=L(n,d,c.b,c.duration,0,s,i.css))),c)if(e>=c.end)f(d=c.b,1-d),oe(n,c.b,"end"),u||(c.b?h():--c.group.r||a(c.group.c)),c=null;else if(e>=c.start){const t=e-c.start;d=c.a+c.d*s(t/c.duration),f(d,1-d)}return!(!c&&!u)}))}return{run(e){o(i)?ae().then(()=>{i=i(),f(e)}):f(e)},end(){h(),c=u=null}}}const fe="undefined"!=typeof window?window:global;function be(e,t){ge(e,1,1,()=>{t.delete(e.key)})}function ve(e,t,n){g(e.$$.props,t)&&(t=e.$$.props[t]||t,e.$$.bound[t]=n,n(e.$$.ctx[t]))}function ye(e){e&&e.c()}function ke(e,t,n){const{fragment:l,on_mount:s,on_destroy:i,after_update:d}=e.$$;l&&l.m(t,n),te(()=>{const t=s.map(r).filter(o);i?i.push(...t):a(t),e.$$.on_mount=[]}),d.forEach(te)}function $e(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function Ce(t,n,r,o,s,i){const d=j;P(t);const c=n.props||{},u=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:s,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:l(),dirty:null};let g=!1;u.ctx=r?r(t,c,(e,n,r=n)=>(u.ctx&&s(u.ctx[e],u.ctx[e]=r)&&(u.bound[e]&&u.bound[e](r),g&&function(e,t){e.$$.dirty||(q.push(e),ee(),e.$$.dirty=l()),e.$$.dirty[t]=!0}(t,e)),n)):c,u.update(),g=!0,a(u.before_update),u.fragment=!!o&&o(u.ctx),n.target&&(n.hydrate?u.fragment&&u.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):u.fragment&&u.fragment.c(),n.intro&&ue(t.$$.fragment),ke(t,n.target,n.anchor),re()),P(d)}class Oe{$destroy(){$e(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function xe(e){const t=e-1;return t*t*t+1}function we(e,{delay:n=0,duration:r=400,easing:l=t}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:l,css:e=>`opacity: ${e*a}`}}function _e(e,{delay:t=0,duration:n=400,easing:r=xe,x:l=0,y:a=0,opacity:o=0}){const s=getComputedStyle(e),i=+s.opacity,d="none"===s.transform?"":s.transform,c=i*(1-o);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${d} translate(${(1-e)*l}px, ${(1-e)*a}px);\n\t\t\topacity: ${i-c*t}`}}function De(e,{delay:t=0,duration:n=400,easing:r=xe}){const l=getComputedStyle(e),a=+l.opacity,o=parseFloat(l.height),s=parseFloat(l.paddingTop),i=parseFloat(l.paddingBottom),d=parseFloat(l.marginTop),c=parseFloat(l.marginBottom),u=parseFloat(l.borderTopWidth),g=parseFloat(l.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*o}px;`+`padding-top: ${e*s}px;`+`padding-bottom: ${e*i}px;`+`margin-top: ${e*d}px;`+`margin-bottom: ${e*c}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*g}px;`}}const Me=[];function Ae(t,n=e){let r;const l=[];function a(e){if(s(t,e)&&(t=e,r)){const e=!Me.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),Me.push(n,t)}if(e){for(let e=0;e<Me.length;e+=2)Me[e][0](Me[e+1]);Me.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,s=e){const i=[o,s];return l.push(i),1===l.length&&(r=n(a)||e),o(t),()=>{const e=l.indexOf(i);-1!==e&&l.splice(e,1),0===l.length&&(r(),r=null)}}}}const Se=Ae(""),Te=Ae({});function Ve(e){let t,n,r,l;return{c(){t=w("div"),n=_(e.alertText),S(t,"class","alert alert-danger svelte-1b9x5zl"),S(t,"role","alert")},m(e,r){C(e,t,r),$(t,n),l=!0},p(e,t){l&&!e.alertText||T(n,t.alertText)},i(e){l||(te(()=>{r||(r=pe(t,De,{},!0)),r.run(1)}),l=!0)},o(e){r||(r=pe(t,De,{},!1)),r.run(0),l=!1},d(e){e&&O(t),e&&r&&r.end()}}}function Ee(e){let t,n,r,l,o,s,i,d,c,u,g,h="Registera"===e.headerText&&Ne(e);return{c(){t=w("form"),n=w("div"),h&&h.c(),r=D(),l=w("label"),l.textContent="Email address",o=D(),s=w("input"),i=D(),d=w("button"),d.textContent="Vidare",S(l,"for","exampleInputEmail1"),S(s,"type","email"),S(s,"class","form-control"),S(s,"id","exampleInputEmail1"),S(s,"aria-describedby","emailHelp"),S(s,"placeholder","Din email"),S(n,"class","form-group"),S(d,"type","submit"),S(d,"class","btn btn-primary"),g=[A(s,"input",e.input_input_handler_2),A(t,"submit",e.login)]},m(a,c){C(a,t,c),$(t,n),h&&h.m(n,null),$(n,r),$(n,l),$(n,o),$(n,s),V(s,e.email),$(t,i),$(t,d),u=!0},p(e,t){"Registera"===t.headerText?h?h.p(e,t):(h=Ne(t),h.c(),h.m(n,r)):h&&(h.d(1),h=null),e.email&&s.value!==t.email&&V(s,t.email)},i(e){u||(te(()=>{c||(c=pe(t,De,{},!0)),c.run(1)}),u=!0)},o(e){c||(c=pe(t,De,{},!1)),c.run(0),u=!1},d(e){e&&O(t),h&&h.d(),e&&c&&c.end(),a(g)}}}function Fe(e){let t,n,r,l,o,s,i,d,c,u,g,h,m;return{c(){t=w("form"),n=w("div"),r=w("label"),r.textContent="Verifikation kod",l=D(),o=w("input"),s=D(),i=w("small"),d=_(e.feedbackInformation),c=D(),u=w("button"),u.textContent="Vidare",S(r,"for","verficationCode"),S(o,"autocomplete","off"),S(o,"type","text"),S(o,"class","form-control"),S(o,"id","verficationCode"),S(o,"aria-describedby","emailHelp"),S(o,"placeholder","Skriv in verifikations kod"),S(i,"id","emailHelp"),S(i,"class","form-text text-muted"),S(n,"class","form-group"),S(u,"type","submit"),S(u,"class","btn btn-primary"),m=[A(o,"input",e.input_input_handler),A(t,"submit",e.verifyWithCode)]},m(a,g){C(a,t,g),$(t,n),$(n,r),$(n,l),$(n,o),V(o,e.verificationCode),$(n,s),$(n,i),$(i,d),$(t,c),$(t,u),h=!0},p(e,t){e.verificationCode&&o.value!==t.verificationCode&&V(o,t.verificationCode),h&&!e.feedbackInformation||T(d,t.feedbackInformation)},i(e){h||(te(()=>{g||(g=pe(t,De,{},!0)),g.run(1)}),h=!0)},o(e){g||(g=pe(t,De,{},!1)),g.run(0),h=!1},d(e){e&&O(t),e&&g&&g.end(),a(m)}}}function Ne(e){let t,n,r,l,a;return{c(){t=w("div"),n=w("label"),n.textContent="Name",r=D(),l=w("input"),S(n,"for","exampleInputPassword1"),S(l,"type","text"),S(l,"class","form-control"),S(l,"id","nameInput"),S(l,"placeholder","Ditt name"),S(t,"class","form-group"),a=A(l,"input",e.input_input_handler_1)},m(a,o){C(a,t,o),$(t,n),$(t,r),$(t,l),V(l,e.name)},p(e,t){e.name&&l.value!==t.name&&V(l,t.name)},d(e){e&&O(t),a()}}}function Ie(e){let t;return{c(){t=w("div"),t.innerHTML='<span class="sr-only">Loading...</span>',S(t,"class","spinner-border text-primary svelte-1b9x5zl"),S(t,"role","status")},m(e,n){C(e,t,n)},d(e){e&&O(t)}}}function Ue(e){let t,n,r,l,a,o,s,i,d,c,g,h,m,p,f,b,v,y,k=e.error&&Ve(e);const x=[Fe,Ee],M=[];function A(e,t){return t.verify?0:1}i=A(0,e),d=M[i]=x[i](e);let V=e.loading&&Ie();return{c(){t=w("main"),k&&k.c(),n=D(),r=w("div"),l=w("header"),a=w("h1"),o=_(e.headerText),s=D(),d.c(),c=D(),g=w("div"),V&&V.c(),h=D(),m=w("div"),p=w("div"),f=_(e.progress),S(p,"class","progress-bar"),S(p,"role","progressbar"),S(p,"style",b="width:"+e.progress),S(p,"aria-valuenow","25"),S(p,"aria-valuemin","0"),S(p,"aria-valuemax","100"),S(m,"class","progress svelte-1b9x5zl"),S(g,"id","progressContainer"),S(g,"class","svelte-1b9x5zl"),S(r,"id","login"),S(r,"class","svelte-1b9x5zl"),S(t,"class",v=u("100%"===e.progress?"bg-success":"bg-primary")+" svelte-1b9x5zl")},m(e,d){C(e,t,d),k&&k.m(t,null),$(t,n),$(t,r),$(r,l),$(l,a),$(a,o),$(r,s),M[i].m(r,null),$(r,c),$(r,g),V&&V.m(g,null),$(g,h),$(g,m),$(m,p),$(p,f),y=!0},p(e,l){l.error?k?(k.p(e,l),ue(k,1)):(k=Ve(l),k.c(),ue(k,1),k.m(t,n)):k&&(de(),ge(k,1,1,()=>{k=null}),ce()),y&&!e.headerText||T(o,l.headerText);let a=i;i=A(0,l),i===a?M[i].p(e,l):(de(),ge(M[a],1,1,()=>{M[a]=null}),ce(),d=M[i],d||(d=M[i]=x[i](l),d.c()),ue(d,1),d.m(r,c)),l.loading?V||(V=Ie(),V.c(),V.m(g,h)):V&&(V.d(1),V=null),y&&!e.progress||T(f,l.progress),(!y||e.progress&&b!==(b="width:"+l.progress))&&S(p,"style",b),(!y||e.progress&&v!==(v=u("100%"===l.progress?"bg-success":"bg-primary")+" svelte-1b9x5zl"))&&S(t,"class",v)},i(e){y||(ue(k),ue(d),y=!0)},o(e){ge(k),ge(d),y=!1},d(e){e&&O(t),k&&k.d(),M[i].d(),V&&V.d()}}}function je(e,t,n){let r,l,a,o,{apiCall:s}=t,i=!1,d="Logga in/Registera",c=!1,u="0%",g="",h=!1,m="";return e.$set=e=>{"apiCall"in e&&n("apiCall",s=e.apiCall)},{apiCall:s,email:r,name:l,headerText:d,verify:c,verificationCode:a,loading:o,progress:u,alertText:g,error:h,feedbackInformation:m,login:async function(e){if(e.preventDefault(),console.log(i),i)!async function(e){e.preventDefault();try{n("loading",o=!0);const e=await s("/registerUser",JSON.stringify({name:l,email:r}));if(n("loading",o=!1),e.error){if("AccountExists"==e.message)n("error",h=!0),n("alertText",g="Konto med den epost adressen finns redan")}else n("progress",u="66%"),n("verify",c=!0),n("headerText",d="Verifiera konto"),n("feedbackInformation",m="Ett mail har skickats med verifikations koden till "+r)}catch(e){console.log(e)}}(e);else try{n("loading",o=!0);const e=await s("/login",JSON.stringify({email:r}));e.error?"NoAccount"===e.message?(n("progress",u="33%"),i=!0,n("loading",o=!1),n("headerText",d="Registera")):"NotActive"===e.message&&(n("error",h=!0),n("alertText",g="Kontot är inaktivt, kontakta en admin för att göra det aktivt igen"),n("loading",o=!1)):(n("loading",o=!1),console.log("Login no error"),n("headerText",d="Verifiera inloggning"),n("progress",u="50%"),n("feedbackInformation",m="Ett mail har skickats med verifikations koden till "+r),n("verify",c=!0))}catch(e){console.log(e)}},verifyWithCode:async function(e){try{console.log("code"),e.preventDefault();const t=await s("/verifyWithCode",JSON.stringify({verificationCode:a}));console.log("CALL: ",t),t.error?"WrongCode"===t.message?(n("error",h=!0),n("alertText",g="Fel verifikations kod, försök igen")):"NoToken"==t.message?(alert("Verifikations sessionen har gått ut, sidan kommer laddas om"),location.reload()):"TooManyWrongs"==t.message&&(alert("Du har skrivit in fel kod för många gånger, sidan kommer laddas om och du får logga in på nytt"),location.reload()):(Te.set({user:t.user}),t.user.admin?Se.set("allOrders"):Se.set("makeOrder"))}catch(e){console.log(e)}},input_input_handler:function(){a=this.value,n("verificationCode",a)},input_input_handler_1:function(){l=this.value,n("name",l)},input_input_handler_2:function(){r=this.value,n("email",r)}}}class Be extends Oe{constructor(e){super(),Ce(this,e,je,Ue,s,{apiCall:0})}}function Ye(e){let t,n=e.files[e.index].name+"";return{c(){t=_(n)},m(e,n){C(e,t,n)},p(e,r){(e.files||e.index)&&n!==(n=r.files[r.index].name+"")&&T(t,n)},d(e){e&&O(t)}}}function Le(t){let n;return{c(){n=_("Välj fil")},m(e,t){C(e,n,t)},p:e,d(e){e&&O(n)}}}function He(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f;function b(e,t){return void 0===t.files[t.index]?Le:Ye}let v=b(0,e),y=v(e);return{c(){t=w("div"),n=w("div"),r=w("div"),l=w("input"),s=D(),i=w("label"),y.c(),d=D(),c=w("div"),u=w("input"),g=D(),h=w("button"),h.innerHTML='<span aria-hidden="true">×</span>',S(l,"type","file"),S(l,"class","custom-file-input"),S(l,"id",e.index),S(l,"aria-describedby","inputGroupFileAddon01"),l.multiple=o=!1,S(i,"class","custom-file-label text-truncate"),S(i,"data-browse","Ladda upp"),S(i,"for",e.index),S(r,"class","col-4"),S(u,"type","text"),S(u,"class","form-control"),S(u,"placeholder","Fil information"),S(c,"class","col-7"),S(h,"type","button"),S(h,"class","close"),S(h,"data-dismiss","modal"),S(h,"aria-label","Close"),S(n,"class","form-row"),S(t,"class","form-group"),f=[A(l,"change",e.change_handler),A(u,"input",e.input1_input_handler),A(h,"click",e.deleteFile)]},m(a,o){C(a,t,o),$(t,n),$(n,r),$(r,l),$(r,s),$(r,i),y.m(i,null),$(n,d),$(n,c),$(c,u),V(u,e.descriptions[e.index]),$(n,g),$(n,h),p=!0},p(e,t){p&&!e.index||S(l,"id",t.index),v===(v=b(0,t))&&y?y.p(e,t):(y.d(1),y=v(t),y&&(y.c(),y.m(i,null))),p&&!e.index||S(i,"for",t.index),(e.descriptions||e.index)&&u.value!==t.descriptions[t.index]&&V(u,t.descriptions[t.index])},i(e){p||(te(()=>{m||(m=pe(t,De,{},!0)),m.run(1)}),p=!0)},o(e){m||(m=pe(t,De,{},!1)),m.run(0),p=!1},d(e){e&&O(t),y.d(),e&&m&&m.end(),a(f)}}}function Pe(e,t,n){let{files:r}=t,{descriptions:l}=t,{index:a}=t,{deleteFileInput:o}=t;console.log(r);return e.$set=e=>{"files"in e&&n("files",r=e.files),"descriptions"in e&&n("descriptions",l=e.descriptions),"index"in e&&n("index",a=e.index),"deleteFileInput"in e&&n("deleteFileInput",o=e.deleteFileInput)},{files:r,descriptions:l,index:a,deleteFileInput:o,deleteFile:function(){o(a)},change_handler:e=>n("files",r[a]=e.currentTarget.files[0],r),input1_input_handler:function(){l[a]=this.value,n("descriptions",l),n("index",a)}}}class Je extends Oe{constructor(e){super(),Ce(this,e,Pe,He,s,{files:0,descriptions:0,index:0,deleteFileInput:0})}}function We(t){let n,r,l,o,s,i,d,c,u,g,h,m,p,f,b;return{c(){n=w("nav"),r=w("span"),r.textContent="Användare",l=D(),o=w("div"),s=w("div"),i=w("a"),d=_("Gör en beställning"),u=D(),g=w("a"),h=_("Mina beställningar"),p=D(),f=w("a"),f.textContent="Logga ut",S(r,"class","navbar-brand mb-0 h1"),S(i,"href","#"),S(i,"class",c="nav-item nav-link "+("makeOrder"===t.urlValue?"active":"")),S(g,"href","#"),S(g,"class",m="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        "),S(f,"class","nav-item nav-link"),S(f,"href","#"),S(s,"class","navbar-nav"),S(o,"class"," navbar"),S(o,"id","navbarNavAltMarkup"),S(n,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),b=[A(i,"click",t.click_handler),A(g,"click",t.click_handler_1),A(f,"click",t.logOut)]},m(e,t){C(e,n,t),$(n,r),$(n,l),$(n,o),$(o,s),$(s,i),$(i,d),$(s,u),$(s,g),$(g,h),$(s,p),$(s,f)},p(e,t){e.urlValue&&c!==(c="nav-item nav-link "+("makeOrder"===t.urlValue?"active":""))&&S(i,"class",c),e.urlValue&&m!==(m="nav-item nav-link "+("myOrders"===t.urlValue?"active":"")+"\r\n        ")&&S(g,"class",m)},i:e,o:e,d(e){e&&O(n),a(b)}}}function Re(e,t){e&&e.preventDefault(),Se.set(t)}function qe(e,t,n){let r,{apiCall:l}=t;Se.subscribe(e=>n("urlValue",r=e));return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall)},{apiCall:l,urlValue:r,logOut:async function(e){try{e&&e.preventDefault(),(await l("/logOut")).error?alert("Kunde inte logga ut"):Se.set("authenticate")}catch(e){console.log(e)}},click_handler:e=>Re(e,"makeOrder"),click_handler_1:e=>Re(e,"myOrders")}}class ze extends Oe{constructor(e){super(),Ce(this,e,qe,We,s,{apiCall:0})}}function Ge(e,t,n){const r=Object.create(e);return r.desc=t[n],r.i=n,r}function Qe(t){let n,r,l,a;return{c(){n=w("div"),r=_(t.alertText),S(n,"class",l="alert "+(t.error?"alert-danger":"alert-success")+"\r\n        "),S(n,"role","alert")},m(e,t){C(e,n,t),$(n,r)},p(e,t){e.alertText&&T(r,t.alertText),e.error&&l!==(l="alert "+(t.error?"alert-danger":"alert-success")+"\r\n        ")&&S(n,"class",l)},i(e){a||te(()=>{a=me(n,De,{}),a.start()})},o:e,d(e){e&&O(n)}}}function Ke(e){let t;const n=new Je({props:{deleteFileInput:e.deleteFileInput,index:e.i,files:e.files,descriptions:e.fileDescriptions}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.files&&(r.files=t.files),e.fileDescriptions&&(r.descriptions=t.fileDescriptions),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Xe(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,_,M,T,E,F,N,I,U,j,B,Y,L;const H=new ze({props:{apiCall:e.apiCall}});let P=(e.error||e.success)&&Qe(e),J=e.fileDescriptions,W=[];for(let t=0;t<J.length;t+=1)W[t]=Ke(Ge(e,J,t));const R=e=>ge(W[e],1,1,()=>{W[e]=null});return{c(){t=w("header"),ye(H.$$.fragment),n=D(),r=w("div"),l=w("main"),P&&P.c(),o=D(),s=w("form"),i=w("div"),d=w("div"),c=w("div"),c.innerHTML='<label for="productName">Projektnamn</label> \n            <input type="text" class="form-control" id="productName" name="productName" aria-describedby="emailHelp" placeholder="Projektnamn">',u=D(),g=w("div"),h=w("label"),h.textContent="Beställare",m=D(),p=w("input"),f=D(),b=w("div"),b.innerHTML='<h3>Typ av uppdrag</h3> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkning" name="production"> \n            <label class="form-check-label" for="tillverkning">\n              Tillverkning\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="tillverkningsunderlag" name="productionDocumentation"> \n            <label class="form-check-label" for="tillverkningsunderlag">\n              Tillverkningsunderlag\n            </label></div> \n          <div class="form-check"><input class="form-check-input" type="checkbox" id="beräkning" name="calculation"> \n            <label class="form-check-label" for="beräkning">Beräkning</label></div>',v=D(),y=w("div"),y.innerHTML='<h3>Beskrivning av produkt</h3> \n          <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="productDescription"></textarea>',k=D(),_=w("div"),_.innerHTML='<h3>Önskemål</h3> \n          <textarea class="form-control" id="productDescripion" name="wishes" rows="3"></textarea>',M=D(),T=w("h3"),T.textContent="Filer",E=D();for(let e=0;e<W.length;e+=1)W[e].c();F=D(),N=w("button"),N.textContent="Lägg till fil",I=D(),U=w("hr"),j=D(),B=w("button"),B.textContent="Gör beställning",S(c,"class","col"),S(h,"for","customer"),S(p,"name","customer"),S(p,"type","text"),S(p,"id","customer"),S(p,"class","form-control"),S(p,"placeholder","Beställare"),S(g,"class","col"),S(d,"class","form-row"),S(b,"class","form-group mt-3"),S(y,"class","form-group"),S(_,"class","form-group"),S(N,"class","btn btn-primary"),S(U,"class","my-4"),S(B,"type","submit"),S(B,"class","btn btn-success btn-lg"),S(i,"class","form-group"),S(s,"class","svelte-1lxf9ux"),S(l,"class","svelte-1lxf9ux"),S(r,"class","container-fluid"),L=[A(p,"input",e.input1_input_handler),A(N,"click",e.addFile),A(s,"submit",e.submitForm)]},m(a,O){C(a,t,O),ke(H,t,null),C(a,n,O),C(a,r,O),$(r,l),P&&P.m(l,null),$(l,o),$(l,s),$(s,i),$(i,d),$(d,c),$(d,u),$(d,g),$(g,h),$(g,m),$(g,p),V(p,e.user.name),$(i,f),$(i,b),$(i,v),$(i,y),$(i,k),$(i,_),$(i,M),$(i,T),$(i,E);for(let e=0;e<W.length;e+=1)W[e].m(i,null);$(i,F),$(i,N),$(i,I),$(i,U),$(i,j),$(i,B),Y=!0},p(e,t){const n={};if(e.apiCall&&(n.apiCall=t.apiCall),H.$set(n),t.error||t.success?P?(P.p(e,t),ue(P,1)):(P=Qe(t),P.c(),ue(P,1),P.m(l,o)):P&&(P.d(1),P=null),e.user&&p.value!==t.user.name&&V(p,t.user.name),e.deleteFileInput||e.files||e.fileDescriptions){let n;for(J=t.fileDescriptions,n=0;n<J.length;n+=1){const r=Ge(t,J,n);W[n]?(W[n].p(e,r),ue(W[n],1)):(W[n]=Ke(r),W[n].c(),ue(W[n],1),W[n].m(i,F))}for(de(),n=J.length;n<W.length;n+=1)R(n);ce()}},i(e){if(!Y){ue(H.$$.fragment,e),ue(P);for(let e=0;e<J.length;e+=1)ue(W[e]);Y=!0}},o(e){ge(H.$$.fragment,e),W=W.filter(Boolean);for(let e=0;e<W.length;e+=1)ge(W[e]);Y=!1},d(e){e&&O(t),$e(H),e&&O(n),e&&O(r),P&&P.d(),x(W,e),a(L)}}}function Ze(e,t,n){let{apiCall:r}=t,{user:l}=t,a=[],o=[],s=!1,i=!1,d="";return async function(){l||n("user",l=await r("/checkAccount"))}(),e.$set=e=>{"apiCall"in e&&n("apiCall",r=e.apiCall),"user"in e&&n("user",l=e.user)},{apiCall:r,user:l,files:a,fileDescriptions:o,success:s,error:i,alertText:d,addFile:function(e){e.preventDefault(),console.log("add file"),n("fileDescriptions",o=[...o,""]),console.log(o),console.log(a)},submitForm:async function(e){e.preventDefault();const t=e.currentTarget;console.log("form",t);const c=new FormData(t);a.map(e=>c.append("files",e)),c.append("fileDescriptions",o);for(let[e,t]of c.entries())console.log(e,t);(await r("/makeOrder",c,"multipart/form-data")).error?(n("error",i=!0),n("alertText",d="Kunde inte skapa beställning, försök igen senare")):(n("success",s=!0),n("alertText",d="Beställning skapad"),t.reset(),n("user",l),n("files",a=[]),n("fileDescriptions",o=[]))},deleteFileInput:function(e){console.log("fileDesc1",o),n("files",a=a.filter((t,n)=>n!==e)),n("fileDescriptions",o=o.filter((t,n)=>n!==e)),console.log("fileDesc",o)},input1_input_handler:function(){l.name=this.value,n("user",l)}}}class et extends Oe{constructor(e){super(),Ce(this,e,Ze,Xe,s,{apiCall:0,user:0})}}const tt=(e,t,n,r=0)=>{let l=new Date(t,e,1);l.setDate(l.getDate()-l.getDay()+r);let a=11===e?0:e+1,o=[];for(;l.getMonth()!==a||l.getDay()!==r||6!==o.length;){l.getDay()===r&&o.unshift({days:[],id:`${t}${e}${t}${o.length}`});const a=Object.assign({partOfMonth:l.getMonth()===e,day:l.getDate(),month:l.getMonth(),year:l.getFullYear(),date:new Date(l)},n(l));o[0].days.push(a),l.setDate(l.getDate()+1)}return o.reverse(),{month:e,year:t,weeks:o}},nt=(e,t,n)=>{let r=new Date;return r.setHours(0,0,0,0),l=>{const a=l>=e&&l<=t;return{isInRange:a,selectable:a&&(!n||n(l)),isToday:l.getTime()===r.getTime()}}};const rt=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();function lt(e,t,n){const r=Object.create(e);return r.day=t[n],r}function at(e){let t,n,r,l,a,o=e.day.date.getDate()+"";function s(...t){return e.click_handler(e,...t)}return{c(){t=w("div"),n=w("button"),r=_(o),l=D(),S(n,"class","day--label svelte-5wjnn4"),S(n,"type","button"),I(n,"selected",rt(e.day.date,e.selected)),I(n,"highlighted",rt(e.day.date,e.highlighted)),I(n,"shake-date",e.shouldShakeDate&&rt(e.day.date,e.shouldShakeDate)),I(n,"disabled",!e.day.selectable),S(t,"class","day svelte-5wjnn4"),I(t,"outside-month",!e.day.partOfMonth),I(t,"is-today",e.day.isToday),I(t,"is-disabled",!e.day.selectable),a=A(n,"click",s)},m(e,a){C(e,t,a),$(t,n),$(n,r),$(t,l)},p(l,a){e=a,l.days&&o!==(o=e.day.date.getDate()+"")&&T(r,o),(l.areDatesEquivalent||l.days||l.selected)&&I(n,"selected",rt(e.day.date,e.selected)),(l.areDatesEquivalent||l.days||l.highlighted)&&I(n,"highlighted",rt(e.day.date,e.highlighted)),(l.shouldShakeDate||l.areDatesEquivalent||l.days)&&I(n,"shake-date",e.shouldShakeDate&&rt(e.day.date,e.shouldShakeDate)),l.days&&I(n,"disabled",!e.day.selectable),l.days&&I(t,"outside-month",!e.day.partOfMonth),l.days&&I(t,"is-today",e.day.isToday),l.days&&I(t,"is-disabled",!e.day.selectable)},d(e){e&&O(t),a()}}}function ot(n){let r,l,s,i,d=n.days,c=[];for(let e=0;e<d.length;e+=1)c[e]=at(lt(n,d,e));return{c(){r=w("div");for(let e=0;e<c.length;e+=1)c[e].c();S(r,"class","week svelte-5wjnn4")},m(e,t){C(e,r,t);for(let e=0;e<c.length;e+=1)c[e].m(r,null);i=!0},p(e,t){if(e.days||e.areDatesEquivalent||e.selected||e.highlighted||e.shouldShakeDate||e.dispatch){let n;for(d=t.days,n=0;n<d.length;n+=1){const l=lt(t,d,n);c[n]?c[n].p(e,l):(c[n]=at(l),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=d.length}},i(e){i||(te(()=>{s&&s.end(1),l||(l=me(r,_e,{x:50*n.direction,duration:180,delay:90})),l.start()}),i=!0)},o(n){l&&l.invalidate(),s=function(n,r,l){let s,i=r(n,l),d=!0;const c=ie;function u(){const{delay:r=0,duration:l=300,easing:o=t,tick:u=e,css:g}=i||he;g&&(s=L(n,1,0,l,r,o,g));const h=m()+r,p=h+l;te(()=>oe(n,!1,"start")),k(e=>{if(d){if(e>=p)return u(0,1),oe(n,!1,"end"),--c.r||a(c.c),!1;if(e>=h){const t=o((e-h)/l);u(1-t,t)}}return d})}return c.r+=1,o(i)?ae().then(()=>{i=i(),u()}):u(),{end(e){e&&i.tick&&i.tick(1,0),d&&(s&&H(n,s),d=!1)}}}(r,we,{duration:180}),i=!1},d(e){e&&O(r),x(c,e),e&&s&&s.end()}}}function st(e,t,n){const r=R();let{days:l}=t,{selected:a}=t,{highlighted:o}=t,{shouldShakeDate:s}=t,{direction:i}=t;return e.$set=e=>{"days"in e&&n("days",l=e.days),"selected"in e&&n("selected",a=e.selected),"highlighted"in e&&n("highlighted",o=e.highlighted),"shouldShakeDate"in e&&n("shouldShakeDate",s=e.shouldShakeDate),"direction"in e&&n("direction",i=e.direction)},{dispatch:r,days:l,selected:a,highlighted:o,shouldShakeDate:s,direction:i,click_handler:({day:e})=>r("dateSelected",e.date)}}class it extends Oe{constructor(e){super(),Ce(this,e,st,ot,s,{days:0,selected:0,highlighted:0,shouldShakeDate:0,direction:0})}}function dt(e,t,n){const r=Object.create(e);return r.week=t[n],r}function ct(e,t){let n,r;const l=new it({props:{days:t.week.days,selected:t.selected,highlighted:t.highlighted,shouldShakeDate:t.shouldShakeDate,direction:t.direction}});return l.$on("dateSelected",t.dateSelected_handler),{key:e,first:null,c(){n=M(),ye(l.$$.fragment),this.first=n},m(e,t){C(e,n,t),ke(l,e,t),r=!0},p(e,t){const n={};e.visibleMonth&&(n.days=t.week.days),e.selected&&(n.selected=t.selected),e.highlighted&&(n.highlighted=t.highlighted),e.shouldShakeDate&&(n.shouldShakeDate=t.shouldShakeDate),e.direction&&(n.direction=t.direction),l.$set(n)},i(e){r||(ue(l.$$.fragment,e),r=!0)},o(e){ge(l.$$.fragment,e),r=!1},d(e){e&&O(n),$e(l,e)}}}function ut(e){let t,n,r=[],l=new Map,a=e.visibleMonth.weeks;const o=e=>e.week.id;for(let t=0;t<a.length;t+=1){let n=dt(e,a,t),s=o(n);l.set(s,r[t]=ct(s,n))}return{c(){t=w("div");for(let e=0;e<r.length;e+=1)r[e].c();S(t,"class","month-container svelte-1y5dcxc")},m(e,l){C(e,t,l);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,n){const a=n.visibleMonth.weeks;de(),r=function(e,t,n,r,l,a,o,s,i,d,c,u){let g=e.length,h=a.length,m=g;const p={};for(;m--;)p[e[m].key]=m;const f=[],b=new Map,v=new Map;for(m=h;m--;){const e=u(l,a,m),s=n(e);let i=o.get(s);i?r&&i.p(t,e):(i=d(s,e),i.c()),b.set(s,f[m]=i),s in p&&v.set(s,Math.abs(m-p[s]))}const y=new Set,k=new Set;function $(e){ue(e,1),e.m(s,c),o.set(e.key,e),c=e.first,h--}for(;g&&h;){const t=f[h-1],n=e[g-1],r=t.key,l=n.key;t===n?(c=t.first,g--,h--):b.has(l)?!o.has(r)||y.has(r)?$(t):k.has(l)?g--:v.get(r)>v.get(l)?(k.add(r),$(t)):(y.add(l),g--):(i(n,o),g--)}for(;g--;){const t=e[g];b.has(t.key)||i(t,o)}for(;h;)$(f[h-1]);return f}(r,e,o,1,n,a,l,t,be,ct,null,dt),ce()},i(e){if(!n){for(let e=0;e<a.length;e+=1)ue(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)ge(r[e]);n=!1},d(e){e&&O(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function gt(e,t,n){let r,{id:l}=t,{visibleMonth:a}=t,{selected:o}=t,{highlighted:s}=t,{shouldShakeDate:i}=t,d=l;return e.$set=e=>{"id"in e&&n("id",l=e.id),"visibleMonth"in e&&n("visibleMonth",a=e.visibleMonth),"selected"in e&&n("selected",o=e.selected),"highlighted"in e&&n("highlighted",s=e.highlighted),"shouldShakeDate"in e&&n("shouldShakeDate",i=e.shouldShakeDate)},e.$$.update=(e={lastId:1,id:1})=>{(e.lastId||e.id)&&(n("direction",r=d<l?1:-1),n("lastId",d=l))},{id:l,visibleMonth:a,selected:o,highlighted:s,shouldShakeDate:i,direction:r,dateSelected_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)}}}class ht extends Oe{constructor(e){super(),Ce(this,e,gt,ut,s,{id:0,visibleMonth:0,selected:0,highlighted:0,shouldShakeDate:0})}}const{Object:mt}=fe;function pt(e,t,n){const r=mt.create(e);return r.monthDefinition=t[n],r.index=n,r}function ft(e){let t,n,r,l,a,o=e.monthDefinition.abbrev+"";function s(...t){return e.click_handler_2(e,...t)}return{c(){t=w("div"),n=w("span"),r=_(o),l=D(),S(n,"class","svelte-1uccyem"),S(t,"class","month-selector--month svelte-1uccyem"),I(t,"selected",e.index===e.month),I(t,"selectable",e.monthDefinition.selectable),a=A(t,"click",s)},m(e,a){C(e,t,a),$(t,n),$(n,r),$(t,l)},p(n,l){e=l,n.availableMonths&&o!==(o=e.monthDefinition.abbrev+"")&&T(r,o),n.month&&I(t,"selected",e.index===e.month),n.availableMonths&&I(t,"selectable",e.monthDefinition.selectable)},d(e){e&&O(t),a()}}}function bt(t){let n,r,l,o,s,i,d,c,u,g,h,m,p,f=t.monthsOfYear[t.month][0]+"",b=t.availableMonths,v=[];for(let e=0;e<b.length;e+=1)v[e]=ft(pt(t,b,e));return{c(){n=w("div"),r=w("div"),l=w("div"),l.innerHTML='<i class="arrow left svelte-1uccyem"></i>',o=D(),s=w("div"),i=_(f),d=D(),c=_(t.year),u=D(),g=w("div"),g.innerHTML='<i class="arrow right svelte-1uccyem"></i>',h=D(),m=w("div");for(let e=0;e<v.length;e+=1)v[e].c();S(l,"class","control svelte-1uccyem"),I(l,"enabled",t.canDecrementMonth),S(s,"class","label svelte-1uccyem"),S(g,"class","control svelte-1uccyem"),I(g,"enabled",t.canIncrementMonth),S(r,"class","heading-section svelte-1uccyem"),S(m,"class","month-selector svelte-1uccyem"),I(m,"open",t.monthSelectorOpen),S(n,"class","title"),p=[A(l,"click",t.click_handler),A(s,"click",t.toggleMonthSelectorOpen),A(g,"click",t.click_handler_1)]},m(e,t){C(e,n,t),$(n,r),$(r,l),$(r,o),$(r,s),$(s,i),$(s,d),$(s,c),$(r,u),$(r,g),$(n,h),$(n,m);for(let e=0;e<v.length;e+=1)v[e].m(m,null)},p(e,t){if(e.canDecrementMonth&&I(l,"enabled",t.canDecrementMonth),(e.monthsOfYear||e.month)&&f!==(f=t.monthsOfYear[t.month][0]+"")&&T(i,f),e.year&&T(c,t.year),e.canIncrementMonth&&I(g,"enabled",t.canIncrementMonth),e.month||e.availableMonths||e.monthSelected){let n;for(b=t.availableMonths,n=0;n<b.length;n+=1){const r=pt(t,b,n);v[n]?v[n].p(e,r):(v[n]=ft(r),v[n].c(),v[n].m(m,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=b.length}e.monthSelectorOpen&&I(m,"open",t.monthSelectorOpen)},i:e,o:e,d(e){e&&O(n),x(v,e),a(p)}}}function vt(e,t,n){const r=R();let l,{month:a}=t,{year:o}=t,{start:s}=t,{end:i}=t,{canIncrementMonth:d}=t,{canDecrementMonth:c}=t,{monthsOfYear:u}=t,g=!1;function h(){n("monthSelectorOpen",g=!g)}function m(e,{m:t,i:n}){e.stopPropagation(),t.selectable&&(r("monthSelected",n),h())}return e.$set=e=>{"month"in e&&n("month",a=e.month),"year"in e&&n("year",o=e.year),"start"in e&&n("start",s=e.start),"end"in e&&n("end",i=e.end),"canIncrementMonth"in e&&n("canIncrementMonth",d=e.canIncrementMonth),"canDecrementMonth"in e&&n("canDecrementMonth",c=e.canDecrementMonth),"monthsOfYear"in e&&n("monthsOfYear",u=e.monthsOfYear)},e.$$.update=(e={start:1,year:1,end:1,monthsOfYear:1})=>{if(e.start||e.year||e.end||e.monthsOfYear){let e=s.getFullYear()===o,t=i.getFullYear()===o;n("availableMonths",l=u.map((n,r)=>Object.assign({},{name:n[0],abbrev:n[1]},{selectable:!e&&!t||(!e||r>=s.getMonth())&&(!t||r<=i.getMonth())})))}},{dispatch:r,month:a,year:o,start:s,end:i,canIncrementMonth:d,canDecrementMonth:c,monthsOfYear:u,monthSelectorOpen:g,availableMonths:l,toggleMonthSelectorOpen:h,monthSelected:m,click_handler:()=>r("incrementMonth",-1),click_handler_1:()=>r("incrementMonth",1),click_handler_2:({monthDefinition:e,index:t},n)=>m(n,{m:e,i:t})}}class yt extends Oe{constructor(e){super(),Ce(this,e,vt,bt,s,{month:0,year:0,start:0,end:0,canIncrementMonth:0,canDecrementMonth:0,monthsOfYear:0})}}const{window:kt}=fe,$t=()=>({}),Ct=()=>({}),Ot=()=>({}),xt=()=>({});function wt(e){let t,n,r,l,o,s,u,g;te(e.onwindowresize);const h=e.$$slots.trigger,m=i(h,e,xt),p=e.$$slots.contents,f=i(p,e,Ct);return{c(){t=w("div"),n=w("div"),m&&m.c(),r=D(),l=w("div"),o=w("div"),s=w("div"),f&&f.c(),S(n,"class","trigger"),S(s,"class","contents-inner svelte-1wmex1c"),S(o,"class","contents svelte-1wmex1c"),S(l,"class","contents-wrapper svelte-1wmex1c"),E(l,"transform","translate(-50%,-50%) translate("+e.translateX+"px, "+e.translateY+"px)"),I(l,"visible",e.open),I(l,"shrink",e.shrink),S(t,"class","sc-popover svelte-1wmex1c"),g=[A(kt,"resize",e.onwindowresize),A(n,"click",e.doOpen)]},m(a,i){C(a,t,i),$(t,n),m&&m.m(n,null),e.div0_binding(n),$(t,r),$(t,l),$(l,o),$(o,s),f&&f.m(s,null),e.div2_binding(o),e.div3_binding(l),e.div4_binding(t),u=!0},p(e,t){m&&m.p&&e.$$scope&&m.p(c(h,t,e,Ot),d(h,t,xt)),f&&f.p&&e.$$scope&&f.p(c(p,t,e,$t),d(p,t,Ct)),(!u||e.translateX||e.translateY)&&E(l,"transform","translate(-50%,-50%) translate("+t.translateX+"px, "+t.translateY+"px)"),e.open&&I(l,"visible",t.open),e.shrink&&I(l,"shrink",t.shrink)},i(e){u||(ue(m,e),ue(f,e),u=!0)},o(e){ge(m,e),ge(f,e),u=!1},d(n){n&&O(t),m&&m.d(n),e.div0_binding(null),f&&f.d(n),e.div2_binding(null),e.div3_binding(null),e.div4_binding(null),a(g)}}}function _t(e,t,n){const r=R();let l,a,o,s,i,d=(e,t,n)=>{e.addEventListener(t,(function r(){n.apply(this,arguments),e.removeEventListener(t,r)}))},c=0,u=0,{open:g=!1}=t,{shrink:h}=t,{trigger:m}=t;const p=()=>{n("shrink",h=!0),d(s,"animationend",()=>{n("shrink",h=!1),n("open",g=!1),r("closed")})};function f(e){if(!g)return;let t=e.target;do{if(t===l)return}while(t=t.parentNode);p()}W(()=>{if(document.addEventListener("click",f),m)return o.appendChild(m.parentNode.removeChild(m)),()=>{document.removeEventListener("click",f)}});const b=async()=>{g||n("open",g=!0),await(ee(),K);let e=i.getBoundingClientRect();return{top:e.top+-1*c,bottom:window.innerHeight-e.bottom+c,left:e.left+-1*u,right:document.body.clientWidth-e.right+u}};let{$$slots:v={},$$scope:y}=t;return e.$set=e=>{"open"in e&&n("open",g=e.open),"shrink"in e&&n("shrink",h=e.shrink),"trigger"in e&&n("trigger",m=e.trigger),"$$scope"in e&&n("$$scope",y=e.$$scope)},{popover:l,w:a,triggerContainer:o,contentsAnimated:s,contentsWrapper:i,translateY:c,translateX:u,open:g,shrink:h,trigger:m,close:p,doOpen:async()=>{const{x:e,y:t}=await(async()=>{let e,t,n=await b();return t=a<480?n.bottom:n.top<0?Math.abs(n.top):n.bottom<0?n.bottom:0,e=n.left<0?Math.abs(n.left):n.right<0?n.right:0,{x:e,y:t}})();n("translateX",u=e),n("translateY",c=t),n("open",g=!0),r("opened")},onwindowresize:function(){n("w",a=kt.innerWidth)},div0_binding:function(e){z[e?"unshift":"push"](()=>{n("triggerContainer",o=e)})},div2_binding:function(e){z[e?"unshift":"push"](()=>{n("contentsAnimated",s=e)})},div3_binding:function(e){z[e?"unshift":"push"](()=>{n("contentsWrapper",i=e)})},div4_binding:function(e){z[e?"unshift":"push"](()=>{n("popover",l=e)})},$$slots:v,$$scope:y}}class Dt extends Oe{constructor(e){super(),Ce(this,e,_t,wt,s,{open:0,shrink:0,trigger:0,close:0})}get close(){return this.$$.ctx.close}}const Mt=(e,t,n)=>e.replace(new RegExp("#{"+t+"}","g"),n),At=function(e,t,n){if(e=e.toString(),void 0===t)return e;if(e.length==t)return e;if(n=void 0!==n&&n,e.length<t)for(;t-e.length>0;)e="0"+e;else e.length>t&&(e=n?e.substring(e.length-t):e.substring(0,t));return e};let St={daysOfWeek:[["Sunday","Sun"],["Monday","Mon"],["Tuesday","Tue"],["Wednesday","Wed"],["Thursday","Thu"],["Friday","Fri"],["Saturday","Sat"]],monthsOfYear:[["January","Jan"],["February","Feb"],["March","Mar"],["April","Apr"],["May","May"],["June","Jun"],["July","Jul"],["August","Aug"],["September","Sep"],["October","Oct"],["November","Nov"],["December","Dec"]]};var Tt=[{key:"d",method:function(e){return At(e.getDate(),2)}},{key:"D",method:function(e){return St.daysOfWeek[e.getDay()][1]}},{key:"j",method:function(e){return e.getDate()}},{key:"l",method:function(e){return St.daysOfWeek[e.getDay()][0]}},{key:"F",method:function(e){return St.monthsOfYear[e.getMonth()][0]}},{key:"m",method:function(e){return At(e.getMonth()+1,2)}},{key:"M",method:function(e){return St.monthsOfYear[e.getMonth()][1]}},{key:"n",method:function(e){return e.getMonth()+1}},{key:"Y",method:function(e){return e.getFullYear()}},{key:"y",method:function(e){return At(e.getFullYear(),2,!0)}}],Vt=[{key:"a",method:function(e){return e.getHours()>11?"pm":"am"}},{key:"A",method:function(e){return e.getHours()>11?"PM":"AM"}},{key:"g",method:function(e){return e.getHours()%12||12}},{key:"G",method:function(e){return e.getHours()}},{key:"h",method:function(e){return At(e.getHours()%12||12,2)}},{key:"H",method:function(e){return At(e.getHours(),2)}},{key:"i",method:function(e){return At(e.getMinutes(),2)}},{key:"s",method:function(e){return At(e.getSeconds(),2)}}];const Et=(e={})=>{(e=>Object.keys(e).forEach(t=>{St[t]&&St[t].length==e[t].length&&(St[t]=e[t])}))(e)},Ft=(e,t="#{m}/#{d}/#{Y}")=>(Tt.forEach(n=>{-1!=t.indexOf(`#{${n.key}}`)&&(t=Mt(t,n.key,n.method(e)))}),Vt.forEach(n=>{-1!=t.indexOf(`#{${n.key}}`)&&(t=Mt(t,n.key,n.method(e)))}),t),Nt={left:37,up:38,right:39,down:40,pgup:33,pgdown:34,enter:13,escape:27,tab:9},It=Object.keys(Nt).map(e=>Nt[e]);function Ut(e,t,n){const r=Object.create(e);return r.day=t[n],r}function jt(e){let t,n;return{c(){t=w("button"),n=_(e.formattedSelected),S(t,"class","calendar-button svelte-1qydjkw"),S(t,"type","button")},m(e,r){C(e,t,r),$(t,n)},p(e,t){e.formattedSelected&&T(n,t.formattedSelected)},d(e){e&&O(t)}}}function Bt(e){let t,n;const r=e.$$slots.default,l=i(r,e,null);let a=!e.trigger&&jt(e);return{c(){t=w("div"),l||a&&a.c(),l&&l.c(),S(t,"slot","trigger"),S(t,"class","svelte-1qydjkw")},m(e,r){C(e,t,r),l||a&&a.m(t,null),l&&l.m(t,null),n=!0},p(e,n){l||(n.trigger?a&&(a.d(1),a=null):a?a.p(e,n):(a=jt(n),a.c(),a.m(t,null))),l&&l.p&&e.$$scope&&l.p(c(r,n,e,null),d(r,n,null))},i(e){n||(ue(l,e),n=!0)},o(e){ge(l,e),n=!1},d(e){e&&O(t),l||a&&a.d(),l&&l.d(e)}}}function Yt(t){let n,r,l=t.day[1]+"";return{c(){n=w("span"),r=_(l),S(n,"class","svelte-1qydjkw")},m(e,t){C(e,n,t),$(n,r)},p:e,d(e){e&&O(n)}}}function Lt(e){let t,n,r,l,a,o;const s=new yt({props:{month:e.month,year:e.year,canIncrementMonth:e.canIncrementMonth,canDecrementMonth:e.canDecrementMonth,start:e.start,end:e.end,monthsOfYear:e.monthsOfYear}});s.$on("monthSelected",e.monthSelected_handler),s.$on("incrementMonth",e.incrementMonth_handler);let i=e.sortedDaysOfWeek,d=[];for(let t=0;t<i.length;t+=1)d[t]=Yt(Ut(e,i,t));const c=new ht({props:{visibleMonth:e.visibleMonth,selected:e.selected,highlighted:e.highlighted,shouldShakeDate:e.shouldShakeDate,id:e.visibleMonthId}});return c.$on("dateSelected",e.dateSelected_handler),{c(){t=w("div"),n=w("div"),ye(s.$$.fragment),r=D(),l=w("div");for(let e=0;e<d.length;e+=1)d[e].c();a=D(),ye(c.$$.fragment),S(l,"class","legend svelte-1qydjkw"),S(n,"class","calendar svelte-1qydjkw"),S(t,"slot","contents"),S(t,"class","svelte-1qydjkw")},m(e,i){C(e,t,i),$(t,n),ke(s,n,null),$(n,r),$(n,l);for(let e=0;e<d.length;e+=1)d[e].m(l,null);$(n,a),ke(c,n,null),o=!0},p(e,t){const n={};if(e.month&&(n.month=t.month),e.year&&(n.year=t.year),e.canIncrementMonth&&(n.canIncrementMonth=t.canIncrementMonth),e.canDecrementMonth&&(n.canDecrementMonth=t.canDecrementMonth),e.start&&(n.start=t.start),e.end&&(n.end=t.end),e.monthsOfYear&&(n.monthsOfYear=t.monthsOfYear),s.$set(n),e.sortedDaysOfWeek){let n;for(i=t.sortedDaysOfWeek,n=0;n<i.length;n+=1){const r=Ut(t,i,n);d[n]?d[n].p(e,r):(d[n]=Yt(r),d[n].c(),d[n].m(l,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=i.length}const r={};e.visibleMonth&&(r.visibleMonth=t.visibleMonth),e.selected&&(r.selected=t.selected),e.highlighted&&(r.highlighted=t.highlighted),e.shouldShakeDate&&(r.shouldShakeDate=t.shouldShakeDate),e.visibleMonthId&&(r.id=t.visibleMonthId),c.$set(r)},i(e){o||(ue(s.$$.fragment,e),ue(c.$$.fragment,e),o=!0)},o(e){ge(s.$$.fragment,e),ge(c.$$.fragment,e),o=!1},d(e){e&&O(t),$e(s),x(d,e),$e(c)}}}function Ht(t){let n;return{c(){n=D()},m(e,t){C(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Pt(e){let t,n,r,l;function a(t){e.popover_1_open_binding.call(null,t)}function o(t){e.popover_1_shrink_binding.call(null,t)}let s={trigger:e.trigger,$$slots:{default:[Ht],contents:[Lt],trigger:[Bt]},$$scope:{ctx:e}};void 0!==e.isOpen&&(s.open=e.isOpen),void 0!==e.isClosing&&(s.shrink=e.isClosing);const i=new Dt({props:s});return e.popover_1_binding(i),z.push(()=>ve(i,"open",a)),z.push(()=>ve(i,"shrink",o)),i.$on("opened",e.registerOpen),i.$on("closed",e.registerClose),{c(){t=w("div"),ye(i.$$.fragment),S(t,"class","datepicker svelte-1qydjkw"),S(t,"style",e.wrapperStyle),I(t,"open",e.isOpen),I(t,"closing",e.isClosing)},m(e,n){C(e,t,n),ke(i,t,null),l=!0},p(e,a){const o={};e.trigger&&(o.trigger=a.trigger),(e.$$scope||e.visibleMonth||e.selected||e.highlighted||e.shouldShakeDate||e.visibleMonthId||e.month||e.year||e.canIncrementMonth||e.canDecrementMonth||e.start||e.end||e.monthsOfYear||e.trigger||e.formattedSelected)&&(o.$$scope={changed:e,ctx:a}),!n&&e.isOpen&&(n=!0,o.open=a.isOpen,ne(()=>n=!1)),!r&&e.isClosing&&(r=!0,o.shrink=a.isClosing,ne(()=>r=!1)),i.$set(o),l&&!e.wrapperStyle||S(t,"style",a.wrapperStyle),e.isOpen&&I(t,"open",a.isOpen),e.isClosing&&I(t,"closing",a.isClosing)},i(e){l||(ue(i.$$.fragment,e),l=!0)},o(e){ge(i.$$.fragment,e),l=!1},d(n){n&&O(t),e.popover_1_binding(null),$e(i)}}}function Jt(e,t,n){const r=R(),l=new Date;let a,{format:o="#{m}/#{d}/#{Y}"}=t,{start:s=new Date(1987,9,29)}=t,{end:i=new Date(2020,9,29)}=t,{selected:d=l}=t,{dateChosen:c=!1}=t,{trigger:u=null}=t,{selectableCallback:g=null}=t,{weekStart:h=0}=t;const m=[["Måndag","Mån"],["Tisdag","Tis"],["Onsdag","Ons"],["Torsdag","Tor"],["Fredag","Fre"],["Lördag","Lör"],["Söndag","Sön"]];let{monthsOfYear:p=[["Januari","Jan"],["Februari","Feb"],["Mars","Mar"],["April","Apr"],["Maj","Maj"],["Juni","Jun"],["Juli","Jul"],["Augusti","Aug"],["September","Sep"],["October","Oct"],["November","Nov"],["December","Dec"]]}=t,{style:f=""}=t,{buttonBackgroundColor:b="#fff"}=t,{buttonBorderColor:v="#eee"}=t,{buttonTextColor:y="#333"}=t,{highlightColor:k="#f7901e"}=t,{dayBackgroundColor:$="none"}=t,{dayTextColor:C="#4a4a4a"}=t,{dayHighlightedBackgroundColor:O="#efefef"}=t,{dayHighlightedTextColor:x="#4a4a4a"}=t;Et({daysOfWeek:m,monthsOfYear:p});let w,_=0===h?m:(()=>{let e=m.slice();return e.push(e.shift()),e})(),D=l,M=!1,A=l.getMonth(),S=l.getFullYear(),T=!1,V=!1;l.setHours(0,0,0,0);let E=0,{formattedSelected:F}=t;function N(e){n("month",A=e),n("highlighted",D=new Date(S,A,1))}function I(e,t=1){if(1===e&&!ee)return;if(-1===e&&!te)return;let r=new Date(S,A,1);r.setMonth(r.getMonth()+e),n("month",A=r.getMonth()),n("year",S=r.getFullYear()),n("highlighted",D=new Date(S,A,t))}W(()=>{n("month",A=d.getMonth()),n("year",S=d.getFullYear())});const U=(e,t,n)=>{let r=G.find(t=>t.month===e&&t.year===n);if(!r)return null;for(let l=0;l<r.weeks.length;++l)for(let a=0;a<r.weeks[l].days.length;++a){let o=r.weeks[l].days[a];if(o.month===e&&o.day===t&&o.year===n)return o}return null};function j(e){let t=new Date(D);t.setDate(D.getDate()+e);let r=U(t.getMonth(),t.getDate(),t.getFullYear());r&&r.isInRange&&(n("highlighted",D=t),e>0&&D>X&&I(1,D.getDate()),e<0&&D<Z&&I(-1,D.getDate()))}function B(e){!function(e){u&&n("trigger",u.innerHTML=e,u)}(e)}function Y(e){return function(e){const t=U(e.getMonth(),e.getDate(),e.getFullYear());return t&&t.selectable}(e)?(P(),n("selected",d=e),n("dateChosen",c=!0),B(F),r("dateSelected",{date:e})):(t=e,clearTimeout(w),n("shouldShakeDate",M=t),void(w=setTimeout(()=>{n("shouldShakeDate",M=!1)},700)));var t}function L(e){if(-1!==It.indexOf(e.keyCode))switch(e.preventDefault(),e.keyCode){case Nt.left:j(-1);break;case Nt.up:j(-7);break;case Nt.right:j(1);break;case Nt.down:j(7);break;case Nt.pgup:I(-1);break;case Nt.pgdown:I(1);break;case Nt.escape:P();break;case Nt.enter:Y(D)}}function H(){document.removeEventListener("keydown",L),r("close")}function P(){a.close(),H()}let{$$slots:J={},$$scope:q}=t;let G,Q,K,X,Z,ee,te,ne;return e.$set=e=>{"format"in e&&n("format",o=e.format),"start"in e&&n("start",s=e.start),"end"in e&&n("end",i=e.end),"selected"in e&&n("selected",d=e.selected),"dateChosen"in e&&n("dateChosen",c=e.dateChosen),"trigger"in e&&n("trigger",u=e.trigger),"selectableCallback"in e&&n("selectableCallback",g=e.selectableCallback),"weekStart"in e&&n("weekStart",h=e.weekStart),"monthsOfYear"in e&&n("monthsOfYear",p=e.monthsOfYear),"style"in e&&n("style",f=e.style),"buttonBackgroundColor"in e&&n("buttonBackgroundColor",b=e.buttonBackgroundColor),"buttonBorderColor"in e&&n("buttonBorderColor",v=e.buttonBorderColor),"buttonTextColor"in e&&n("buttonTextColor",y=e.buttonTextColor),"highlightColor"in e&&n("highlightColor",k=e.highlightColor),"dayBackgroundColor"in e&&n("dayBackgroundColor",$=e.dayBackgroundColor),"dayTextColor"in e&&n("dayTextColor",C=e.dayTextColor),"dayHighlightedBackgroundColor"in e&&n("dayHighlightedBackgroundColor",O=e.dayHighlightedBackgroundColor),"dayHighlightedTextColor"in e&&n("dayHighlightedTextColor",x=e.dayHighlightedTextColor),"formattedSelected"in e&&n("formattedSelected",F=e.formattedSelected),"$$scope"in e&&n("$$scope",q=e.$$scope)},e.$$.update=(e={start:1,end:1,selectableCallback:1,weekStart:1,months:1,i:1,month:1,year:1,monthIndex:1,visibleMonth:1,buttonBackgroundColor:1,buttonBorderColor:1,buttonTextColor:1,highlightColor:1,dayBackgroundColor:1,dayTextColor:1,dayHighlightedBackgroundColor:1,dayHighlightedTextColor:1,style:1,format:1,selected:1})=>{if((e.start||e.end||e.selectableCallback||e.weekStart)&&n("months",G=function(e,t,n=null,r=0){e.setHours(0,0,0,0),t.setHours(0,0,0,0);let l=new Date(t.getFullYear(),t.getMonth()+1,1),a=[],o=new Date(e.getFullYear(),e.getMonth(),1),s=nt(e,t,n);for(;o<l;)a.push(tt(o.getMonth(),o.getFullYear(),s,r)),o.setMonth(o.getMonth()+1);return a}(s,i,g,h)),e.months||e.month||e.year){n("monthIndex",E=0);for(let e=0;e<G.length;e+=1)G[e].month===A&&G[e].year===S&&n("monthIndex",E=e)}(e.months||e.monthIndex)&&n("visibleMonth",Q=G[E]),(e.year||e.month)&&n("visibleMonthId",K=S+A/100),e.visibleMonth&&(X=Q.weeks[Q.weeks.length-1].days[6].date),e.visibleMonth&&(Z=Q.weeks[0].days[0].date),(e.monthIndex||e.months)&&n("canIncrementMonth",ee=E<G.length-1),e.monthIndex&&n("canDecrementMonth",te=E>0),(e.buttonBackgroundColor||e.buttonBorderColor||e.buttonTextColor||e.highlightColor||e.dayBackgroundColor||e.dayTextColor||e.dayHighlightedBackgroundColor||e.dayHighlightedTextColor||e.style)&&n("wrapperStyle",ne=`\n    --button-background-color: ${b};\n    --button-border-color: ${v};\n    --button-text-color: ${y};\n    --highlight-color: ${k};\n    --day-background-color: ${$};\n    --day-text-color: ${C};\n    --day-highlighted-background-color: ${O};\n    --day-highlighted-text-color: ${x};\n    ${f}\n  `),(e.format||e.selected)&&n("formattedSelected",F="function"==typeof o?o(d):Ft(d,o))},{popover:a,format:o,start:s,end:i,selected:d,dateChosen:c,trigger:u,selectableCallback:g,weekStart:h,monthsOfYear:p,style:f,buttonBackgroundColor:b,buttonBorderColor:v,buttonTextColor:y,highlightColor:k,dayBackgroundColor:$,dayTextColor:C,dayHighlightedBackgroundColor:O,dayHighlightedTextColor:x,sortedDaysOfWeek:_,highlighted:D,shouldShakeDate:M,month:A,year:S,isOpen:T,isClosing:V,formattedSelected:F,changeMonth:N,incrementMonth:I,registerSelection:Y,registerClose:H,registerOpen:function(){n("highlighted",D=new Date(d)),n("month",A=d.getMonth()),n("year",S=d.getFullYear()),document.addEventListener("keydown",L),r("open")},visibleMonth:Q,visibleMonthId:K,canIncrementMonth:ee,canDecrementMonth:te,wrapperStyle:ne,monthSelected_handler:e=>N(e.detail),incrementMonth_handler:e=>I(e.detail),dateSelected_handler:e=>Y(e.detail),popover_1_binding:function(e){z[e?"unshift":"push"](()=>{n("popover",a=e)})},popover_1_open_binding:function(e){T=e,n("isOpen",T)},popover_1_shrink_binding:function(e){V=e,n("isClosing",V)},$$slots:J,$$scope:q}}class Wt extends Oe{constructor(e){super(),Ce(this,e,Jt,Pt,s,{format:0,start:0,end:0,selected:0,dateChosen:0,trigger:0,selectableCallback:0,weekStart:0,monthsOfYear:0,style:0,buttonBackgroundColor:0,buttonBorderColor:0,buttonTextColor:0,highlightColor:0,dayBackgroundColor:0,dayTextColor:0,dayHighlightedBackgroundColor:0,dayHighlightedTextColor:0,formattedSelected:0})}}function Rt(e,t,n){const r=Object.create(e);return r.file=t[n],r}function qt(e,t,n){const r=Object.create(e);return r.admin=t[n],r}function zt(e){let t,n,r,l,a,o,s,i=e.admin.name+"";return{c(){t=w("option"),n=_(i),r=D(),t.__value=l=e.admin.email,t.value=t.__value,t.disabled=a=!e.admin.active,t.selected=o=e.admin.email===e.order.responsible.email,S(t,"class",s=e.admin.email!==e.order.responsible.email||e.admin.active?"":"text-danger")},m(e,l){C(e,t,l),$(t,n),$(t,r)},p(e,r){e.allAdmins&&i!==(i=r.admin.name+"")&&T(n,i),e.allAdmins&&l!==(l=r.admin.email)&&(t.__value=l),t.value=t.__value,e.allAdmins&&a!==(a=!r.admin.active)&&(t.disabled=a),(e.allAdmins||e.order)&&o!==(o=r.admin.email===r.order.responsible.email)&&(t.selected=o),(e.allAdmins||e.order)&&s!==(s=r.admin.email!==r.order.responsible.email||r.admin.active?"":"text-danger")&&S(t,"class",s)},d(e){e&&O(t)}}}function Gt(e){let t,n,r,l,a,o,s,i=e.file.originalName+"",d=e.file.description+"";return{c(){t=w("li"),n=w("a"),r=_(i),a=D(),o=w("li"),s=_(d),S(n,"href",l=e.file.url),S(t,"class","list-group-item"),E(t,"border","none"),S(o,"class","list-group-item")},m(e,l){C(e,t,l),$(t,n),$(n,r),C(e,a,l),C(e,o,l),$(o,s)},p(e,t){e.order&&i!==(i=t.file.originalName+"")&&T(r,i),e.order&&l!==(l=t.file.url)&&S(n,"href",l),e.order&&d!==(d=t.file.description+"")&&T(s,d)},d(e){e&&O(t),e&&O(a),e&&O(o)}}}function Qt(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,M,V,E,N,I,U,j,B,Y,L,H,P,J,W,R,q,z,G,Q,K,X,Z,ee,ne,re,le,ae,oe,se,ie,de,ce,he,me,fe,be,ve,Ce,Oe,xe,we,_e,Me,Ae,Se,Te,Ve,Ee,Fe,Ne,Ie,Ue,je,Be,Ye,Le,He,Pe,Je,We,Re,qe,ze,Ge,Qe,Ke,Xe,Ze,et,tt,nt,rt,lt,at,ot,st,it,dt,ct,ut,gt,ht,mt,pt,ft,bt,vt,yt,kt,$t,Ct,Ot=e.order.productNumber+"",xt=e.order.productName+"",wt=new Date(e.order.date).toDateString()+"",_t=e.order.customer.name+"",Dt=e.order.customer.email+"",Mt=e.order.productDescription+"",At=e.order.wishes+"",St=e.allAdmins,Tt=[];for(let t=0;t<St.length;t+=1)Tt[t]=zt(qt(e,St,t));const Vt=new Wt({props:{format:e.format,selected:e.order.estimatedFinishDate?new Date(e.order.estimatedFinishDate):void 0}});Vt.$on("dateSelected",e.estimatedTimeUpdate);let Et=e.order.files,Ft=[];for(let t=0;t<Et.length;t+=1)Ft[t]=Gt(Rt(e,Et,t));return{c(){t=w("div"),n=w("div"),r=w("div"),l=w("div"),o=w("div"),o.textContent="Orderdetaljer",s=D(),i=w("ul"),d=w("li"),c=_("Ordernummer: "),u=_(Ot),g=D(),h=w("li"),m=_("Namn: "),p=_(xt),f=D(),b=w("li"),v=_("Datum: "),y=_(wt),k=D(),M=w("li"),V=w("div"),E=w("input"),I=D(),U=w("label"),U.textContent="Tillverkning",j=D(),B=w("li"),Y=w("div"),L=w("input"),P=D(),J=w("label"),J.textContent="Tillverkningsunderlag",W=D(),R=w("li"),q=w("div"),z=w("input"),Q=D(),K=w("label"),K.textContent="Beräkning",X=D(),Z=w("div"),ee=w("div"),ne=w("div"),ne.textContent="Beställare",re=D(),le=w("ul"),ae=w("li"),oe=_("Namn: "),se=_(_t),ie=D(),de=w("li"),ce=_("Email:\r\n            "),he=w("a"),me=_(Dt),be=D(),ve=w("div"),Ce=w("div"),Oe=w("div"),Oe.textContent="Ansvarig",xe=D(),we=w("ul"),_e=w("li"),Me=_("Välj ansvarig:\r\n            "),Ae=w("select"),Se=w("option"),Te=_("Ingen\r\n              ");for(let e=0;e<Tt.length;e+=1)Tt[e].c();Ee=D(),Fe=w("li"),Ne=_("Status:\r\n            "),Ie=w("select"),Ue=w("option"),Ue.textContent="Ej påbörjad",je=w("option"),je.textContent="Påbörjad",Be=w("option"),Be.textContent="Avslutad",Ye=D(),Le=w("li"),He=_("Estimerat slutdatum:\r\n            "),ye(Vt.$$.fragment),Pe=D(),Je=w("li"),We=w("button"),We.textContent="Spara ändringar",Re=D(),qe=w("div"),ze=w("div"),Ge=w("div"),Ge.textContent="Produkt beskrivning",Qe=D(),Ke=w("div"),Xe=_(Mt),Ze=D(),et=w("div"),tt=w("div"),nt=w("div"),nt.textContent="Önskemål",rt=D(),lt=w("div"),at=_(At),ot=D(),st=w("div"),it=w("div"),dt=w("div"),dt.textContent="Filer",ct=D(),ut=w("ul");for(let e=0;e<Ft.length;e+=1)Ft[e].c();gt=D(),ht=w("div"),mt=w("div"),pt=D(),ft=w("div"),bt=w("button"),bt.textContent="Radera beställningar",vt=D(),yt=w("div"),S(o,"class","card-header"),S(d,"class","list-group-item"),S(h,"class","list-group-item"),S(b,"class","list-group-item"),S(E,"type","checkbox"),S(E,"class","custom-control-input"),E.checked=N=e.order.missionType.production,E.disabled=!0,S(U,"class","custom-control-label"),S(V,"class","custom-control custom-checkbox"),S(M,"class","list-group-item"),S(L,"type","checkbox"),S(L,"class","custom-control-input"),L.checked=H=e.order.missionType.productionDocumentation,L.disabled=!0,S(J,"class","custom-control-label"),S(Y,"class","custom-control custom-checkbox"),S(B,"class","list-group-item"),S(z,"type","checkbox"),S(z,"class","custom-control-input"),z.checked=G=e.order.missionType.calculation,z.disabled=!0,S(K,"class","custom-control-label"),S(q,"class","custom-control custom-checkbox"),S(R,"class","list-group-item"),S(i,"class","list-group list-group-flush"),S(l,"class","card h-100"),S(r,"class","col mb-4"),S(ne,"class","card-header"),S(ae,"class","list-group-item"),S(he,"href",fe="mailto:"+e.order.customer.email),S(de,"class","list-group-item"),S(le,"class","list-group list-group-flush"),S(ee,"class","card h-100"),S(Z,"class","col mb-4 "),S(Oe,"class","card-header"),Se.__value="Nobody",Se.value=Se.__value,Se.selected=Ve="Nobody"===e.order.responsible.email,S(Ae,"class","form-control"),void 0===e.selectedAdmin&&te(()=>e.select0_change_handler.call(Ae)),S(_e,"class","list-group-item"),Ue.__value="Ej Påbörjad",Ue.value=Ue.__value,je.__value="Påbörjad",je.value=je.__value,Be.__value="Avslutad",Be.value=Be.__value,S(Ie,"class","form-control"),S(Ie,"id","exampleFormControlSelect2"),void 0===e.order.status&&te(()=>e.select1_change_handler.call(Ie)),S(Fe,"class","list-group-item"),S(Le,"class","list-group-item"),S(We,"class","btn btn-lg btn-success"),S(Je,"class","list-group-item text-center"),S(we,"class","list-group list-group-flush"),S(Ce,"class","card h-100"),S(ve,"class","col mb-4"),S(Ge,"class","card-header"),S(Ke,"class","card-body"),S(ze,"class","card h-100"),S(qe,"class","col mb-4"),S(nt,"class","card-header"),S(lt,"class","card-body"),S(tt,"class","card h-100"),S(et,"class","col mb-4"),S(dt,"class","card-header"),S(ut,"class","list-group list-group-flush"),S(it,"class","card h-100"),S(st,"class","col mb-4"),S(n,"class","row row-cols-1 row-cols-md-2 row-cols-lg-3"),S(mt,"class","col "),S(bt,"class","btn btn-lg btn-danger"),S(ft,"class","col text-center"),S(yt,"class","col "),S(ht,"class","row"),S(t,"class","container-fluid text-left"),Ct=[A(Ae,"change",e.select0_change_handler),A(Ie,"change",e.select1_change_handler),A(We,"click",e.saveChanges),A(bt,"click",e.click_handler)]},m(a,O){C(a,t,O),$(t,n),$(n,r),$(r,l),$(l,o),$(l,s),$(l,i),$(i,d),$(d,c),$(d,u),$(i,g),$(i,h),$(h,m),$(h,p),$(i,f),$(i,b),$(b,v),$(b,y),$(i,k),$(i,M),$(M,V),$(V,E),$(V,I),$(V,U),$(i,j),$(i,B),$(B,Y),$(Y,L),$(Y,P),$(Y,J),$(i,W),$(i,R),$(R,q),$(q,z),$(q,Q),$(q,K),$(n,X),$(n,Z),$(Z,ee),$(ee,ne),$(ee,re),$(ee,le),$(le,ae),$(ae,oe),$(ae,se),$(le,ie),$(le,de),$(de,ce),$(de,he),$(he,me),$(n,be),$(n,ve),$(ve,Ce),$(Ce,Oe),$(Ce,xe),$(Ce,we),$(we,_e),$(_e,Me),$(_e,Ae),$(Ae,Se),$(Se,Te);for(let e=0;e<Tt.length;e+=1)Tt[e].m(Ae,null);F(Ae,e.selectedAdmin),$(we,Ee),$(we,Fe),$(Fe,Ne),$(Fe,Ie),$(Ie,Ue),$(Ie,je),$(Ie,Be),F(Ie,e.order.status),$(we,Ye),$(we,Le),$(Le,He),ke(Vt,Le,null),$(we,Pe),$(we,Je),$(Je,We),$(n,Re),$(n,qe),$(qe,ze),$(ze,Ge),$(ze,Qe),$(ze,Ke),$(Ke,Xe),$(n,Ze),$(n,et),$(et,tt),$(tt,nt),$(tt,rt),$(tt,lt),$(lt,at),$(n,ot),$(n,st),$(st,it),$(it,dt),$(it,ct),$(it,ut);for(let e=0;e<Ft.length;e+=1)Ft[e].m(ut,null);$(t,gt),$(t,ht),$(ht,mt),$(ht,pt),$(ht,ft),$(ft,bt),$(ht,vt),$(ht,yt),$t=!0},p(e,t){if($t&&!e.order||Ot===(Ot=t.order.productNumber+"")||T(u,Ot),$t&&!e.order||xt===(xt=t.order.productName+"")||T(p,xt),$t&&!e.order||wt===(wt=new Date(t.order.date).toDateString()+"")||T(y,wt),(!$t||e.order&&N!==(N=t.order.missionType.production))&&(E.checked=N),(!$t||e.order&&H!==(H=t.order.missionType.productionDocumentation))&&(L.checked=H),(!$t||e.order&&G!==(G=t.order.missionType.calculation))&&(z.checked=G),$t&&!e.order||_t===(_t=t.order.customer.name+"")||T(se,_t),$t&&!e.order||Dt===(Dt=t.order.customer.email+"")||T(me,Dt),(!$t||e.order&&fe!==(fe="mailto:"+t.order.customer.email))&&S(he,"href",fe),(!$t||e.order&&Ve!==(Ve="Nobody"===t.order.responsible.email))&&(Se.selected=Ve),e.allAdmins||e.order){let n;for(St=t.allAdmins,n=0;n<St.length;n+=1){const r=qt(t,St,n);Tt[n]?Tt[n].p(e,r):(Tt[n]=zt(r),Tt[n].c(),Tt[n].m(Ae,null))}for(;n<Tt.length;n+=1)Tt[n].d(1);Tt.length=St.length}e.selectedAdmin&&F(Ae,t.selectedAdmin),e.order&&F(Ie,t.order.status);const n={};if(e.format&&(n.format=t.format),e.order&&(n.selected=t.order.estimatedFinishDate?new Date(t.order.estimatedFinishDate):void 0),Vt.$set(n),$t&&!e.order||Mt===(Mt=t.order.productDescription+"")||T(Xe,Mt),$t&&!e.order||At===(At=t.order.wishes+"")||T(at,At),e.order){let n;for(Et=t.order.files,n=0;n<Et.length;n+=1){const r=Rt(t,Et,n);Ft[n]?Ft[n].p(e,r):(Ft[n]=Gt(r),Ft[n].c(),Ft[n].m(ut,null))}for(;n<Ft.length;n+=1)Ft[n].d(1);Ft.length=Et.length}},i(e){$t||(ue(Vt.$$.fragment,e),te(()=>{kt||(kt=pe(t,De,{},!0)),kt.run(1)}),$t=!0)},o(e){ge(Vt.$$.fragment,e),kt||(kt=pe(t,De,{},!1)),kt.run(0),$t=!1},d(e){e&&O(t),x(Tt,e),$e(Vt),x(Ft,e),e&&kt&&kt.end(),a(Ct)}}}function Kt(e,t,n){let r,{order:l}=t,{toggleExpand:a}=t,{deleteOrder:o}=t,{apiCall:s}=t,{allAdmins:i}=t,{getAllOrders:d}=t;let c;return e.$set=e=>{"order"in e&&n("order",l=e.order),"toggleExpand"in e&&n("toggleExpand",a=e.toggleExpand),"deleteOrder"in e&&n("deleteOrder",o=e.deleteOrder),"apiCall"in e&&n("apiCall",s=e.apiCall),"allAdmins"in e&&n("allAdmins",i=e.allAdmins),"getAllOrders"in e&&n("getAllOrders",d=e.getAllOrders)},e.$$.update=(e={order:1})=>{e.order&&n("format",c=l.estimatedFinishDate?"#{l} den #{j}/#{m}/#{Y}":"Datum ej bestämt")},{order:l,toggleExpand:a,deleteOrder:o,apiCall:s,allAdmins:i,getAllOrders:d,selectedAdmin:r,saveChanges:async function(){try{(await s("/updateOrder",JSON.stringify({id:l._id,email:r,status:l.status,estimatedFinishDate:l.estimatedFinishDate}))).error?alert("Ett fel uppstod, försök igen"):(d(),Se.set("allOrders"))}catch(e){console.log(e)}},estimatedTimeUpdate:function(e){n("order",l.estimatedFinishDate=e.detail.date,l)},format:c,select0_change_handler:function(){r=N(this),n("selectedAdmin",r),n("allAdmins",i)},select1_change_handler:function(){l.status=N(this),n("order",l)},click_handler:()=>o(l._id)}}class Xt extends Oe{constructor(e){super(),Ce(this,e,Kt,Qt,s,{order:0,toggleExpand:0,deleteOrder:0,apiCall:0,allAdmins:0,getAllOrders:0})}}function Zt(t){let n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,x,M,V,E,F,N,I,U=t.order.productNumber+"",j=t.order.productName+"",B=t.order.customer.name+"",Y=t.order.responsible.name+"",L=t.order.status+"",H=new Date(t.order.date).toDateString()+"";return{c(){n=w("tr"),r=w("th"),l=_(U),o=D(),s=w("td"),i=_(j),d=D(),c=w("td"),u=_(B),g=D(),h=w("td"),m=_(Y),p=D(),f=w("td"),b=_(L),v=D(),y=w("td"),k=_(H),x=D(),M=w("td"),V=w("button"),V.textContent="Visa mer",E=D(),F=w("td"),N=w("button"),N.textContent="Radera order",S(r,"class","align-middle"),S(r,"scope","row"),S(s,"class","align-middle"),S(c,"class","align-middle d-none d-sm-table-cell"),S(h,"class","align-middle d-none d-md-table-cell"),S(f,"class","align-middle"),S(y,"class","align-middle d-none d-md-table-cell"),S(V,"class","btn btn-secondary "),S(M,"class","align-middle d-none d-md-table-cell"),S(N,"class","btn btn-danger float-right"),S(F,"class","align-middle d-none d-md-table-cell"),S(n,"class","svelte-1n1kl2d"),I=[A(r,"click",t.expandOrder),A(s,"click",t.expandOrder),A(c,"click",t.expandOrder),A(h,"click",t.expandOrder),A(f,"click",t.expandOrder),A(y,"click",t.expandOrder),A(V,"click",t.expandOrder),A(N,"click",t.click_handler)]},m(e,a){C(e,n,a),$(n,r),$(r,l),$(n,o),$(n,s),$(s,i),$(n,d),$(n,c),$(c,u),$(n,g),$(n,h),$(h,m),$(n,p),$(n,f),$(f,b),$(n,v),$(n,y),$(y,k),$(n,x),$(n,M),$(M,V),$(n,E),$(n,F),$(F,N),t.tr_1_binding(n)},p(e,t){e.order&&U!==(U=t.order.productNumber+"")&&T(l,U),e.order&&j!==(j=t.order.productName+"")&&T(i,j),e.order&&B!==(B=t.order.customer.name+"")&&T(u,B),e.order&&Y!==(Y=t.order.responsible.name+"")&&T(m,Y),e.order&&L!==(L=t.order.status+"")&&T(b,L),e.order&&H!==(H=new Date(t.order.date).toDateString()+"")&&T(k,H)},i:e,o:e,d(e){e&&O(n),t.tr_1_binding(null),a(I)}}}function en(e){let t,n,r;const l=new Xt({props:{deleteOrder:e.deleteOrder,order:e.order,expandOrder:e.expandOrder,deleteOrder:e.deleteOrder}});return{c(){t=w("tr"),n=w("td"),ye(l.$$.fragment),S(n,"id","expandedContent"),S(n,"colspan","7"),E(t,"cursor","initial"),S(t,"class","svelte-1n1kl2d")},m(e,a){C(e,t,a),$(t,n),ke(l,n,null),r=!0},p(e,t){const n={};e.deleteOrder&&(n.deleteOrder=t.deleteOrder),e.order&&(n.order=t.order),e.deleteOrder&&(n.deleteOrder=t.deleteOrder),l.$set(n)},i(e){r||(ue(l.$$.fragment,e),r=!0)},o(e){ge(l.$$.fragment,e),r=!1},d(e){e&&O(t),$e(l)}}}function tn(e){let t,n,r,l;const a=[en,Zt],o=[];return t=1,n=o[1]=a[1](e),{c(){n.c(),r=M()},m(e,t){o[1].m(e,t),C(e,r,t),l=!0},p(e,t){n.p(e,t)},i(e){l||(ue(n),l=!0)},o(e){ge(n),l=!1},d(e){o[1].d(e),e&&O(r)}}}function nn(e,t,n){let r,{deleteOrder:l}=t,{order:a}=t,{apiCall:o}=t,{getAllOrders:s}=t;return e.$set=e=>{"deleteOrder"in e&&n("deleteOrder",l=e.deleteOrder),"order"in e&&n("order",a=e.order),"apiCall"in e&&n("apiCall",o=e.apiCall),"getAllOrders"in e&&n("getAllOrders",s=e.getAllOrders)},{tr:r,deleteOrder:l,order:a,apiCall:o,getAllOrders:s,expandOrder:function(){Te.set({order:a}),Se.set("expandedOrder")},click_handler:()=>l(a._id),tr_1_binding:function(e){z[e?"unshift":"push"](()=>{n("tr",r=e)})}}}class rn extends Oe{constructor(e){super(),Ce(this,e,nn,tn,s,{deleteOrder:0,order:0,apiCall:0,getAllOrders:0})}}function ln(t){let n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,x,M,V,E,F,N,I,U,j,B,Y,L,H,P,J,W,R,q,z,G,Q,K,X,Z,ee,te,ne=t.user.name+"";return{c(){n=w("nav"),r=w("span"),l=_("Inloggad som "),o=_(ne),s=D(),i=w("div"),d=w("div"),c=w("li"),u=w("a"),u.textContent="Beställningar",g=D(),h=w("div"),m=w("a"),p=_("Mina Beställningar"),b=D(),v=w("a"),y=_("Påbörjade Beställningar"),x=D(),M=w("a"),V=_("Icke Påbörjade Beställningar"),F=D(),N=w("a"),I=_("Avslutade Beställningar"),j=D(),B=w("div"),Y=D(),L=w("a"),H=_("Alla Beställningar"),W=D(),R=w("a"),q=_("Min profil"),G=D(),Q=w("a"),K=_("Hantera användare"),Z=D(),ee=w("a"),ee.textContent="Logga ut",S(r,"class","navbar-brand mb-0 h1"),S(u,"class","nav-link dropdown-toggle"),S(u,"href","#"),S(u,"id","navbarDropdown"),S(u,"role","button"),S(u,"data-toggle","dropdown"),S(u,"aria-haspopup","true"),S(u,"aria-expanded","false"),S(m,"href","#"),S(m,"class",f="nav-item nav-link "+("adminMyOrders"===t.urlValue?"active":"")),S(v,"href","#"),S(v,"class",k="nav-item nav-link "+("ongoingOrders"===t.urlValue?"active":"")),S(M,"href","#"),S(M,"class",E="nav-item nav-link "+("notStartedOrders"===t.urlValue?"active":"")),S(N,"href","#"),S(N,"class",U="nav-item nav-link "+("finishedOrders"===t.urlValue?"active":"")),S(B,"class","dropdown-divider"),S(L,"href","#"),S(L,"class",P="nav-item nav-link "+("allOrders"===t.urlValue?"active":"")),S(h,"class","dropdown-menu"),S(h,"style",J=t.dropdownToggle?"display:block":""),S(h,"aria-labelledby","navbarDropdown"),S(c,"class","nav-item dropdown"),S(R,"href","#"),S(R,"class",z="nav-item nav-link "+("myProfile"===t.urlValue?"active":"")+"\r\n        "),S(Q,"href","#"),S(Q,"class",X="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        "),S(ee,"class","nav-item nav-link"),S(ee,"href","#"),S(d,"class","navbar-nav"),S(i,"class"," navbar"),S(i,"id","navbarNavAltMarkup"),S(n,"class","navbar navbar-expand-lg sticky-top navbar-light bg-light"),te=[A(u,"click",t.click_handler),A(m,"click",t.click_handler_1),A(v,"click",t.click_handler_2),A(M,"click",t.click_handler_3),A(N,"click",t.click_handler_4),A(L,"click",t.click_handler_5),A(R,"click",t.click_handler_6),A(Q,"click",t.click_handler_7),A(ee,"click",t.logOut)]},m(e,t){C(e,n,t),$(n,r),$(r,l),$(r,o),$(n,s),$(n,i),$(i,d),$(d,c),$(c,u),$(c,g),$(c,h),$(h,m),$(m,p),$(h,b),$(h,v),$(v,y),$(h,x),$(h,M),$(M,V),$(h,F),$(h,N),$(N,I),$(h,j),$(h,B),$(h,Y),$(h,L),$(L,H),$(d,W),$(d,R),$(R,q),$(d,G),$(d,Q),$(Q,K),$(d,Z),$(d,ee)},p(e,t){e.user&&ne!==(ne=t.user.name+"")&&T(o,ne),e.urlValue&&f!==(f="nav-item nav-link "+("adminMyOrders"===t.urlValue?"active":""))&&S(m,"class",f),e.urlValue&&k!==(k="nav-item nav-link "+("ongoingOrders"===t.urlValue?"active":""))&&S(v,"class",k),e.urlValue&&E!==(E="nav-item nav-link "+("notStartedOrders"===t.urlValue?"active":""))&&S(M,"class",E),e.urlValue&&U!==(U="nav-item nav-link "+("finishedOrders"===t.urlValue?"active":""))&&S(N,"class",U),e.urlValue&&P!==(P="nav-item nav-link "+("allOrders"===t.urlValue?"active":""))&&S(L,"class",P),e.dropdownToggle&&J!==(J=t.dropdownToggle?"display:block":"")&&S(h,"style",J),e.urlValue&&z!==(z="nav-item nav-link "+("myProfile"===t.urlValue?"active":"")+"\r\n        ")&&S(R,"class",z),e.urlValue&&X!==(X="nav-item nav-link "+("manageUsers"===t.urlValue?"active":"")+"\r\n        ")&&S(Q,"class",X)},i:e,o:e,d(e){e&&O(n),a(te)}}}function an(e,t){e&&e.preventDefault(),Se.set(t)}function on(e,t,n){let r,{apiCall:l}=t,{user:a}=t;Se.subscribe(e=>n("urlValue",r=e)),document.addEventListener("click",e=>{"navbarDropdown"!==e.target.id&&n("dropdownToggle",o=!1)});let o=!1;return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall),"user"in e&&n("user",a=e.user)},{apiCall:l,user:a,urlValue:r,logOut:async function(e){try{e&&e.preventDefault(),(await l("/logOut")).error?alert("Kunde inte logga ut"):Se.set("authenticate")}catch(e){console.log(e)}},dropdownToggle:o,click_handler:()=>n("dropdownToggle",o=!o),click_handler_1:e=>an(e,"adminMyOrders"),click_handler_2:e=>an(e,"ongoingOrders"),click_handler_3:e=>an(e,"notStartedOrders"),click_handler_4:e=>an(e,"finishedOrders"),click_handler_5:e=>an(e,"allOrders"),click_handler_6:e=>an(e,"myProfile"),click_handler_7:e=>an(e,"manageUsers")}}class sn extends Oe{constructor(e){super(),Ce(this,e,on,ln,s,{apiCall:0,user:0})}}function dn(e,t,n){const r=Object.create(e);return r.order=t[n],r}function cn(e){let t;const n=new rn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,order:e.order,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.getAllOrders&&(r.getAllOrders=t.getAllOrders),e.showOrders&&(r.order=t.order),e.deleteOrder&&(r.deleteOrder=t.deleteOrder),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function un(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,M,E,F,N,I,U,j,B,Y,L,H,P,J,W,R,q=e.showOrders,z=[];for(let t=0;t<q.length;t+=1)z[t]=cn(dn(e,q,t));const G=e=>ge(z[e],1,1,()=>{z[e]=null});return{c(){t=w("div"),n=w("div"),r=w("h2"),l=_(e.header),o=D(),s=w("img"),d=D(),c=w("table"),u=w("caption"),u.textContent="Klicka på en beställning för mer information",g=D(),h=w("thead"),m=w("tr"),p=w("th"),p.textContent="#",f=D(),b=w("th"),b.textContent="Namn",v=D(),y=w("th"),y.textContent="Beställare",k=D(),M=w("th"),M.textContent="Ansvarig",E=D(),F=w("th"),F.textContent="Status",N=D(),I=w("th"),I.textContent="Datum",U=D(),j=w("th"),B=w("form"),Y=w("input"),L=D(),H=w("button"),H.textContent="Sök",P=D(),J=w("tbody");for(let e=0;e<z.length;e+=1)z[e].c();s.src!==(i="refresh.png")&&S(s,"src","refresh.png"),S(s,"id","refresh"),S(s,"alt","refresh"),S(s,"class","svelte-1ivz25g"),S(n,"class","card-header"),S(p,"scope","col"),S(b,"scope","col"),S(y,"scope","col "),S(y,"class","d-none d-sm-table-cell"),S(M,"scope","col "),S(M,"class","d-none d-md-table-cell"),S(F,"scope","col"),S(I,"scope","col "),S(I,"class","d-none d-md-table-cell"),S(Y,"class","form-control mr-sm-2 "),S(Y,"type","search"),S(Y,"placeholder","Sök"),S(Y,"aria-label","Sök"),S(H,"class","btn btn-success bg my-2 my-sm-0"),S(H,"type","submit"),S(B,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),S(j,"scope","col"),S(j,"colspan","2"),S(h,"class","thead-dark"),S(c,"class","table table-striped table-hover table-bordered "),S(t,"class","card m-sm-4 m-2 text-center"),R=[A(s,"click",e.getAllOrders),A(Y,"input",e.input_input_handler),A(B,"submit",e.filter)]},m(a,i){C(a,t,i),$(t,n),$(n,r),$(r,l),$(r,o),$(r,s),$(t,d),$(t,c),$(c,u),$(c,g),$(c,h),$(h,m),$(m,p),$(m,f),$(m,b),$(m,v),$(m,y),$(m,k),$(m,M),$(m,E),$(m,F),$(m,N),$(m,I),$(m,U),$(m,j),$(j,B),$(B,Y),V(Y,e.searchQuery),$(B,L),$(B,H),$(c,P),$(c,J);for(let e=0;e<z.length;e+=1)z[e].m(J,null);W=!0},p(e,t){if(W&&!e.header||T(l,t.header),e.searchQuery&&V(Y,t.searchQuery),e.apiCall||e.getAllOrders||e.showOrders||e.deleteOrder){let n;for(q=t.showOrders,n=0;n<q.length;n+=1){const r=dn(t,q,n);z[n]?(z[n].p(e,r),ue(z[n],1)):(z[n]=cn(r),z[n].c(),ue(z[n],1),z[n].m(J,null))}for(de(),n=q.length;n<z.length;n+=1)G(n);ce()}},i(e){if(!W){for(let e=0;e<q.length;e+=1)ue(z[e]);W=!0}},o(e){z=z.filter(Boolean);for(let e=0;e<z.length;e+=1)ge(z[e]);W=!1},d(e){e&&O(t),x(z,e),a(R)}}}function gn(e,t,n){let r,{apiCall:l}=t,{getAllOrders:a}=t,{deleteOrder:o}=t,{header:s}=t,i="",{allOrders:d=[]}=t;function c(e){return e.toLowerCase().search(i.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall),"getAllOrders"in e&&n("getAllOrders",a=e.getAllOrders),"deleteOrder"in e&&n("deleteOrder",o=e.deleteOrder),"header"in e&&n("header",s=e.header),"allOrders"in e&&n("allOrders",d=e.allOrders)},e.$$.update=(e={allOrders:1})=>{e.allOrders&&n("showOrders",r=d)},{apiCall:l,getAllOrders:a,deleteOrder:o,header:s,searchQuery:i,allOrders:d,filter:function(e){e&&e.preventDefault(),n("showOrders",r=d.filter(e=>e.productNumber==i||c(e.productName)||c(e.responsible.name)||c(e.responsible.email)||c(e.customer.name)||c(e.customer.email)||c(e.status)))},showOrders:r,input_input_handler:function(){i=this.value,n("searchQuery",i)}}}class hn extends Oe{constructor(e){super(),Ce(this,e,gn,un,s,{apiCall:0,getAllOrders:0,deleteOrder:0,header:0,allOrders:0})}}function mn(t){let n,r;return{c(){n=w("button"),n.textContent="Gör admin",S(n,"type","button"),S(n,"class","btn btn-warning"),r=A(n,"click",t.toggleUserAdmin)},m(e,t){C(e,n,t)},p:e,d(e){e&&O(n),r()}}}function pn(t){let n,r;return{c(){n=w("button"),n.textContent="Ta bort admin",S(n,"type","button"),S(n,"class","btn btn-warning"),r=A(n,"click",t.toggleUserAdmin)},m(e,t){C(e,n,t)},p:e,d(e){e&&O(n),r()}}}function fn(t){let n,r,l,a,o,s,i,d,c,u,g,h,m,p,f=t.user.name+"",b=t.user.email+"",v=t.user.admin?t.user.active?"Gör Inaktiv":"Gör Aktiv":"Radera användare";function y(e,t){return t.user.admin?pn:mn}let k=y(0,t),x=k(t);return{c(){n=w("tr"),r=w("td"),l=_(f),a=D(),o=w("td"),s=_(b),i=D(),d=w("td"),x.c(),c=D(),u=w("td"),g=w("button"),h=_(v),S(g,"type","button"),S(g,"class",m="btn "+(t.user.active?"btn-danger":"btn-success")),p=A(g,"click",t.toggleUserExistence)},m(e,t){C(e,n,t),$(n,r),$(r,l),$(n,a),$(n,o),$(o,s),$(n,i),$(n,d),x.m(d,null),$(n,c),$(n,u),$(u,g),$(g,h)},p(e,t){e.user&&f!==(f=t.user.name+"")&&T(l,f),e.user&&b!==(b=t.user.email+"")&&T(s,b),k===(k=y(0,t))&&x?x.p(e,t):(x.d(1),x=k(t),x&&(x.c(),x.m(d,null))),e.user&&v!==(v=t.user.admin?t.user.active?"Gör Inaktiv":"Gör Aktiv":"Radera användare")&&T(h,v),e.user&&m!==(m="btn "+(t.user.active?"btn-danger":"btn-success"))&&S(g,"class",m)},i:e,o:e,d(e){e&&O(n),x.d(),p()}}}function bn(e,t,n){let{user:r}=t,{getAllUsers:l}=t,{apiCall:a}=t;return e.$set=e=>{"user"in e&&n("user",r=e.user),"getAllUsers"in e&&n("getAllUsers",l=e.getAllUsers),"apiCall"in e&&n("apiCall",a=e.apiCall)},{user:r,getAllUsers:l,apiCall:a,toggleUserExistence:async function(){console.log("Toggle user");const e=r._id;try{let t="";if(t=r.admin?r.active?"Är du säker att du vill göra användaren inaktiv?":"Är du säker att du vill göra användaren aktiv":"Är du säker att du vill radera användaren?",!confirm(t))return;const n=await a("/toggleUserExistence",JSON.stringify({id:e}));if(console.log("CALL",n),n.error){if("NoDeleteYou"===n.message)return void alert("Du kan inte göra dig själv inaktiv");alert("Ett fel uppstod, försök igen senare")}else console.log("YAHHH","EMMEMEMEMEME"),l()}catch(e){console.log(e)}},toggleUserAdmin:async function(){let e="";if(e=r.admin?"Är du säker att du vill ta bort admin från denna användare?":"Är du säker att du vill göra användaren admin?",!confirm(e))return;const t=r._id;try{const e=await a("/toggleUserAdmin",JSON.stringify({id:t}));if(console.log("CALL",e),e.error){if("NoAdminYou"===e.message)return void alert("Du kan inte ta bort admin från dig själv");alert("Ett fel uppstod försök igen senare")}else l()}catch(e){console.log(e)}}}}class vn extends Oe{constructor(e){super(),Ce(this,e,bn,fn,s,{user:0,getAllUsers:0,apiCall:0})}}function yn(e,t,n){const r=Object.create(e);return r.user=t[n],r}function kn(e){let t;const n=new vn({props:{getAllUsers:e.getAllUsers,apiCall:e.apiCall,user:e.user}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.getAllUsers&&(r.getAllUsers=t.getAllUsers),e.apiCall&&(r.apiCall=t.apiCall),e.showUsers&&(r.user=t.user),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function $n(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,_,M=e.showUsers,T=[];for(let t=0;t<M.length;t+=1)T[t]=kn(yn(e,M,t));const E=e=>ge(T[e],1,1,()=>{T[e]=null});return{c(){t=w("div"),n=w("div"),r=w("div"),r.innerHTML="<h2>Alla användare</h2>",l=D(),o=w("div"),s=w("table"),i=w("thead"),d=w("th"),d.textContent="Namn",c=D(),u=w("th"),u.textContent="Email",g=D(),h=w("th"),m=w("form"),p=w("input"),f=D(),b=w("button"),b.textContent="Sök",v=D(),y=w("tbody");for(let e=0;e<T.length;e+=1)T[e].c();S(r,"class","card-header"),S(d,"scope","col"),S(u,"scope","col "),S(p,"class","form-control mr-sm-2 "),S(p,"type","search"),S(p,"placeholder","Sök"),S(p,"aria-label","Sök"),S(b,"class","btn btn-success bg my-2 my-sm-0"),S(b,"type","submit"),S(m,"class","form-inline my-2 my-lg-0 text-center justify-content-end"),S(h,"scope","col"),S(h,"colspan","2"),S(i,"class","thead-dark"),S(s,"class","table table-striped table-bordered table-hover"),S(o,"class","table-responsive text-left"),S(n,"class","card text-center"),S(t,"class","container-fluid "),_=[A(p,"input",e.input_input_handler),A(m,"submit",e.search)]},m(a,O){C(a,t,O),$(t,n),$(n,r),$(n,l),$(n,o),$(o,s),$(s,i),$(i,d),$(i,c),$(i,u),$(i,g),$(i,h),$(h,m),$(m,p),V(p,e.searchQuery),$(m,f),$(m,b),$(s,v),$(s,y);for(let e=0;e<T.length;e+=1)T[e].m(y,null);k=!0},p(e,t){if(e.searchQuery&&V(p,t.searchQuery),e.getAllUsers||e.apiCall||e.showUsers){let n;for(M=t.showUsers,n=0;n<M.length;n+=1){const r=yn(t,M,n);T[n]?(T[n].p(e,r),ue(T[n],1)):(T[n]=kn(r),T[n].c(),ue(T[n],1),T[n].m(y,null))}for(de(),n=M.length;n<T.length;n+=1)E(n);ce()}},i(e){if(!k){for(let e=0;e<M.length;e+=1)ue(T[e]);k=!0}},o(e){T=T.filter(Boolean);for(let e=0;e<T.length;e+=1)ge(T[e]);k=!1},d(e){e&&O(t),x(T,e),a(_)}}}function Cn(e,t,n){let r,{apiCall:l}=t,a="",{allUsers:o=[]}=t,{getAllUsers:s}=t;function i(e){return console.log(e,a),console.log(e.toLowerCase().search(a.toLocaleLowerCase())>-1),e.toLowerCase().search(a.toLocaleLowerCase())>-1}return e.$set=e=>{"apiCall"in e&&n("apiCall",l=e.apiCall),"allUsers"in e&&n("allUsers",o=e.allUsers),"getAllUsers"in e&&n("getAllUsers",s=e.getAllUsers)},e.$$.update=(e={allUsers:1})=>{e.allUsers&&n("showUsers",r=o)},{apiCall:l,searchQuery:a,allUsers:o,getAllUsers:s,search:function(e){e&&e.preventDefault(),console.log(o),n("showUsers",r=o.filter(e=>i(e.name)||i(e.email)||"admin"===a&&e.admin))},showUsers:r,input_input_handler:function(){a=this.value,n("searchQuery",a)}}}class On extends Oe{constructor(e){super(),Ce(this,e,Cn,$n,s,{apiCall:0,allUsers:0,getAllUsers:0})}}function xn(e){let t,n,r;return{c(){t=w("div"),t.innerHTML='<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>',S(t,"class","m-3")},m(e,n){C(e,t,n),r=!0},i(e){r||(te(()=>{n||(n=pe(t,De,{},!0)),n.run(1)}),r=!0)},o(e){n||(n=pe(t,De,{},!1)),n.run(0),r=!1},d(e){e&&O(t),e&&n&&n.end()}}}function wn(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b=e.user.email+"";return{c(){t=w("div"),n=w("form"),r=w("div"),l=w("label"),l.textContent="Verifikations kod",o=D(),s=w("input"),i=D(),d=w("small"),c=_("Ett epost meddelande med en kod har skickats till "),u=_(b),g=D(),h=w("button"),h.textContent="Verifiera email byte",S(l,"for","verificationCodeInput"),S(s,"type","text"),S(s,"class","form-control"),S(s,"id","verificationCodeInput"),S(s,"aria-describedby","emailHelp"),S(s,"placeholder","Skriv in din verifikations kod"),S(d,"id","emailHelp"),S(d,"class","form-text text-muted"),S(r,"class","form-group "),S(h,"type","submit"),S(h,"class","btn btn-success"),S(t,"class","m-2"),f=[A(s,"input",e.input_input_handler),A(n,"submit",e.submit_handler)]},m(a,m){C(a,t,m),$(t,n),$(n,r),$(r,l),$(r,o),$(r,s),V(s,e.verificationCode),$(r,i),$(r,d),$(d,c),$(d,u),$(n,g),$(n,h),p=!0},p(e,t){e.verificationCode&&s.value!==t.verificationCode&&V(s,t.verificationCode),p&&!e.user||b===(b=t.user.email+"")||T(u,b)},i(e){p||(te(()=>{m||(m=pe(t,De,{},!0)),m.run(1)}),p=!0)},o(e){m||(m=pe(t,De,{},!1)),m.run(0),p=!1},d(e){e&&O(t),e&&m&&m.end(),a(f)}}}function _n(e){let t,n,r,l,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k=e.loading&&xn(),x=e.showVerifyEmail&&wn(e);return{c(){t=w("form"),n=w("div"),r=w("label"),r.textContent="Ditt namn",l=D(),o=w("input"),s=D(),i=w("div"),d=w("label"),d.textContent="Din email address",c=D(),u=w("input"),g=D(),h=w("button"),m=_("Uppdatera"),p=D(),k&&k.c(),f=D(),x&&x.c(),b=M(),S(r,"for","exampleInputPassword1"),S(o,"type","text"),S(o,"class","form-control"),S(o,"id","exampleInputPassword1"),S(o,"placeholder","Namn"),S(n,"class","form-group"),S(d,"for","exampleInputEmail1"),S(u,"type","email"),S(u,"class","form-control"),S(u,"id","exampleInputEmail1"),S(u,"aria-describedby","emailHelp"),S(u,"placeholder","Email"),S(i,"class","form-group"),S(h,"type","submit"),S(h,"class","btn btn-success"),h.disabled=e.changed,S(t,"class","m-2"),y=[A(o,"input",e.input0_input_handler),A(u,"input",e.input1_input_handler),A(t,"submit",e.updateAccount)]},m(a,y){C(a,t,y),$(t,n),$(n,r),$(n,l),$(n,o),V(o,e.user.name),$(t,s),$(t,i),$(i,d),$(i,c),$(i,u),V(u,e.user.email),$(t,g),$(t,h),$(h,m),$(t,p),k&&k.m(t,null),C(a,f,y),x&&x.m(a,y),C(a,b,y),v=!0},p(e,n){e.user&&o.value!==n.user.name&&V(o,n.user.name),e.user&&u.value!==n.user.email&&V(u,n.user.email),v&&!e.changed||(h.disabled=n.changed),n.loading?k?ue(k,1):(k=xn(),k.c(),ue(k,1),k.m(t,null)):k&&(de(),ge(k,1,1,()=>{k=null}),ce()),n.showVerifyEmail?x?(x.p(e,n),ue(x,1)):(x=wn(n),x.c(),ue(x,1),x.m(b.parentNode,b)):x&&(de(),ge(x,1,1,()=>{x=null}),ce())},i(e){v||(ue(k),ue(x),v=!0)},o(e){ge(k),ge(x),v=!1},d(e){e&&O(t),k&&k.d(),e&&O(f),x&&x.d(e),e&&O(b),a(y)}}}function Dn(e,t,n){let r,{user:l}=t,{apiCall:a}=t,o={...l},s=!1,i=!1;async function d(e){try{const e=await a("/verifyUpdateEmail",JSON.stringify({verificationCode:r}));e.error?"WrongCode"===e.message?alert("Du har skrivit in fel kod"):alert("Något gick fel"):(alert("Ditt konot har uppdaterats"),n("user",l=e.user))}catch(e){console.log(e)}}let c;return e.$set=e=>{"user"in e&&n("user",l=e.user),"apiCall"in e&&n("apiCall",a=e.apiCall)},e.$$.update=(e={user:1,originalUserData:1})=>{(e.user||e.originalUserData)&&n("changed",c=JSON.stringify(l)===JSON.stringify(o))},{user:l,apiCall:a,loading:s,showVerifyEmail:i,verificationCode:r,updateAccount:async function(e){try{e.preventDefault(),n("showVerifyEmail",i=!0);const t=await a("/updateUser",JSON.stringify({user:l}));console.log("CALL",t),t.error?"AccountExists"==t.message?alert("Ett konto med din mailen finns redan"):(console.log("call",t),alert("Något gick fel, försök igen senare")):"VerifyEmail"===t.message?n("verifyEmail",d=!0):(n("user",l=t.user),n("originalUserData",o={...l})),n("loading",s=!1)}catch(e){console.log("Err",e),alert("Något gick fel, försök igen senare"),n("loading",s=!1)}},verifyEmail:d,changed:c,input0_input_handler:function(){l.name=this.value,n("user",l)},input1_input_handler:function(){l.email=this.value,n("user",l)},input_input_handler:function(){r=this.value,n("verificationCode",r)},submit_handler:e=>{e.preventDefault(),alert(d),d()}}}class Mn extends Oe{constructor(e){super(),Ce(this,e,Dn,_n,s,{user:0,apiCall:0})}}function An(e){let t;const n=new On({props:{apiCall:e.apiCall,getAllUsers:e.getAllUsers,allUsers:e.allUsers}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.allUsers&&(r.allUsers=t.allUsers),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Sn(e){let t;const n=new Mn({props:{user:e.user,apiCall:e.apiCall}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.user&&(r.user=t.user),e.apiCall&&(r.apiCall=t.apiCall),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Tn(e){let t;const n=new Xt({props:{order:e.paramsValue.order,apiCall:e.apiCall,deleteOrder:e.deleteOrder,allAdmins:e.allAdmins,getAllOrders:e.getAllOrders}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.paramsValue&&(r.order=t.paramsValue.order),e.apiCall&&(r.apiCall=t.apiCall),e.allAdmins&&(r.allAdmins=t.allAdmins),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Vn(e){let t;const n=new hn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,header:"Avslutade beställningar",allOrders:e.completedOrders,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.completedOrders&&(r.allOrders=t.completedOrders),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function En(e){let t;const n=new hn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,header:"Ej påbörjade beställningar",allOrders:e.notStartedOrders,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.notStartedOrders&&(r.allOrders=t.notStartedOrders),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Fn(e){let t;const n=new hn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,header:"Påbörjade beställningar",allOrders:e.ongoingOrders,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.ongoingOrders&&(r.allOrders=t.ongoingOrders),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Nn(e){let t;const n=new hn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,header:"Mina beställningar",allOrders:e.myOrders,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.myOrders&&(r.allOrders=t.myOrders),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function In(e){let t;const n=new hn({props:{apiCall:e.apiCall,getAllOrders:e.getAllOrders,header:"Alla beställningar",allOrders:e.allOrders,deleteOrder:e.deleteOrder}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.apiCall&&(r.apiCall=t.apiCall),e.allOrders&&(r.allOrders=t.allOrders),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Un(e){let t,n,r,l,a,o;const s=new sn({props:{user:e.user,apiCall:e.apiCall}}),i=[In,Nn,Fn,En,Vn,Tn,Sn,An],d=[];function c(e,t){return"allOrders"===t.urlValue?0:"adminMyOrders"===t.urlValue?1:"ongoingOrders"===t.urlValue?2:"notStartedOrders"===t.urlValue?3:"finishedOrders"===t.urlValue?4:"expandedOrder"===t.urlValue?5:"myProfile"===t.urlValue?6:7}return r=c(0,e),l=d[r]=i[r](e),{c(){t=w("header"),ye(s.$$.fragment),n=D(),l.c(),a=M()},m(e,l){C(e,t,l),ke(s,t,null),C(e,n,l),d[r].m(e,l),C(e,a,l),o=!0},p(e,t){const n={};e.user&&(n.user=t.user),e.apiCall&&(n.apiCall=t.apiCall),s.$set(n);let o=r;r=c(0,t),r===o?d[r].p(e,t):(de(),ge(d[o],1,1,()=>{d[o]=null}),ce(),l=d[r],l||(l=d[r]=i[r](t),l.c()),ue(l,1),l.m(a.parentNode,a))},i(e){o||(ue(s.$$.fragment,e),ue(l),o=!0)},o(e){ge(s.$$.fragment,e),ge(l),o=!1},d(e){e&&O(t),$e(s),e&&O(n),d[r].d(e),e&&O(a)}}}function jn(e,t,n){let r,l,{apiCall:a}=t,{user:o}=t;Te.subscribe(e=>n("paramsValue",l=e)),Se.subscribe(e=>n("urlValue",r=e));let s=[],i=[],d=[],c=[],u=[],g=[],h=[];async function m(){console.log("GetAllOrders","FDFD");try{const e=await a("/getAllOrders");e.error&&console.log("error",e.message),n("allOrders",s=e.data),async function(){console.log("All orders",s),n("myOrders",c=s.filter(e=>e.responsible.email===o.email)),n("notStartedOrders",u=s.filter(e=>(console.log("Ej påbörjad"===e.status),"Ej påbörjad"===e.status))),n("ongoingOrders",g=s.filter(e=>"Påbörjad"===e.status)),n("completedOrders",h=s.filter(e=>"Avslutad"===e.status)),console.log("My orders",c),console.log("Not startedOrder",u),console.log("Ongoing orders",g),console.log("Completed orders",h)}()}catch(e){console.log(e)}}async function p(){console.log("GetAllOrders","FDFD");try{const e=await a("/getAllUsers");console.log("call",e),e.error?alert("Kunde inte hämta anvädare från servern"):(n("allUsers",i=e.users),async function(){n("allAdmins",d=i.filter(e=>e.admin))}())}catch(e){console.log(e)}}return p(),m(),e.$set=e=>{"apiCall"in e&&n("apiCall",a=e.apiCall),"user"in e&&n("user",o=e.user)},{apiCall:a,user:o,urlValue:r,paramsValue:l,allOrders:s,allUsers:i,allAdmins:d,myOrders:c,notStartedOrders:u,ongoingOrders:g,completedOrders:h,getAllOrders:m,getAllUsers:p,deleteOrder:async function(e){try{if(!confirm("Är du säker att du vill radera beställning"))return;const t=await a("/deleteOrder",JSON.stringify({id:e}));console.log(t),t.error||(console.log("success"),Se.set("allOrders"),m())}catch(e){console.log(e)}}}}class Bn extends Oe{constructor(e){super(),Ce(this,e,jn,Un,s,{apiCall:0,user:0})}}function Yn(t){let n,r,l,a,o,s,i,d,c,u,g,h,m,p,f,b,v,y,k,x,M,A,V,E,F,N,I,U=t.order.productNumber+"",j=t.order.productName+"",B=t.order.customer.name+"",Y=t.order.responsible.name+"",L=("Nobody"===t.order.responsible.email?"":t.order.responsible.email)+"",H=t.order.status+"",P=new Date(t.order.date).toDateString()+"",J=(t.order.estimatedFinishDate?new Date(t.order.estimatedFinishDate).toDateString():"Obestämt")+"";return{c(){n=w("tr"),r=w("th"),l=_(U),a=D(),o=w("td"),s=_(j),i=D(),d=w("td"),c=_(B),u=D(),g=w("td"),h=_(Y),m=D(),p=w("br"),f=D(),b=w("a"),v=_(L),k=D(),x=w("td"),M=_(H),A=D(),V=w("td"),E=_(P),F=D(),N=w("td"),I=_(J),S(r,"scope","col"),S(b,"href",y="mailto:"+("Nobody"===t.order.responsible.email?"":t.order.responsible.email))},m(e,t){C(e,n,t),$(n,r),$(r,l),$(n,a),$(n,o),$(o,s),$(n,i),$(n,d),$(d,c),$(n,u),$(n,g),$(g,h),$(g,m),$(g,p),$(g,f),$(g,b),$(b,v),$(n,k),$(n,x),$(x,M),$(n,A),$(n,V),$(V,E),$(n,F),$(n,N),$(N,I)},p(e,t){e.order&&U!==(U=t.order.productNumber+"")&&T(l,U),e.order&&j!==(j=t.order.productName+"")&&T(s,j),e.order&&B!==(B=t.order.customer.name+"")&&T(c,B),e.order&&Y!==(Y=t.order.responsible.name+"")&&T(h,Y),e.order&&L!==(L=("Nobody"===t.order.responsible.email?"":t.order.responsible.email)+"")&&T(v,L),e.order&&y!==(y="mailto:"+("Nobody"===t.order.responsible.email?"":t.order.responsible.email))&&S(b,"href",y),e.order&&H!==(H=t.order.status+"")&&T(M,H),e.order&&P!==(P=new Date(t.order.date).toDateString()+"")&&T(E,P),e.order&&J!==(J=(t.order.estimatedFinishDate?new Date(t.order.estimatedFinishDate).toDateString():"Obestämt")+"")&&T(I,J)},i:e,o:e,d(e){e&&O(n)}}}function Ln(e,t,n){let{order:r}=t;return r.responsible.active||n("order",r.responsible={name:"Ingen",email:"NoBody",active:!1},r),e.$set=e=>{"order"in e&&n("order",r=e.order)},{order:r}}class Hn extends Oe{constructor(e){super(),Ce(this,e,Ln,Yn,s,{order:0})}}function Pn(e,t,n){const r=Object.create(e);return r.order=t[n],r}function Jn(e){let t;const n=new Hn({props:{order:e.order}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.orders&&(r.order=t.order),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function Wn(e){let t,n,r,l,a,o,s,i;const d=new ze({props:{apiCall:e.apiCall}});let c=e.orders,u=[];for(let t=0;t<c.length;t+=1)u[t]=Jn(Pn(e,c,t));const g=e=>ge(u[e],1,1,()=>{u[e]=null});return{c(){t=w("header"),ye(d.$$.fragment),n=D(),r=w("div"),l=w("table"),a=w("thead"),a.innerHTML='<tr><th scope="col">#</th> \n        <th scope="col">Namn</th> \n        <th scope="col ">Beställare</th> \n        <th scope="col ">Ansvarig</th> \n        <th scope="col">Status</th> \n        <th scope="col ">Datum</th> \n        <th scope="col ">Slutdatum</th></tr>',o=D(),s=w("tbody");for(let e=0;e<u.length;e+=1)u[e].c();S(a,"class","thead-dark"),S(l,"class","table table-striped table-hover table-bordered "),S(r,"class","card m-sm-4 m-2 text-center table-responsive-md")},m(e,c){C(e,t,c),ke(d,t,null),C(e,n,c),C(e,r,c),$(r,l),$(l,a),$(l,o),$(l,s);for(let e=0;e<u.length;e+=1)u[e].m(s,null);i=!0},p(e,t){const n={};if(e.apiCall&&(n.apiCall=t.apiCall),d.$set(n),e.orders){let n;for(c=t.orders,n=0;n<c.length;n+=1){const r=Pn(t,c,n);u[n]?(u[n].p(e,r),ue(u[n],1)):(u[n]=Jn(r),u[n].c(),ue(u[n],1),u[n].m(s,null))}for(de(),n=c.length;n<u.length;n+=1)g(n);ce()}},i(e){if(!i){ue(d.$$.fragment,e);for(let e=0;e<c.length;e+=1)ue(u[e]);i=!0}},o(e){ge(d.$$.fragment,e),u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)ge(u[e]);i=!1},d(e){e&&O(t),$e(d),e&&O(n),e&&O(r),x(u,e)}}}function Rn(e,t,n){let{apiCall:r}=t,l=[];return async function(){try{const e=await r("/getMyOrders","");console.log("call",e),e.error?alert("Kunde inte hämta din beställningar"):n("orders",l=e.orders)}catch(e){console.log(e)}}(),e.$set=e=>{"apiCall"in e&&n("apiCall",r=e.apiCall)},{apiCall:r,orders:l}}class qn extends Oe{constructor(e){super(),Ce(this,e,Rn,Wn,s,{apiCall:0})}}function zn(t){let n;return{c(){n=w("main"),n.innerHTML='<header><h1>Laddar...</h1></header> \n  <div class="spinner-grow  svelte-1cplefx" style="width: 20rem; height: 20rem;" role="status" id="load"><span class="sr-only">Loading...</span></div>',S(n,"class","bg-primary svelte-1cplefx")},m(e,t){C(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}class Gn extends Oe{constructor(e){super(),Ce(this,e,null,zn,s,{})}}let Qn=Ae({});function Kn(t){let n;const r=new Gn({});return{c(){ye(r.$$.fragment)},m(e,t){ke(r,e,t),n=!0},p:e,i(e){n||(ue(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){$e(r,e)}}}function Xn(t){let n;const r=new qn({props:{apiCall:t.apiCall}});return{c(){ye(r.$$.fragment)},m(e,t){ke(r,e,t),n=!0},p:e,i(e){n||(ue(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){$e(r,e)}}}function Zn(e){let t;const n=new Xt({props:{order:e.selectedOrderValue}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};e.selectedOrderValue&&(r.order=t.selectedOrderValue),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function er(e){let t;const n=new et({props:{user:e.userValue||e.paramsValue.user,apiCall:e.apiCall}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};(e.userValue||e.paramsValue)&&(r.user=t.userValue||t.paramsValue.user),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function tr(e){let t;const n=new Bn({props:{user:e.userValue||e.paramsValue.user,apiCall:e.apiCall}});return{c(){ye(n.$$.fragment)},m(e,r){ke(n,e,r),t=!0},p(e,t){const r={};(e.userValue||e.paramsValue)&&(r.user=t.userValue||t.paramsValue.user),n.$set(r)},i(e){t||(ue(n.$$.fragment,e),t=!0)},o(e){ge(n.$$.fragment,e),t=!1},d(e){$e(n,e)}}}function nr(t){let n;const r=new Be({props:{apiCall:t.apiCall}});return{c(){ye(r.$$.fragment)},m(e,t){ke(r,e,t),n=!0},p:e,i(e){n||(ue(r.$$.fragment,e),n=!0)},o(e){ge(r.$$.fragment,e),n=!1},d(e){$e(r,e)}}}function rr(e){let t,n,r,l;const a=[nr,tr,er,Zn,Xn,Kn],o=[];function s(e,t){return"authenticate"===t.urlValue?0:"allOrders"===t.urlValue||"adminMyOrders"===t.urlValue||"ongoingOrders"===t.urlValue||"notStartedOrders"===t.urlValue||"myProfile"===t.urlValue||"finishedOrders"===t.urlValue||"manageUsers"===t.urlValue||"expandedOrder"===t.urlValue?1:"makeOrder"===t.urlValue?2:"expandedOrder"===t.urlValue?3:"myOrders"===t.urlValue?4:5}return t=s(0,e),n=o[t]=a[t](e),{c(){n.c(),r=M()},m(e,n){o[t].m(e,n),C(e,r,n),l=!0},p(e,l){let i=t;t=s(0,l),t===i?o[t].p(e,l):(de(),ge(o[i],1,1,()=>{o[i]=null}),ce(),n=o[t],n||(n=o[t]=a[t](l),n.c()),ue(n,1),n.m(r.parentNode,r))},i(e){l||(ue(n),l=!0)},o(e){ge(n),l=!1},d(e){o[t].d(e),e&&O(r)}}}function lr(e,t,n){let r,l,a,o;function s(e,t,n,l){const a=!("multipart/form-data"===n);return console.log(t),new Promise((n,o)=>{const d={method:"POST",mode:"cors",credentials:"include",body:t};a&&(d.headers={"Content-Type":"application/json"}),console.log("path",e),fetch("http://localhost:8000"+e,d).then(e=>e.json()).then(async t=>{if(console.log("answer"),t.error)l||"NoAuth"!==t.message?"NotAdmin"===t.message?(alert("Du är inte admin längre, detta har troligen hänt för någon annan admin har tagit bort din admin tillgång, du kommer nu bli skickad till rätt sida"),i()):"NotActive"===t.message&&"authenticate"!==r?(alert("Ditt konto är inaktivt, detta har hänt då någon admin har gjort det inaktivt, du kan använda kontot efter någon admin har gjort dig aktiv igen, du kommer nu bli utloggad"),await s("/logOut"),Se.set("authenticate")):"NoAccount"===t.message&&"/login"!==e?(alert("Ditt konto har blivit raderat, detta beror på att någon admin har tagit bort det, du kommer nu bli utloggad"),await s("/logOut"),Se.set("authenticate")):n(t):(console.log("Logged out"),alert("Du har blivit utloggad"),Se.set("authenticate"));else{if("refresh"==t.message)return void i();n(t),console.log(t)}}).catch(e=>o(e))})}async function i(){try{console.log("route user");const e=await s("/checkAccount",void 0,void 0,!0);console.log("user",e);const t=function(e){try{return e.authenticated?(n("userValue",l=e),e.admin?"allOrders":"makeOrder"):"authenticate"}catch(e){console.log(e)}}(e);console.log(t),Se.set(t)}catch(e){console.log("err"),console.log(e)}}return Qn.subscribe(e=>n("selectedOrderValue",a=e)),Se.subscribe(e=>n("urlValue",r=e)),Te.subscribe(e=>n("paramsValue",o=e)),i(),e.$$.update=(e={urlValue:1})=>{e.urlValue&&console.log(r)},{urlValue:r,userValue:l,selectedOrderValue:a,paramsValue:o,apiCall:s}}return new class extends Oe{constructor(e){super(),Ce(this,e,lr,rr,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
