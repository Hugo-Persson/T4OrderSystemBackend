{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\src\\Pages\\404.svelte",
    "..\\..\\src\\Pages\\MakeOrder.svelte",
    "..\\..\\src\\Pages\\Login.svelte",
    "..\\..\\src\\Pages\\Components\\Order.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n\r\n</script>\r\n\r\n<style>\r\n  main {\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n</style>\r\n\r\n<main class=\"bg-danger\">\r\n  <div class=\"jumbotron\">\r\n    <h1 class=\"display-4\">404 Page not found</h1>\r\n    <p class=\"lead\">Could not found the page for the entered url</p>\r\n    <hr class=\"my-4\" />\r\n    <Link to=\"/\">Go to home page</Link>\r\n  </div>\r\n</main>\r\n",
    "<script>\r\n  import { slide, fade } from \"svelte/transition\";\r\n  import AddFile from \"./Components/AddFile.svelte\";\r\n\r\n  export let apiCall;\r\n  export let user;\r\n  let files = [];\r\n  let fileDescriptions = [];\r\n\r\n  let success = false;\r\n  let error = false;\r\n  let alertText = \"\";\r\n\r\n  function addFile(e) {\r\n    e.preventDefault();\r\n    console.log(\"add file\");\r\n    fileDescriptions = [...fileDescriptions, undefined];\r\n    console.log(fileDescriptions);\r\n    console.log(files);\r\n  }\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n    console.log(e.currentTarget);\r\n    const formData = new FormData(e.currentTarget);\r\n    files.map(file => formData.append(\"files\", file));\r\n    formData.append(\"fileDescriptions\", fileDescriptions);\r\n    for (let [key, value] of formData.entries()) {\r\n      console.log(key, value);\r\n    }\r\n    const call = await apiCall(\"/makeOrder\", formData, \"multipart/form-data\");\r\n    if (call.error) {\r\n      error = true;\r\n      alertText = \"Kunde inte skapa beställning, försök igen senare\";\r\n    } else {\r\n      success = true;\r\n      alertText = \"Order skapad\";\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  main {\r\n  }\r\n  form {\r\n    width: 80%;\r\n    margin: auto;\r\n    margin-top: 20px;\r\n  }\r\n</style>\r\n\r\n<div class=\"container-fluid\">\r\n  <main>\r\n\r\n    {#if error || success}\r\n      <div\r\n        class=\"alert {error ? 'alert-danger' : 'alert-success'}\r\n        \"\r\n        transition:slide\r\n        role=\"alert\">\r\n        {alertText}\r\n      </div>\r\n    {/if}\r\n\r\n    <form on:submit={submitForm}>\r\n\r\n      <div class=\"form-group\">\r\n        <div class=\"form-row\">\r\n          <div class=\"col\">\r\n            <label for=\"productName\">Projektnamn</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"productName\"\r\n              name=\"productName\"\r\n              aria-describedby=\"emailHelp\"\r\n              placeholder=\"Projektnamn\" />\r\n          </div>\r\n          <div class=\"col\">\r\n            <label for=\"customer\">Beställare</label>\r\n            <input\r\n              name=\"customer\"\r\n              type=\"text\"\r\n              id=\"customer\"\r\n              class=\"form-control\"\r\n              value={user.name}\r\n              placeholder=\"Beställare\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group mt-3\">\r\n          <h3>Typ av uppdrag</h3>\r\n          <div class=\"form-check\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              value=\"\"\r\n              id=\"tillverkning\"\r\n              name=\"producation\" />\r\n            <label class=\"form-check-label\" for=\"tillverkning\">\r\n              Tillverkning\r\n            </label>\r\n          </div>\r\n          <div class=\"form-check\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              value=\"\"\r\n              id=\"tillverkningsunderlag\"\r\n              name=\"productionDocumentation\" />\r\n            <label class=\"form-check-label\" for=\"tillverkningsunderlag\">\r\n              Tillverkningsunderlag\r\n            </label>\r\n          </div>\r\n          <div class=\"form-check\">\r\n            <input\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              value=\"\"\r\n              id=\"beräkning\"\r\n              name=\"calculation\" />\r\n            <label class=\"form-check-label\" for=\"beräkning\">Beräkning</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <h3>Beskrivning av produkt</h3>\r\n          <textarea\r\n            class=\"form-control\"\r\n            id=\"exampleFormControlTextarea1\"\r\n            rows=\"3\"\r\n            name=\"productDescription\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <h3>Önskemål</h3>\r\n          <textarea\r\n            class=\"form-control\"\r\n            id=\"productDescripion\"\r\n            name=\"wishes\"\r\n            rows=\"3\" />\r\n        </div>\r\n        <h3>Filer</h3>\r\n\r\n        {#each fileDescriptions as desc, i}\r\n          <AddFile index={i} {files} descriptions={fileDescriptions} />\r\n        {/each}\r\n\r\n        <button class=\"btn btn-primary\" on:click={addFile}>Add file</button>\r\n\r\n        <hr class=\"my-4\" />\r\n        <button type=\"submit\" class=\"btn btn-success btn-lg\">Make order</button>\r\n      </div>\r\n    </form>\r\n  </main>\r\n</div>\r\n",
    "<script>\r\n  import { slide, fade } from \"svelte/transition\";\r\n  import { url } from \"../Router\";\r\n  export let apiCall;\r\n\r\n  let email;\r\n  let name;\r\n  let register = false;\r\n  let headerText = \"Login/Register\";\r\n  let fetch;\r\n  let verify = false;\r\n  let verificationCode;\r\n  let loading;\r\n  let verificationToken;\r\n  let progress = \"0%\";\r\n\r\n  let alertText = \"\";\r\n  let error = false;\r\n\r\n  let feedbackInformation = \"\";\r\n  async function login(e) {\r\n    e.preventDefault();\r\n\r\n    console.log(register);\r\n    if (register) {\r\n      registerUser(e);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      loading = true;\r\n      const call = await apiCall(\"/login\", JSON.stringify({ email: email }));\r\n\r\n      if (call.message === \"NoAccount\") {\r\n        progress = \"33%\";\r\n        register = true;\r\n        loading = false;\r\n        headerText = \"Register\";\r\n      } else if (!call.error) {\r\n        loading = false;\r\n        console.log(\"Login no error\");\r\n        headerText = \"Verify login\";\r\n        verificationToken = call.data.token;\r\n        progress = \"50%\";\r\n\r\n        feedbackInformation =\r\n          \"An email with the verification code have been sent to \" + email;\r\n        verify = true;\r\n      } else {\r\n        console.log(\"huh\");\r\n      }\r\n      console.log(call);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n  async function registerUser(e) {\r\n    e.preventDefault();\r\n    try {\r\n      const call = await apiCall(\r\n        \"/registerUser\",\r\n        JSON.stringify({ name: name, email: email })\r\n      );\r\n\r\n      if (!call.error) {\r\n        progress = \"66%\";\r\n        verify = true;\r\n        verificationToken = call.data.token;\r\n        console.log(verificationToken);\r\n        headerText = \"Verify account\";\r\n        feedbackInformation =\r\n          \"An email with the verification code have been sent to \" + email;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n  async function verifyWithCode(e) {\r\n    try {\r\n      console.log(\"code\");\r\n      e.preventDefault();\r\n      console.log(verificationToken);\r\n      const call = await apiCall(\r\n        \"/verifyWithCode\",\r\n        JSON.stringify({\r\n          verificationCode: verificationCode,\r\n          token: verificationToken\r\n        })\r\n      );\r\n      console.log(call);\r\n      if (call.error) {\r\n        error = true;\r\n        if (call.message === \"WrongCode\") {\r\n          alertText = \"Wrong verification code entered, try again\";\r\n        }\r\n      } else {\r\n        //authed\r\n        console.log(call);\r\n        if (call.admin) {\r\n          url.set(\"adminPanel\");\r\n        } else {\r\n          url.set(\"makeOrder\");\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  main {\r\n    text-align: center;\r\n    height: 100%;\r\n    width: 100%;\r\n    padding: 3% 0 3% 0;\r\n    position: absolute;\r\n  }\r\n  #login {\r\n    padding: 1%;\r\n    margin: auto;\r\n    height: 55vh;\r\n    background-color: white;\r\n    display: inline-block;\r\n    border-radius: 8px;\r\n    position: relative;\r\n  }\r\n\r\n  @media (min-width: 576px) {\r\n    #login {\r\n      width: 95%;\r\n    }\r\n  }\r\n\r\n  @media (min-width: 768px) {\r\n    #login {\r\n      width: 60%;\r\n    }\r\n  }\r\n\r\n  @media (min-width: 992px) {\r\n    #login {\r\n      width: 30%;\r\n    }\r\n  }\r\n\r\n  #progressContainer {\r\n    position: absolute;\r\n    bottom: 10px;\r\n    width: 92%;\r\n  }\r\n  .spinner-border {\r\n    margin: 10px;\r\n  }\r\n  .progress {\r\n    position: initial;\r\n  }\r\n  .alert {\r\n    top: 0px;\r\n    position: absolute;\r\n    width: 100%;\r\n  }\r\n</style>\r\n\r\n<main class={progress === '100%' ? 'bg-success' : 'bg-primary'}>\r\n  {#if error}\r\n    <div class=\"alert alert-danger\" transition:slide role=\"alert\">\r\n      {alertText}\r\n    </div>\r\n  {/if}\r\n  <div id=\"login\">\r\n    <header>\r\n      <h1>{headerText}</h1>\r\n    </header>\r\n\r\n    {#if verify}\r\n      <form transition:slide on:submit={verifyWithCode}>\r\n        <div class=\"form-group\">\r\n          <label for=\"verficationCode\">Verification code</label>\r\n          <input\r\n            bind:value={verificationCode}\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"verficationCode\"\r\n            aria-describedby=\"emailHelp\"\r\n            placeholder=\"Enter verification code\" />\r\n          <small id=\"emailHelp\" class=\"form-text text-muted\">\r\n            {feedbackInformation}\r\n          </small>\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\r\n      </form>\r\n    {:else}\r\n      <!-- Input before registration  -->\r\n      <form transition:slide on:submit={login}>\r\n        <div class=\"form-group\">\r\n          {#if headerText === 'Register'}\r\n            <div class=\"form-group\">\r\n              <label for=\"exampleInputPassword1\">Your name</label>\r\n              <input\r\n                bind:value={name}\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"nameInput\"\r\n                placeholder=\"Your name\" />\r\n            </div>\r\n          {/if}\r\n          <label for=\"exampleInputEmail1\">Email address</label>\r\n          <input\r\n            bind:value={email}\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            id=\"exampleInputEmail1\"\r\n            aria-describedby=\"emailHelp\"\r\n            placeholder=\"Enter email\" />\r\n\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\r\n      </form>\r\n    {/if}\r\n\r\n    <div id=\"progressContainer\">\r\n      {#if loading}\r\n        <div class=\"spinner-border text-primary\" role=\"status\">\r\n          <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n      {/if}\r\n      <div class=\"progress\">\r\n        <div\r\n          class=\"progress-bar\"\r\n          role=\"progressbar\"\r\n          style={'width:' + progress}\r\n          aria-valuenow=\"25\"\r\n          aria-valuemin=\"0\"\r\n          aria-valuemax=\"100\">\r\n          {progress}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n</main>\r\n",
    "<script>\r\n  /* global $ */\r\n  import { slide } from \"svelte/transition\";\r\n  import ExpandedOrder from \"./ExpandedOrder.svelte\";\r\n\r\n  export let order;\r\n  export let apiCall;\r\n  export let getAllOrders;\r\n  let expanded = false;\r\n  let deleteOrderError;\r\n  function toggleExpand() {\r\n    expanded = !expanded;\r\n  }\r\n  async function deleteOrder() {\r\n    console.log(\"delete\");\r\n    console.log(deleteOrderError);\r\n\r\n    try {\r\n      const call = await apiCall(\r\n        \"/deleteOrder\",\r\n        JSON.stringify({ id: order._id })\r\n      );\r\n      console.log(call);\r\n      if (call.error) {\r\n        // TODO:Error handeling\r\n      } else {\r\n        console.log(\"success\");\r\n        getAllOrders();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  tr {\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n\r\n{#if expanded}\r\n  <tr style=\"cursor:initial\">\r\n    <td id=\"expandedContent\" colspan=\"7\">\r\n      <ExpandedOrder {deleteOrder} {order} {toggleExpand} />\r\n    </td>\r\n  </tr>\r\n{:else}\r\n  <tr>\r\n    <th on:click={toggleExpand} class=\"align-middle\" scope=\"row\">\r\n      {order.number}\r\n    </th>\r\n    <td on:click={toggleExpand} class=\"align-middle\">{order.productName}</td>\r\n    <td on:click={toggleExpand} class=\"align-middle d-none d-sm-table-cell\">\r\n      {order.customer.name}\r\n    </td>\r\n    <td on:click={toggleExpand} class=\"align-middle d-none d-md-table-cell\">\r\n      {order.responsible.name}\r\n    </td>\r\n    <td on:click={toggleExpand} class=\"align-middle\">{order.status}</td>\r\n    <td on:click={toggleExpand} class=\"align-middle d-none d-md-table-cell\">\r\n      {new Date(order.date).toDateString()}\r\n    </td>\r\n    <td>\r\n      <button class=\"btn btn-danger float-right\" on:click={deleteOrder}>\r\n        Radera order\r\n      </button>\r\n    </td>\r\n  </tr>\r\n{/if}\r\n"
  ],
  "names": [],
  "mappings": "AAKE,IAAI,cAAC,CAAC,AACJ,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,AACf,CAAC;ACmCD,IAAI,eAAC,CAAC,AACJ,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC;ACgED,IAAI,eAAC,CAAC,AACJ,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAClB,QAAQ,CAAE,QAAQ,AACpB,CAAC,AACD,MAAM,eAAC,CAAC,AACN,OAAO,CAAE,EAAE,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,IAAI,CACZ,gBAAgB,CAAE,KAAK,CACvB,OAAO,CAAE,YAAY,CACrB,aAAa,CAAE,GAAG,CAClB,QAAQ,CAAE,QAAQ,AACpB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,MAAM,eAAC,CAAC,AACN,KAAK,CAAE,GAAG,AACZ,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,MAAM,eAAC,CAAC,AACN,KAAK,CAAE,GAAG,AACZ,CAAC,AACH,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,MAAM,eAAC,CAAC,AACN,KAAK,CAAE,GAAG,AACZ,CAAC,AACH,CAAC,AAED,kBAAkB,eAAC,CAAC,AAClB,QAAQ,CAAE,QAAQ,CAClB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,GAAG,AACZ,CAAC,AACD,eAAe,eAAC,CAAC,AACf,MAAM,CAAE,IAAI,AACd,CAAC,AACD,SAAS,eAAC,CAAC,AACT,QAAQ,CAAE,OAAO,AACnB,CAAC,AACD,MAAM,eAAC,CAAC,AACN,GAAG,CAAE,GAAG,CACR,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,AACb,CAAC;AC7HD,EAAE,eAAC,CAAC,AACF,MAAM,CAAE,OAAO,AACjB,CAAC"
}